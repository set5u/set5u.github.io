import{L as lo,ao as Dd,ap as Ld,aq as qd,ar as Ud,as as Bd,U as Hd,at as Jd,au as Vd}from"./CR__Ohlt.js";import"./Dr010rql.js";import"./uQFBsuD7.js";import"./B-pl63Pz.js";var Wf={},Yf;function Kd(){if(Yf)return Wf;Yf=1;var e=lo(),r=Dd().right,t=Ld(),n=qd(),u=Ud(),a=!u&&n>79&&n<83,i=a||!t("reduceRight");return e({target:"Array",proto:!0,forced:i},{reduceRight:function(f){return r(this,f,arguments.length,arguments.length>1?arguments[1]:void 0)}}),Wf}Kd();function li(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function zd(e){if(Array.isArray(e))return li(e)}function Gd(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wd(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yd(e){return zd(e)||Gd(e)||Qd(e)||Wd()}function Qd(e,r){if(e){if(typeof e=="string")return li(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return li(e,r)}}var Xd=function(e){return typeof e=="function"},s=function(r,t){if(typeof r=="function")return function(){var n=arguments;return r(arguments)?t.apply(this,arguments):function(u){return t.apply(void 0,[u].concat(Array.prototype.slice.call(n)))}};switch(r){case 0:case 1:throw new RangeError("Invalid arity ".concat(r));case 2:return function(n,u){return arguments.length>=2?t(n,u):function(a){return t(a,n)}};case 3:return function(n,u,a){return arguments.length>=3?t(n,u,a):function(i){return t(i,n,u)}};case 4:return function(n,u,a,i){return arguments.length>=4?t(n,u,a,i):function(o){return t(o,n,u,a)}};case 5:return function(n,u,a,i,o){return arguments.length>=5?t(n,u,a,i,o):function(f){return t(f,n,u,a,i)}};default:return function(){if(arguments.length>=r)return t.apply(this,arguments);var n=arguments;return function(u){return t.apply(void 0,[u].concat(Yd(n)))}}}},re=function(e){return e},Mn=function(e){return function(){return e}},Qf=Mn(!0),vi=Mn(!1),Zd=Mn(null),Ms=Mn(void 0),Fs=Ms;function d(e,r,t,n,u,a,i,o,f){switch(arguments.length){case 1:return e;case 2:return r(e);case 3:return t(r(e));case 4:return n(t(r(e)));case 5:return u(n(t(r(e))));case 6:return a(u(n(t(r(e)))));case 7:return i(a(u(n(t(r(e))))));case 8:return o(i(a(u(n(t(r(e)))))));case 9:return f(o(i(a(u(n(t(r(e))))))));default:{for(var c=arguments[0],l=1;l<arguments.length;l++)c=arguments[l](c);return c}}}var Ut=function(e){return function(r,t){return r===t||e(r,t)}},ey=function(e,r){return e===r},ry=function(){return ey},ty=ry(),Cs=s(2,function(e,r){return Ut(function(t,n){return e(r(t),r(n))})}),eA=Cs(ty,function(e){return e.getTime()}),ny=function(e){return Ut(function(r,t){if(r.length!==t.length)return!1;for(var n=0;n<r.length;n++){var u=e(r[n],t[n]);if(!u)return!1}return!0})},rA=function(e){var r=Object.keys(e);return Ut(function(t,n){var u=!0,a=!1,i=void 0;try{for(var o=r[Symbol.iterator](),f;!(u=(f=o.next()).done);u=!0){var c=f.value;if(!e[c](t[c],n[c]))return!1}}catch(l){a=!0,i=l}finally{try{!u&&o.return!=null&&o.return()}finally{if(a)throw i}}return!0})},uy="3.12.1",oa=function(){return uy},Xf="effect/GlobalValue/globalStoreId/".concat(oa()),en,j=function(e,r){if(!en){var t,n,u;(u=(t=globalThis)[n=Xf])!==null&&u!==void 0||(t[n]=new Map),en=globalThis[Xf]}return en.has(e)||en.set(e,r()),en.get(e)};function vo(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var tA=function(e){return!!e},nA=function(e){return e instanceof Set},uA=function(e){return e instanceof Map},ay=function(e){return typeof e=="string"},mu=function(e){return typeof e=="number"},iy=function(e){return typeof e=="boolean"},oy=function(e){return(typeof e>"u"?"undefined":vo(e))==="bigint"},aA=function(e){return(typeof e>"u"?"undefined":vo(e))==="symbol"},Fn=Xd,iA=function(e){return e===void 0},oA=function(e){return e!==void 0},fA=function(e){return e!==null},cA=function(e){return!1},Ns=function(e){return(typeof e>"u"?"undefined":vo(e))==="object"&&e!==null},fa=function(e){return Ns(e)||Fn(e)},F=s(2,function(e,r){return fa(e)&&r in e}),js=s(2,function(e,r){return F(e,"_tag")&&e._tag===r}),ft=function(e){return e==null},sA=function(e){return e!=null},lA=function(e){return e instanceof Uint8Array},vA=function(e){return e instanceof Date},fy=function(e){return F(e,Symbol.iterator)},hA=function(e){return Ns(e)&&!Array.isArray(e)},cy=function(e){return F(e,"then")&&Fn(e.then)},ca=function(e){return"BUG: ".concat(e," - please report an issue at https://github.com/Effect-TS/effect/issues")};function sy(e,r){if(r.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ly(e,r){return r.get?r.get.call(e):r.value}function vy(e,r,t){if(r.set)r.set.call(e,t);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=t}}function ho(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function xs(e,r,t){if(!r.has(e))throw new TypeError("attempted to "+t+" private field on non-instance");return r.get(e)}function hy(e,r){var t=xs(e,r,"get");return ly(e,t)}function dy(e,r,t){sy(e,r),r.set(e,t)}function yy(e,r,t){var n=xs(e,r,"set");return vy(e,n,t),t}function _y(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yo(e,r,t){return r&&_y(e.prototype,r),e}function Tu(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function py(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var my=Symbol.iterator,Ds=function(){function e(r){ho(this,e),Tu(this,"self",void 0),Tu(this,"called",!1),this.self=r}return yo(e,[{key:"next",value:function(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}},{key:"return",value:function(t){return{value:t,done:!0}}},{key:"throw",value:function(t){throw t}},{key:my,value:function(){return new e(this.self)}}]),e}(),by=335903614,gy=4150755663,Sy=1481765933,Oy=1284865837,wy=9007199254740992,$y=134217728,ky=function(){function e(r,t,n,u){return ho(this,e),Tu(this,"_state",void 0),ft(t)&&ft(r)?(t=Math.random()*4294967295>>>0,r=0):ft(t)&&(t=r,r=0),ft(u)&&ft(n)?(u=this._state?this._state[3]:gy,n=this._state?this._state[2]:by):ft(u)&&(u=n,n=0),this._state=new Int32Array([0,0,n>>>0,((u||0)|1)>>>0]),this._next(),Zf(this._state,this._state[0],this._state[1],r>>>0,t>>>0),this._next(),this}return yo(e,[{key:"getState",value:function(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}},{key:"setState",value:function(t){this._state[0]=t[0],this._state[1]=t[1],this._state[2]=t[2],this._state[3]=t[3]|1}},{key:"integer",value:function(t){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%t}},{key:"number",value:function(){var t=(this._next()&67108863)*1,n=(this._next()&134217727)*1;return(t*$y+n)/wy}},{key:"_next",value:function(){var t=this._state[0]>>>0,n=this._state[1]>>>0;Iy(this._state,t,n,Sy,Oy),Zf(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);var u=t>>>18,a=(n>>>18|t<<14)>>>0;u=(u^t)>>>0,a=(a^n)>>>0;var i=(a>>>27|u<<5)>>>0,o=t>>>27,f=(-o>>>0&31)>>>0;return(i>>>o|i<<f)>>>0}}]),e}();function Iy(e,r,t,n,u){var a=(t>>>16)*(u&65535)>>>0,i=(t&65535)*(u>>>16)>>>0,o=(t&65535)*(u&65535)>>>0,f=(t>>>16)*(u>>>16)+((i>>>16)+(a>>>16))>>>0;i=i<<16>>>0,o=o+i>>>0,o>>>0<i>>>0&&(f=f+1>>>0),a=a<<16>>>0,o=o+a>>>0,o>>>0<a>>>0&&(f=f+1>>>0),f=f+Math.imul(t,n)>>>0,f=f+Math.imul(r,u)>>>0,e[0]=f,e[1]=o}function Zf(e,r,t,n,u){var a=r+n>>>0,i=t+u>>>0;i>>>0<t>>>0&&(a=a+1|0),e[0]=a,e[1]=i}var hi=Symbol.for("effect/Utils/YieldWrap"),Ka=new WeakMap,Ey=hi,Cn=function(){function e(r){ho(this,e),dy(this,Ka,{writable:!0,value:void 0}),yy(this,Ka,r)}return yo(e,[{key:Ey,value:function(){return hy(this,Ka)}}]),e}();function Py(e){if((typeof e>"u"?"undefined":py(e))==="object"&&e!==null&&hi in e)return e[hi]();throw new Error(ca("yieldWrapGet"))}var Te=j("effect/Utils/isStructuralRegion",function(){return{enabled:!1,tester:void 0}}),Ty=function(e){var r=Tu({},e,function(t){return t()});return function(n){return r[e](n)}},de=Ty("effect_internal_function");function ec(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var za=j(Symbol.for("effect/Hash/randomHashCache"),function(){return new WeakMap}),A=Symbol.for("effect/Hash"),g=function(e){if(Te.enabled===!0)return 0;switch(typeof e>"u"?"undefined":ec(e)){case"number":return po(e);case"bigint":return Q(e.toString(10));case"boolean":return Q(String(e));case"symbol":return Q(String(e));case"string":return Q(e);case"undefined":return Q("undefined");case"function":case"object":return e===null?Q("null"):e instanceof Date?g(e.toISOString()):Ay(e)?e[A]():_o(e);default:throw new Error("BUG: unhandled typeof ".concat(typeof e>"u"?"undefined":ec(e)," - please report an issue at https://github.com/Effect-TS/effect/issues"))}},_o=function(e){return za.has(e)||za.set(e,po(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),za.get(e)},N=function(e){return function(r){return r*53^e}},sa=function(e){return e&3221225471|e>>>1&1073741824},Ay=function(e){return F(e,A)},po=function(e){if(e!==e||e===1/0)return 0;var r=e|0;for(r!==e&&(r^=e*4294967295);e>4294967295;)r^=e/=4294967295;return sa(r)},Q=function(e){for(var r=5381,t=e.length;t;)r=r*33^e.charCodeAt(--t);return sa(r)},Ry=function(e,r){for(var t=12289,n=0;n<r.length;n++)t^=d(Q(r[n]),N(g(e[r[n]])));return sa(t)},Ls=function(e){return Ry(e,Object.keys(e))},Bt=function(e){for(var r=6151,t=0;t<e.length;t++)r=d(r,N(g(e[t])));return sa(r)},U=function(){if(arguments.length===1){var r=arguments[0];return function(u){return Object.defineProperty(r,A,{value:function(){return u},enumerable:!1}),u}}var t=arguments[0],n=arguments[1];return Object.defineProperty(t,A,{value:function(){return n},enumerable:!1}),n};function rc(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var T=Symbol.for("effect/Equal");function P(){var e=arguments;return arguments.length===1?function(r){return Au(r,e[0])}:Au(arguments[0],arguments[1])}function Au(e,r){if(e===r)return!0;var t=typeof e>"u"?"undefined":rc(e);if(t!==(typeof r>"u"?"undefined":rc(r)))return!1;if(t==="object"||t==="function"){if(e!==null&&r!==null){if(Ru(e)&&Ru(r))return g(e)===g(r)&&e[T](r)?!0:Te.enabled&&Te.tester?Te.tester(e,r):!1;if(e instanceof Date&&r instanceof Date)return e.toISOString()===r.toISOString()}if(Te.enabled){if(Array.isArray(e)&&Array.isArray(r))return e.length===r.length&&e.every(function(v,h){return Au(v,r[h])});if(Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){var n=Object.keys(e),u=Object.keys(r);if(n.length===u.length){var a=!0,i=!1,o=void 0;try{for(var f=n[Symbol.iterator](),c;!(a=(c=f.next()).done);a=!0){var l=c.value;if(!(l in r&&Au(e[l],r[l])))return Te.tester?Te.tester(e,r):!1}}catch(v){i=!0,o=v}finally{try{!a&&f.return!=null&&f.return()}finally{if(i)throw o}}return!0}}return Te.tester?Te.tester(e,r):!1}}return Te.enabled&&Te.tester?Te.tester(e,r):!1}var Ru=function(e){return F(e,T)},mo=function(){return P};function tc(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function bo(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var B=Symbol.for("nodejs.util.inspect.custom"),z=function(e){try{if(F(e,"toJSON")&&Fn(e.toJSON)&&e.toJSON.length===0)return e.toJSON();if(Array.isArray(e))return e.map(z)}catch{return{}}return Fy(e)},te=function(e){return JSON.stringify(e,null,2)},iu;iu={toJSON:function(){return z(this)}},tc(iu,B,function(){return this.toJSON()}),tc(iu,"toString",function(){return te(this.toJSON())});var wt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;if(typeof e=="string")return e;try{return(typeof e>"u"?"undefined":bo(e))==="object"?qs(e,r):String(e)}catch{return String(e)}},qs=function(e,r){var t=[],n=JSON.stringify(e,function(u,a){return(typeof a>"u"?"undefined":bo(a))==="object"&&a!==null?t.includes(a)?void 0:t.push(a)&&(Br.fiberRefs!==void 0&&Us(a)?a[go](Br.fiberRefs):a):a},r);return t=void 0,n},go=Symbol.for("effect/Inspectable/Redactable"),Us=function(e){return(typeof e>"u"?"undefined":bo(e))==="object"&&e!==null&&go in e},Br=j("effect/Inspectable/redactableState",function(){return{fiberRefs:void 0}}),My=function(e,r){var t=Br.fiberRefs;Br.fiberRefs=e;try{return r()}finally{Br.fiberRefs=t}},Fy=function(e){return Us(e)&&Br.fiberRefs!==void 0?e[go](Br.fiberRefs):e},I=function(e,r){switch(r.length){case 0:return e;case 1:return r[0](e);case 2:return r[1](r[0](e));case 3:return r[2](r[1](r[0](e)));case 4:return r[3](r[2](r[1](r[0](e))));case 5:return r[4](r[3](r[2](r[1](r[0](e)))));case 6:return r[5](r[4](r[3](r[2](r[1](r[0](e))))));case 7:return r[6](r[5](r[4](r[3](r[2](r[1](r[0](e)))))));case 8:return r[7](r[6](r[5](r[4](r[3](r[2](r[1](r[0](e))))))));case 9:return r[8](r[7](r[6](r[5](r[4](r[3](r[2](r[1](r[0](e)))))))));default:{for(var t=e,n=0,u=r.length;n<u;n++)t=r[n](t);return t}}},Sn="Async",la="Commit",$e="Failure",di="OnFailure",va="OnSuccess",ha="OnSuccessAndFailure",ke="Success",Bs="Sync",Cy="Tag",Nn="UpdateRuntimeFlags",da="While",Mu="Iterator",Hs="WithRuntime",Fu="Yield",So="RevertFlags";function De(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Js(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){De(e,u,t[u])})}return e}function Ny(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function jy(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ny(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}var xy=Symbol.for("effect/Effect"),Dy=Symbol.for("effect/Stream"),Ly=Symbol.for("effect/Sink"),qy=Symbol.for("effect/Channel"),$t={_R:function(e){return e},_E:function(e){return e},_A:function(e){return e},_V:oa()},Uy={_A:function(e){return e},_In:function(e){return e},_L:function(e){return e},_E:function(e){return e},_R:function(e){return e}},By={_Env:function(e){return e},_InErr:function(e){return e},_InElem:function(e){return e},_InDone:function(e){return e},_OutErr:function(e){return e},_OutElem:function(e){return e},_OutDone:function(e){return e}},Ge,jn=(Ge={},De(Ge,xy,$t),De(Ge,Dy,$t),De(Ge,Ly,Uy),De(Ge,qy,By),De(Ge,T,function(e){return this===e}),De(Ge,A,function(){return U(this,_o(this))}),De(Ge,Symbol.iterator,function(){return new Ds(new Cn(this))}),De(Ge,"pipe",function(){return I(this,arguments)}),Ge),ou,ya=(ou={},De(ou,A,function(){return U(this,Ls(this))}),De(ou,T,function(e){var r=Object.keys(this),t=Object.keys(e);if(r.length!==t.length)return!1;var n=!0,u=!1,a=void 0;try{for(var i=r[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var f=o.value;if(!(f in e&&P(this[f],e[f])))return!1}}catch(c){u=!0,a=c}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}return!0}),ou),xn=jy(Js({},jn),{_op:la}),Hy=Js({},xn,ya),Jy=function(){function e(){}return e.prototype=xn,e}();function rr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Vy(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){rr(e,u,t[u])})}return e}function Ky(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function zy(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ky(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}var Vs=Symbol.for("effect/Option"),rn,Ks=zy(Vy({},jn),(rn={},rr(rn,Vs,{_A:function(e){return e}}),rr(rn,B,function(){return this.toJSON()}),rr(rn,"toString",function(){return te(this.toJSON())}),rn)),tn,Gy=Object.assign(Object.create(Ks),(tn={_tag:"Some",_op:"Some"},rr(tn,T,function(e){return Oo(e)&&zs(e)&&P(this.value,e.value)}),rr(tn,A,function(){return U(this,N(g(this._tag))(g(this.value)))}),rr(tn,"toJSON",function(){return{_id:"Option",_tag:this._tag,value:z(this.value)}}),tn)),Wy=g("None"),nn,Yy=Object.assign(Object.create(Ks),(nn={_tag:"None",_op:"None"},rr(nn,T,function(e){return Oo(e)&&wo(e)}),rr(nn,A,function(){return Wy}),rr(nn,"toJSON",function(){return{_id:"Option",_tag:this._tag}}),nn)),Oo=function(e){return F(e,Vs)},wo=function(e){return e._tag==="None"},zs=function(e){return e._tag==="Some"},kt=Object.create(Yy),dr=function(e){var r=Object.create(Gy);return r.value=e,r};function tr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Qy(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){tr(e,u,t[u])})}return e}function Xy(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function Zy(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xy(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}var Gs=Symbol.for("effect/Either"),un,Ws=Zy(Qy({},jn),(un={},tr(un,Gs,{_R:function(e){return e}}),tr(un,B,function(){return this.toJSON()}),tr(un,"toString",function(){return te(this.toJSON())}),un)),an,e_=Object.assign(Object.create(Ws),(an={_tag:"Right",_op:"Right"},tr(an,T,function(e){return $o(e)&&Ys(e)&&P(this.right,e.right)}),tr(an,A,function(){return N(g(this._tag))(g(this.right))}),tr(an,"toJSON",function(){return{_id:"Either",_tag:this._tag,right:z(this.right)}}),an)),on,r_=Object.assign(Object.create(Ws),(on={_tag:"Left",_op:"Left"},tr(on,T,function(e){return $o(e)&&ko(e)&&P(this.left,e.left)}),tr(on,A,function(){return N(g(this._tag))(g(this.left))}),tr(on,"toJSON",function(){return{_id:"Either",_tag:this._tag,left:z(this.left)}}),on)),$o=function(e){return F(e,Gs)},ko=function(e){return e._tag==="Left"},Ys=function(e){return e._tag==="Right"},Qs=function(e){var r=Object.create(r_);return r.left=e,r},Xs=function(e){var r=Object.create(e_);return r.right=e,r},t_=function(e){return ko(e)?kt:dr(e.right)},n_=s(2,function(e,r){return wo(e)?Qs(r()):Xs(e.value)}),Oe=Xs,nr=Qs,dA=n_,yA=function(e){if(Fn(e))try{return Oe(e())}catch(r){return nr(r)}else try{return Oe(e.try())}catch(r){return nr(e.catch(r))}},_A=$o,Tr=ko,Dr=Ys,pA=function(e){var r=e.left,t=e.right;return Ut(function(n,u){return Tr(n)?Tr(u)&&r(n.left,u.left):Dr(u)&&t(n.right,u.right)})},mA=s(2,function(e,r){return Tr(e)?nr(r(e.left)):Oe(e.right)}),bA=s(2,function(e,r){return Dr(e)?Oe(r(e.right)):nr(e.left)}),u_=s(2,function(e,r){var t=r.onLeft,n=r.onRight;return Tr(e)?t(e.left):n(e.right)}),a_=u_({onLeft:re,onRight:re}),gA=s(2,function(e,r){if(Dr(e))return e.right;throw r(e.left)}),Zs=function(e){return e.length>0},Dn=function(e){return function(r,t){return r===t?0:e(r,t)}},i_=Dn(function(e,r){return e<r?-1:1}),SA=Dn(function(e,r){return e<r?-1:1}),el=s(2,function(e,r){return Dn(function(t,n){return e(r(t),r(n))})}),OA=function(e){var r=Object.keys(e);return Dn(function(t,n){var u=!0,a=!1,i=void 0;try{for(var o=r[Symbol.iterator](),f;!(u=(f=o.next()).done);u=!0){var c=f.value,l=e[c](t[c],n[c]);if(l!==0)return l}}catch(v){a=!0,i=v}finally{try{!u&&o.return!=null&&o.return()}finally{if(a)throw i}}return 0})},o_=function(e){return s(2,function(r,t){return e(r,t)===-1})},rl=function(e){return s(2,function(r,t){return e(r,t)===1})},wA=function(e){return s(2,function(r,t){return e(r,t)!==1})},$A=function(e){return s(2,function(r,t){return e(r,t)!==-1})},f_=function(e){return s(2,function(r,t){return r===t||e(r,t)<1?r:t})},c_=function(e){return s(2,function(r,t){return r===t||e(r,t)>-1?r:t})},tl=function(e){return s(2,function(r,t){return f_(e)(t.maximum,c_(e)(t.minimum,r))})},s_=function(e){return s(2,function(r,t){return!o_(e)(r,t.minimum)&&!rl(e)(r,t.maximum)})};function yi(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function l_(e){if(Array.isArray(e))return yi(e)}function v_(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function h_(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d_(e){return l_(e)||v_(e)||y_(e)||h_()}function y_(e,r){if(e){if(typeof e=="string")return yi(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yi(e,r)}}var O=function(){return kt},E=dr,kA=Oo,V=wo,W=zs,rt=s(2,function(e,r){var t=r.onNone,n=r.onSome;return V(e)?t():n(e.value)}),IA=t_,Je=s(2,function(e,r){return V(e)?r():e.value}),EA=s(2,function(e,r){return V(e)?r():e}),__=s(2,function(e,r){return V(e)?E(r()):e}),Io=function(e){return e==null?O():E(e)},PA=Je(Zd),jr=Je(Ms),TA=function(e){return function(){for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];try{return E(e.apply(void 0,d_(t)))}catch{return O()}}},p_=s(2,function(e,r){if(W(e))return e.value;throw r()}),nl=p_(function(){return new Error("getOrThrow called on a None")}),bu=s(2,function(e,r){return V(e)?O():E(r(e.value))}),m_=s(2,function(e,r){return V(e)?O():r(e.value)}),b_=s(2,function(e,r){return V(e)?O():r(e.value)}),AA=s(2,function(e,r){return b_(e,function(t){return r(t)?dr(t):kt})}),RA=function(e){return Ut(function(r,t){return V(r)?V(t):V(t)?!1:e(r.value,t.value)})},g_=function(e){return s(2,function(r,t){return V(r)?!1:e(r.value,t)})},S_=mo(),O_=g_(S_),w_=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r};function $_(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var k_=s(2,function(e,r){var t=0,n=!0,u=!1,a=void 0;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var f=o.value,c=r(f,t);if(iy(c)){if(c)return E(f)}else if(W(c))return c;t++}}catch(l){u=!0,a=l}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}return O()});$_({},Symbol.iterator,function(){return I_});var I_={next:function(){return{done:!0,value:void 0}}};function _i(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function E_(e){if(Array.isArray(e))return e}function P_(e){if(Array.isArray(e))return _i(e)}function T_(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function A_(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function R_(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M_(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F_(e,r){return E_(e)||A_(e,r)||al(e,r)||R_()}function ul(e){return P_(e)||T_(e)||al(e)||M_()}function al(e,r){if(e){if(typeof e=="string")return _i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _i(e,r)}}var Eo=function(e){return new Array(e)},C_=function(e,r){for(var t=Math.max(1,Math.floor(e)),n=new Array(t),u=0;u<t;u++)n[u]=r(u);return n},G=function(e){return Array.isArray(e)?e:Array.from(e)},N_=function(e){return Array.isArray(e)?e:[e]},MA=s(2,function(e,r){var t=r.onEmpty,n=r.onNonEmpty;return ye(e)?n(e):t()}),FA=s(2,function(e,r){var t=r.onEmpty,n=r.onNonEmpty;return ye(e)?n(pe(e),Kr(e)):t()}),Cu=s(2,function(e,r){return[r].concat(ul(e))}),il=s(2,function(e,r){return ul(e).concat([r])}),ol=s(2,function(e,r){return G(e).concat(G(r))}),CA=Array.isArray,j_=function(e){return e.length===0},x_=j_,D_=Zs,ye=Zs,fl=function(e,r){return e<0||e>=r.length},L_=function(e,r){return Math.floor(Math.min(Math.max(0,e),r.length))},q_=s(2,function(e,r){var t=Math.floor(r);return fl(t,e)?O():E(e[t])}),cl=s(2,function(e,r){var t=Math.floor(r);if(fl(t,e))throw new Error("Index ".concat(t," out of bounds"));return e[t]}),_n=q_(0),pe=cl(0),U_=function(e){return ye(e)?E(Po(e)):O()},Po=function(e){return e[e.length-1]},Kr=function(e){return e.slice(1)},B_=function(e){return e.slice(0,-1)},H_=function(e,r){var t=0,n=!0,u=!1,a=void 0;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var f=o.value;if(!r(f,t))break;t++}}catch(c){u=!0,a=c}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}return t},J_=s(2,function(e,r){return G_(e,H_(e,r))}),V_=s(2,function(e,r){var t=G(e);return t.slice(L_(r,t),t.length)}),NA=k_,nc=function(e){return Array.from(e).reverse()},Nu=s(2,function(e,r){var t=Array.from(e);return t.sort(r),t}),uc=s(2,function(e,r){return K_(e,r,w_)}),K_=s(3,function(e,r,t){var n=G(e),u=G(r);if(ye(n)&&ye(u)){for(var a=[t(pe(n),pe(u))],i=Math.min(n.length,u.length),o=1;o<i;o++)a[o]=t(n[o],u[o]);return a}return[]}),jA=s(2,function(e,r){return il(B_(e),r(Po(e)))}),z_=function(e){return s(2,function(r,t){var n=!0,u=!1,a=void 0;try{for(var i=r[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var f=o.value;if(e(t,f))return!0}}catch(c){u=!0,a=c}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}return!1})},sl=mo(),G_=s(2,function(e,r){var t=Array.from(e),n=Math.floor(r);return ye(t)?n>=1?W_(t,n):[[],t]:[t,[]]}),W_=s(2,function(e,r){var t=Math.max(1,Math.floor(r));return t>=e.length?[Y_(e),[]]:[Cu(e.slice(1,t),pe(e)),e.slice(t)]}),Y_=function(e){return e.slice()},Q_=s(3,function(e,r,t){var n=G(e),u=G(r);if(ye(n)){if(ye(u)){var a=vl(t);return a(ol(n,u))}return n}return u}),gu=s(2,function(e,r){return Q_(e,r,sl)}),X_=function(e){var r=z_(e);return s(2,function(t,n){return G(t).filter(function(u){return r(n,u)})})},xA=X_(sl),It=function(){return[]},qe=function(e){return[e]},yt=s(2,function(e,r){return e.map(r)}),Z_=s(2,function(e,r){if(x_(e))return[];for(var t=[],n=0;n<e.length;n++)for(var u=r(e[n],n),a=0;a<u.length;a++)t.push(u[a]);return t}),ep=Z_(re),DA=s(2,function(e,r){for(var t=G(e),n=[],u=0;u<t.length;u++){var a=r(t[u],u);W(a)&&n.push(a.value)}return n}),ll=s(3,function(e,r,t){return G(e).reduce(function(n,u,a){return t(n,u,a)},r)}),ac=function(e,r){for(var t=[],n=e,u;W(u=r(n));){var a=F_(u.value,2),i=a[0],o=a[1];t.push(i),n=o}return t},To=ny,vl=s(2,function(e,r){var t=G(e);if(ye(t)){var n=[pe(t)],u=Kr(t),a=!0,i=!1,o=void 0;try{for(var f=function(){var v=l.value;n.every(function(h){return!r(v,h)})&&n.push(v)},c=u[Symbol.iterator](),l;!(a=(l=c.next()).done);a=!0)f()}catch(v){i=!0,o=v}finally{try{!a&&c.return!=null&&c.return()}finally{if(i)throw o}}return n}return[]}),rp=function(e){return vl(e,mo())},Ht=s(2,function(e,r){return G(e).join(r)}),Et=i_,LA=tl(Et),qA=s(2,function(e,r){var t=(e.toString().split(".")[1]||"").length,n=(r.toString().split(".")[1]||"").length,u=t>n?t:n,a=parseInt(e.toFixed(u).replace(".","")),i=parseInt(r.toFixed(u).replace(".",""));return a%i/Math.pow(10,u)}),UA=function(e){if(e==="NaN")return dr(NaN);if(e==="Infinity")return dr(1/0);if(e==="-Infinity")return dr(-1/0);if(e.trim()==="")return kt;var r=Number(e);return Number.isNaN(r)?kt:dr(r)},tp=function(e){return e.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&")},ic={},oc;function np(){if(oc)return ic;oc=1;var e=lo(),r=Bd().findLastIndex,t=Hd();return e({target:"Array",proto:!0},{findLastIndex:function(u){return r(this,u,arguments.length>1?arguments[1]:void 0)}}),t("findLastIndex"),ic}np();function br(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var hl=Symbol.for("effect/Chunk");function up(e,r,t,n,u){for(var a=r;a<Math.min(e.length,r+u);a++)t[n+a-r]=e[a];return t}var dl=[],ap=function(e){return Ut(function(r,t){return r.length===t.length&&Hr(r).every(function(n,u){return e(n,_t(t,u))})})},ip=ap(P),We,op=(We={},br(We,hl,{_A:function(e){return e}}),br(We,"toString",function(){return te(this.toJSON())}),br(We,"toJSON",function(){return{_id:"Chunk",values:Hr(this).map(z)}}),br(We,B,function(){return this.toJSON()}),br(We,T,function(e){return yl(e)&&ip(this,e)}),br(We,A,function(){return U(this,Bt(Hr(this)))}),br(We,Symbol.iterator,function(){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return dl[Symbol.iterator]();default:return Hr(this)[Symbol.iterator]()}}),br(We,"pipe",function(){return I(this,arguments)}),We),ee=function(e){var r=Object.create(op);switch(r.backing=e,e._tag){case"IEmpty":{r.length=0,r.depth=0,r.left=r,r.right=r;break}case"IConcat":{r.length=e.left.length+e.right.length,r.depth=1+Math.max(e.left.depth,e.right.depth),r.left=e.left,r.right=e.right;break}case"IArray":{r.length=e.array.length,r.depth=0,r.left=Xe,r.right=Xe;break}case"ISingleton":{r.length=1,r.depth=0,r.left=Xe,r.right=Xe;break}case"ISlice":{r.length=e.length,r.depth=e.chunk.depth+1,r.left=Xe,r.right=Xe;break}}return r},yl=function(e){return F(e,hl)},Xe=ee({_tag:"IEmpty"}),Ar=function(){return Xe},Ga=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.length===1?Ie(r[0]):sp(r)},Ie=function(e){return ee({_tag:"ISingleton",a:e})},_l=function(e){return yl(e)?e:ee({_tag:"IArray",array:G(e)})},pi=function(e,r,t){switch(e.backing._tag){case"IArray":{up(e.backing.array,0,r,t,e.length);break}case"IConcat":{pi(e.left,r,t),pi(e.right,r,t+e.left.length);break}case"ISingleton":{r[t]=e.backing.a;break}case"ISlice":{for(var n=0,u=t;n<e.length;)r[u]=_t(e,n),n+=1,u+=1;break}}},fp=function(e){switch(e.backing._tag){case"IEmpty":return dl;case"IArray":return e.backing.array;default:{var r=new Array(e.length);return pi(e,r,0),e.backing={_tag:"IArray",array:r},e.left=Xe,e.right=Xe,e.depth=0,r}}},Hr=fp,cp=function(e){switch(e.backing._tag){case"IEmpty":case"ISingleton":return e;case"IArray":return ee({_tag:"IArray",array:nc(e.backing.array)});case"IConcat":return ee({_tag:"IConcat",left:Pt(e.backing.right),right:Pt(e.backing.left)});case"ISlice":return Ao(nc(Hr(e)))}},Pt=cp,Ao=function(e){return ee({_tag:"IArray",array:e})},sp=function(e){return Ao(e)},_t=s(2,function(e,r){switch(e.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(r!==0)throw new Error("Index out of bounds");return e.backing.a}case"IArray":{if(r>=e.length||r<0)throw new Error("Index out of bounds");return e.backing.array[r]}case"IConcat":return r<e.left.length?_t(e.left,r):_t(e.right,r-e.left.length);case"ISlice":return _t(e.backing.chunk,r+e.backing.offset)}}),lp=s(2,function(e,r){return Be(e,Ie(r))}),Ve=s(2,function(e,r){return Be(Ie(r),e)}),mi=s(2,function(e,r){if(r<=0)return e;if(r>=e.length)return Xe;switch(e.backing._tag){case"ISlice":return ee({_tag:"ISlice",chunk:e.backing.chunk,offset:e.backing.offset+r,length:e.backing.length-r});case"IConcat":return r>e.left.length?mi(e.right,r-e.left.length):ee({_tag:"IConcat",left:mi(e.left,r),right:e.right});default:return ee({_tag:"ISlice",chunk:e,offset:r,length:e.length-r})}}),Be=s(2,function(e,r){if(e.backing._tag==="IEmpty")return r;if(r.backing._tag==="IEmpty")return e;var t=r.depth-e.depth;if(Math.abs(t)<=1)return ee({_tag:"IConcat",left:e,right:r});if(t<-1)if(e.left.depth>=e.right.depth){var n=Be(e.right,r);return ee({_tag:"IConcat",left:e.left,right:n})}else{var u=Be(e.right.right,r);if(u.depth===e.depth-3){var a=ee({_tag:"IConcat",left:e.right.left,right:u});return ee({_tag:"IConcat",left:e.left,right:a})}else{var i=ee({_tag:"IConcat",left:e.left,right:e.right.left});return ee({_tag:"IConcat",left:i,right:u})}}else if(r.right.depth>=r.left.depth){var o=Be(e,r.left);return ee({_tag:"IConcat",left:o,right:r.right})}else{var f=Be(e,r.left.left);if(f.depth===r.depth-3){var c=ee({_tag:"IConcat",left:f,right:r.left.right});return ee({_tag:"IConcat",left:c,right:r.right})}else{var l=ee({_tag:"IConcat",left:r.left.right,right:r.right});return ee({_tag:"IConcat",left:f,right:l})}}}),vp=function(e){return e.length===0},Tt=function(e){return e.length>0},pl=function(e){return _t(e,0)},At=pl,Lr=function(e){return mi(e,1)},zr=5,Ro=Math.pow(2,zr),hp=Ro-1,dp=Ro/2,yp=Ro/4;function _p(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Rt(e,r){return r>>>e&hp}function ht(e){return 1<<e}function ml(e,r){return _p(e&r-1)}var pp=function(e,r){return{value:e,previous:r}};function pt(e,r,t,n){var u=n;if(!e){var a=n.length;u=new Array(a);for(var i=0;i<a;++i)u[i]=n[i]}return u[r]=t,u}function bl(e,r,t){var n=t.length-1,u=0,a=0,i=t;if(e)u=a=r;else for(i=new Array(n);u<r;)i[a++]=t[u++];for(++u;u<=n;)i[a++]=t[u++];return e&&(i.length=n),i}function mp(e,r,t,n){var u=n.length;if(e){for(var a=u;a>=r;)n[a--]=n[a];return n[r]=t,n}for(var i=0,o=0,f=new Array(u+1);i<r;)f[o++]=n[i++];for(f[r]=t;i<u;)f[++o]=n[i++];return f}function Ln(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function bp(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qn(e,r,t){return r&&bp(e.prototype,r),e}function fe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Mt=function(){function e(){Ln(this,e),fe(this,"_tag","EmptyNode")}return qn(e,[{key:"modify",value:function(t,n,u,a,i,o){var f=u(O());return V(f)?new e:(++o.value,new Su(t,a,i,f))}}]),e}();function He(e){return js(e,"EmptyNode")}function gp(e){return He(e)||e._tag==="LeafNode"||e._tag==="CollisionNode"}function _a(e,r){return He(e)?!1:r===e.edit}var Su=function(){function e(r,t,n,u){Ln(this,e),fe(this,"edit",void 0),fe(this,"hash",void 0),fe(this,"key",void 0),fe(this,"value",void 0),fe(this,"_tag","LeafNode"),this.edit=r,this.hash=t,this.key=n,this.value=u}return qn(e,[{key:"modify",value:function(t,n,u,a,i,o){if(P(i,this.key)){var f=u(this.value);return f===this.value?this:V(f)?(--o.value,new Mt):_a(this,t)?(this.value=f,this):new e(t,a,i,f)}var c=u(O());return V(c)?this:(++o.value,gl(t,n,this.hash,this,a,new e(t,a,i,c)))}}]),e}(),Sp=function(){function e(r,t,n){Ln(this,e),fe(this,"edit",void 0),fe(this,"hash",void 0),fe(this,"children",void 0),fe(this,"_tag","CollisionNode"),this.edit=r,this.hash=t,this.children=n}return qn(e,[{key:"modify",value:function(t,n,u,a,i,o){if(a===this.hash){var f=_a(this,t),c=this.updateCollisionList(f,t,this.hash,this.children,u,i,o);return c===this.children?this:c.length>1?new e(t,this.hash,c):c[0]}var l=u(O());return V(l)?this:(++o.value,gl(t,n,this.hash,this,a,new Su(t,a,i,l)))}},{key:"updateCollisionList",value:function(t,n,u,a,i,o,f){for(var c=a.length,l=0;l<c;++l){var v=a[l];if("key"in v&&P(o,v.key)){var h=v.value,y=i(h);return y===h?a:V(y)?(--f.value,bl(t,l,a)):pt(t,l,new Su(n,u,o,y),a)}}var _=i(O());return V(_)?a:(++f.value,pt(t,c,new Su(n,u,o,_),a))}}]),e}(),bi=function(){function e(r,t,n){Ln(this,e),fe(this,"edit",void 0),fe(this,"mask",void 0),fe(this,"children",void 0),fe(this,"_tag","IndexedNode"),this.edit=r,this.mask=t,this.children=n}return qn(e,[{key:"modify",value:function(t,n,u,a,i,o){var f=this.mask,c=this.children,l=Rt(n,a),v=ht(l),h=ml(f,v),y=f&v,_=_a(this,t);if(!y){var p=new Mt().modify(t,n+zr,u,a,i,o);return p?c.length>=dp?$p(t,l,p,f,c):new e(t,f|v,mp(_,h,p,c)):this}var S=c[h],m=S.modify(t,n+zr,u,a,i,o);if(S===m)return this;var b=f,R;if(He(m)){if(b&=~v,!b)return new Mt;if(c.length<=2&&gp(c[h^1]))return c[h^1];R=bl(_,h,c)}else R=pt(_,h,m,c);return _?(this.mask=b,this.children=R,this):new e(t,b,R)}}]),e}(),Op=function(){function e(r,t,n){Ln(this,e),fe(this,"edit",void 0),fe(this,"size",void 0),fe(this,"children",void 0),fe(this,"_tag","ArrayNode"),this.edit=r,this.size=t,this.children=n}return qn(e,[{key:"modify",value:function(t,n,u,a,i,o){var f=this.size,c=this.children,l=Rt(n,a),v=c[l],h=(v||new Mt).modify(t,n+zr,u,a,i,o);if(v===h)return this;var y=_a(this,t),_;if(He(v)&&!He(h))++f,_=pt(y,l,h,c);else if(!He(v)&&He(h)){if(--f,f<=yp)return wp(t,f,l,c);_=pt(y,l,new Mt,c)}else _=pt(y,l,h,c);return y?(this.size=f,this.children=_,this):new e(t,f,_)}}]),e}();function wp(e,r,t,n){for(var u=new Array(r-1),a=0,i=0,o=0,f=n.length;o<f;++o)if(o!==t){var c=n[o];c&&!He(c)&&(u[a++]=c,i|=1<<o)}return new bi(e,i,u)}function $p(e,r,t,n,u){for(var a=[],i=n,o=0,f=0;i;++f)i&1&&(a[f]=u[o++]),i>>>=1;return a[r]=t,new Op(e,o+1,a)}function kp(e,r,t,n,u,a){if(t===u)return new Sp(e,t,[a,n]);var i=Rt(r,t),o=Rt(r,u);if(i===o)return function(c){return new bi(e,ht(i)|ht(o),[c])};var f=i<o?[n,a]:[a,n];return new bi(e,ht(i)|ht(o),f)}function gl(e,r,t,n,u,a){for(var i=void 0,o=r;;){var f=kp(e,o,t,n,u,a);if(typeof f=="function")i=pp(f,i),o=o+zr;else{for(var c=f;i!=null;)c=i.value(c),i=i.previous;return c}}}function Ip(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ep(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pp(e,r,t){return Ep(e.prototype,r),e}function Le(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Sl="effect/HashMap",gi=Symbol.for(Sl),Ye,Tp=(Ye={},Le(Ye,gi,gi),Le(Ye,Symbol.iterator,function(){return new Ol(this,function(e,r){return[e,r]})}),Le(Ye,A,function(){var e=g(Sl),r=!0,t=!1,n=void 0;try{for(var u=this[Symbol.iterator](),a;!(r=(a=u.next()).done);r=!0){var i=a.value;e^=d(g(i[0]),N(g(i[1])))}}catch(o){t=!0,n=o}finally{try{!r&&u.return!=null&&u.return()}finally{if(t)throw n}}return U(this,e)}),Le(Ye,T,function(e){if(kl(e)){if(e._size!==this._size)return!1;var r=!0,t=!1,n=void 0;try{for(var u=this[Symbol.iterator](),a;!(r=(a=u.next()).done);r=!0){var i=a.value,o=d(e,Fo(i[0],g(i[0])));if(V(o))return!1;if(!P(i[1],o.value))return!1}}catch(f){t=!0,n=f}finally{try{!r&&u.return!=null&&u.return()}finally{if(t)throw n}}return!0}return!1}),Le(Ye,"toString",function(){return te(this.toJSON())}),Le(Ye,"toJSON",function(){return{_id:"HashMap",values:Array.from(this).map(z)}}),Le(Ye,B,function(){return this.toJSON()}),Le(Ye,"pipe",function(){return I(this,arguments)}),Ye),Mo=function(e,r,t,n){var u=Object.create(Tp);return u._editable=e,u._edit=r,u._root=t,u._size=n,u},Ap=Symbol.iterator,Ol=function(){function e(r,t){Ip(this,e),Le(this,"map",void 0),Le(this,"f",void 0),Le(this,"v",void 0),this.map=r,this.f=t,this.v=wl(this.map._root,this.f,void 0)}return Pp(e,[{key:"next",value:function(){if(V(this.v))return{done:!0,value:void 0};var t=this.v.value;return this.v=ju(t.cont),{done:!1,value:t.value}}},{key:Ap,value:function(){return new e(this.map,this.f)}}]),e}(),ju=function(e){return e?$l(e[0],e[1],e[2],e[3],e[4]):O()},wl=function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;switch(e._tag){case"LeafNode":return W(e.value)?E({value:r(e.key,e.value.value),cont:t}):ju(t);case"CollisionNode":case"ArrayNode":case"IndexedNode":{var n=e.children;return $l(n.length,n,0,r,t)}default:return ju(t)}},$l=function(e,r,t,n,u){for(;t<e;){var a=r[t++];if(a&&!He(a))return wl(a,n,[e,r,t,n,u])}return ju(u)},Rp=Mo(!1,0,new Mt,0),pa=function(){return Rp},Mp=function(e){var r=El(pa()),t=!0,n=!1,u=void 0;try{for(var a=e[Symbol.iterator](),i;!(t=(i=a.next()).done);t=!0){var o=i.value;On(r,o[0],o[1])}}catch(f){n=!0,u=f}finally{try{!t&&a.return!=null&&a.return()}finally{if(n)throw u}}return xp(r)},kl=function(e){return F(e,gi)},Fp=function(e){return e&&He(e._root)},Cp=s(2,function(e,r){return Fo(e,r,g(r))}),Fo=s(3,function(e,r,t){for(var n=e._root,u=0;;)switch(n._tag){case"LeafNode":return P(r,n.key)?n.value:O();case"CollisionNode":{if(t===n.hash)for(var a=n.children,i=0,o=a.length;i<o;++i){var f=a[i];if("key"in f&&P(r,f.key))return f.value}return O()}case"IndexedNode":{var c=Rt(u,t),l=ht(c);if(n.mask&l){n=n.children[ml(n.mask,l)],u+=zr;break}return O()}case"ArrayNode":{if(n=n.children[Rt(u,t)],n){u+=zr;break}return O()}default:return O()}}),Np=s(2,function(e,r){return W(Fo(e,r,g(r)))}),On=s(3,function(e,r,t){return Co(e,r,function(){return E(t)})}),jp=s(3,function(e,r,t){return e._editable?(e._root=r,e._size=t,e):r===e._root?e:Mo(e._editable,e._edit,r,t)}),Il=function(e){return new Ol(e,function(r){return r})},Si=function(e){return e._size},El=function(e){return Mo(!0,e._edit+1,e._root,e._size)},xp=function(e){return e._editable=!1,e},Co=s(3,function(e,r,t){return Dp(e,r,g(r),t)}),Dp=s(4,function(e,r,t,n){var u={value:e._size},a=e._root.modify(e._editable?e._edit:NaN,0,n,t,r,u);return d(e,jp(a,u.value))}),fc=s(2,function(e,r){return Co(e,r,O)}),Lp=s(2,function(e,r){return ma(e,pa(),function(t,n,u){return On(t,u,r(n,u))})}),qp=s(2,function(e,r){return ma(e,void 0,function(t,n,u){return r(n,u)})}),ma=s(3,function(e,r,t){var n=e._root;if(n._tag==="LeafNode")return W(n.value)?t(r,n.value.value,n.key):r;if(n._tag==="EmptyNode")return r;for(var u=[n.children],a;a=u.pop();)for(var i=0,o=a.length;i<o;){var f=a[i++];f&&!He(f)&&(f._tag==="LeafNode"?W(f.value)&&(r=t(r,f.value.value,f.key)):u.push(f.children))}return r});function gr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Pl="effect/HashSet",Oi=Symbol.for(Pl),Qe,Up=(Qe={},gr(Qe,Oi,Oi),gr(Qe,Symbol.iterator,function(){return Il(this._keyMap)}),gr(Qe,A,function(){return U(this,N(g(this._keyMap))(g(Pl)))}),gr(Qe,T,function(e){return Tl(e)?Si(this._keyMap)===Si(e._keyMap)&&P(this._keyMap,e._keyMap):!1}),gr(Qe,"toString",function(){return te(this.toJSON())}),gr(Qe,"toJSON",function(){return{_id:"HashSet",values:Array.from(this).map(z)}}),gr(Qe,B,function(){return this.toJSON()}),gr(Qe,"pipe",function(){return I(this,arguments)}),Qe),ba=function(e){var r=Object.create(Up);return r._keyMap=e,r},Tl=function(e){return F(e,Oi)},Bp=ba(pa()),ga=function(){return Bp},Hp=function(e){var r=No(ga()),t=!0,n=!1,u=void 0;try{for(var a=e[Symbol.iterator](),i;!(t=(i=a.next()).done);t=!0){var o=i.value;wn(r,o)}}catch(f){n=!0,u=f}finally{try{!t&&a.return!=null&&a.return()}finally{if(n)throw u}}return jo(r)},Jp=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=No(ga()),u=!0,a=!1,i=void 0;try{for(var o=r[Symbol.iterator](),f;!(u=(f=o.next()).done);u=!0){var c=f.value;wn(n,c)}}catch(l){a=!0,i=l}finally{try{!u&&o.return!=null&&o.return()}finally{if(a)throw i}}return jo(n)},Vp=s(2,function(e,r){return Np(e._keyMap,r)}),Kp=function(e){return Si(e._keyMap)},No=function(e){return ba(El(e._keyMap))},jo=function(e){return e._keyMap._editable=!1,e},Al=s(2,function(e,r){var t=No(e);return r(t),jo(t)}),wn=s(2,function(e,r){return e._keyMap._editable?(On(r,!0)(e._keyMap),e):ba(On(r,!0)(e._keyMap))}),Rl=s(2,function(e,r){return e._keyMap._editable?(fc(r)(e._keyMap),e):ba(fc(r)(e._keyMap))}),zp=s(2,function(e,r){return Al(e,function(t){var n=!0,u=!1,a=void 0;try{for(var i=r[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var f=o.value;Rl(t,f)}}catch(c){u=!0,a=c}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}})}),Gp=s(2,function(e,r){return Al(ga(),function(t){Wp(e,function(c){return wn(t,c)});var n=!0,u=!1,a=void 0;try{for(var i=r[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var f=o.value;wn(t,f)}}catch(c){u=!0,a=c}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}})}),Wp=s(2,function(e,r){return qp(e._keyMap,function(t,n){return r(n)})}),Yp=s(3,function(e,r,t){return ma(e._keyMap,r,function(n,u,a){return t(n,a)})}),BA=Tl,Gr=ga,Qp=Hp,xo=Jp,Xp=Vp,Ml=Kp,pn=wn,Fl=Rl,cc=zp,$n=Gp,xu=Yp,Un="Die",Wr="Empty",Jt="Fail",Vt="Interrupt",Ft="Parallel",Ct="Sequential";function wi(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Zp(e){if(Array.isArray(e))return e}function em(e){if(Array.isArray(e))return wi(e)}function rm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tm(e,r,t){return r=Du(r),cm(e,Nl()?Reflect.construct(r,t,Du(e).constructor):r.apply(e,t))}function nm(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ir(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Du(e){return Du=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Du(e)}function um(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&$i(e,r)}function am(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function im(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function om(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fm(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cm(e,r){return r&&(Do(r)==="object"||typeof r=="function")?r:rm(e)}function $i(e,r){return $i=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},$i(e,r)}function Ze(e,r){return Zp(e)||im(e,r)||Cl(e,r)||om()}function fu(e){return em(e)||am(e)||Cl(e)||fm()}function Do(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function Cl(e,r){if(e){if(typeof e=="string")return wi(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return wi(e,r)}}function Nl(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nl=function(){return!!e})()}var jl="effect/Cause",xl=Symbol.for(jl),sm={_E:function(e){return e}},ir,Kt=(ir={},Ir(ir,xl,sm),Ir(ir,A,function(){return d(g(jl),N(g(wm(this))),U(this))}),Ir(ir,T,function(e){return lm(e)&&Om(this,e)}),Ir(ir,"pipe",function(){return I(this,arguments)}),Ir(ir,"toJSON",function(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:z(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:z(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:z(this.left),right:z(this.right)}}}),Ir(ir,"toString",function(){return Sa(this)}),Ir(ir,B,function(){return this.toJSON()}),ir),kn=function(){var e=Object.create(Kt);return e._tag=Wr,e}(),Lu=function(e){var r=Object.create(Kt);return r._tag=Jt,r.error=e,r},Re=function(e){var r=Object.create(Kt);return r._tag=Un,r.defect=e,r},Pr=function(e){var r=Object.create(Kt);return r._tag=Vt,r.fiberId=e,r},Bn=function(e,r){var t=Object.create(Kt);return t._tag=Ft,t.left=e,t.right=r,t},we=function(e,r){var t=Object.create(Kt);return t._tag=Ct,t.left=e,t.right=r,t},lm=function(e){return F(e,xl)},vm=function(e){return e._tag===Wr},hm=function(e){return e._tag===Wr?!0:Nt(e,!0,function(r,t){switch(t._tag){case Wr:return E(r);case Un:case Jt:case Vt:return E(!1);default:return O()}})},dm=function(e){return W(bm(e))},Lo=function(e){return Uo(void 0,km)(e)},ym=function(e){return Pt(Nt(e,Ar(),function(r,t){return t._tag===Jt?E(d(r,Ve(t.error))):O()}))},Dl=function(e){return Pt(Nt(e,Ar(),function(r,t){return t._tag===Un?E(d(r,Ve(t.defect))):O()}))},_m=function(e){return Nt(e,Gr(),function(r,t){return t._tag===Vt?E(d(r,pn(t.fiberId))):O()})},pm=function(e){return Ll(e,function(r){return r._tag===Jt?E(r.error):O()})},mm=function(e){var r=pm(e);switch(r._tag){case"None":return Oe(e);case"Some":return nr(r.value)}},bm=function(e){return Ll(e,function(r){return r._tag===Vt?E(r.fiberId):O()})},gm=function(e){return qo(e,{onEmpty:O(),onFail:function(r){return E(Re(r))},onDie:function(r){return E(Re(r))},onInterrupt:function(){return O()},onSequential:function(r,t){return W(r)&&W(t)?E(we(r.value,t.value)):W(r)&&V(t)?E(r.value):V(r)&&W(t)?E(t.value):O()},onParallel:function(r,t){return W(r)&&W(t)?E(Bn(r.value,t.value)):W(r)&&V(t)?E(r.value):V(r)&&W(t)?E(t.value):O()}})},sc=function(e){return qo(e,{onEmpty:kn,onFail:function(){return kn},onDie:function(r){return Re(r)},onInterrupt:function(r){return Pr(r)},onSequential:we,onParallel:Bn})},Sm=function(e){return qo(e,{onEmpty:kn,onFail:function(r){return Re(r)},onDie:function(r){return Re(r)},onInterrupt:function(r){return Pr(r)},onSequential:function(r,t){return we(r,t)},onParallel:function(r,t){return Bn(r,t)}})},Om=function(e,r){for(var t=Ie(e),n=Ie(r);Tt(t)&&Tt(n);){var u=Ze(d(At(t),Nt([Gr(),Ar()],function(l,v){var h=Ze(l,2),y=h[0],_=h[1],p=Ze(ki(v),2),S=p[0],m=p[1];return E([d(y,$n(S)),d(_,Be(m))])})),2),a=u[0],i=u[1],o=Ze(d(At(n),Nt([Gr(),Ar()],function(l,v){var h=Ze(l,2),y=h[0],_=h[1],p=Ze(ki(v),2),S=p[0],m=p[1];return E([d(y,$n(S)),d(_,Be(m))])})),2),f=o[0],c=o[1];if(!P(a,f))return!1;t=i,n=c}return!0},wm=function(e){return $m(Ie(e),Ar())},$m=function(e,r){for(;;){var t=Ze(d(e,ll([Gr(),Ar()],function(i,o){var f=Ze(i,2),c=f[0],l=f[1],v=Ze(ki(o),2),h=v[0],y=v[1];return[d(c,$n(h)),d(l,Be(y))]})),2),n=t[0],u=t[1],a=Ml(n)>0?d(r,Ve(n)):r;if(vp(u))return Pt(a);e=u,r=a}throw new Error(ca("Cause.flattenCauseLoop"))},Ll=s(2,function(e,r){for(var t=[e];t.length>0;){var n=t.pop(),u=r(n);switch(u._tag){case"None":{switch(n._tag){case Ct:case Ft:{t.push(n.right),t.push(n.left);break}}break}case"Some":return u}}return O()}),ki=function(e){for(var r=e,t=[],n=Gr(),u=Ar();r!==void 0;)switch(r._tag){case Wr:{if(t.length===0)return[n,u];r=t.pop();break}case Jt:{if(n=pn(n,Ga(r._tag,r.error)),t.length===0)return[n,u];r=t.pop();break}case Un:{if(n=pn(n,Ga(r._tag,r.defect)),t.length===0)return[n,u];r=t.pop();break}case Vt:{if(n=pn(n,Ga(r._tag,r.fiberId)),t.length===0)return[n,u];r=t.pop();break}case Ct:{switch(r.left._tag){case Wr:{r=r.right;break}case Ct:{r=we(r.left.left,we(r.left.right,r.right));break}case Ft:{r=Bn(we(r.left.left,r.right),we(r.left.right,r.right));break}default:{u=Ve(u,r.right),r=r.left;break}}break}case Ft:{t.push(r.right),r=r.left;break}}throw new Error(ca("Cause.evaluateCauseLoop"))},km={emptyCase:Qf,failCase:vi,dieCase:vi,interruptCase:Qf,sequentialCase:function(e,r,t){return r&&t},parallelCase:function(e,r,t){return r&&t}},lc="SequentialCase",vc="ParallelCase",qo=s(2,function(e,r){var t=r.onDie,n=r.onEmpty,u=r.onFail,a=r.onInterrupt,i=r.onParallel,o=r.onSequential;return Uo(e,void 0,{emptyCase:function(){return n},failCase:function(f,c){return u(c)},dieCase:function(f,c){return t(c)},interruptCase:function(f,c){return a(c)},sequentialCase:function(f,c,l){return o(c,l)},parallelCase:function(f,c,l){return i(c,l)}})}),Nt=s(3,function(e,r,t){for(var n=r,u=e,a=[];u!==void 0;){var i=t(n,u);switch(n=W(i)?i.value:n,u._tag){case Ct:{a.push(u.right),u=u.left;break}case Ft:{a.push(u.right),u=u.left;break}default:{u=void 0;break}}u===void 0&&a.length>0&&(u=a.pop())}return n}),Uo=s(3,function(e,r,t){for(var n=[e],u=[];n.length>0;){var a=n.pop();switch(a._tag){case Wr:{u.push(Oe(t.emptyCase(r)));break}case Jt:{u.push(Oe(t.failCase(r,a.error)));break}case Un:{u.push(Oe(t.dieCase(r,a.defect)));break}case Vt:{u.push(Oe(t.interruptCase(r,a.fiberId)));break}case Ct:{n.push(a.right),n.push(a.left),u.push(nr({_tag:lc}));break}case Ft:{n.push(a.right),n.push(a.left),u.push(nr({_tag:vc}));break}}}for(var i=[];u.length>0;){var o=u.pop();switch(o._tag){case"Left":{switch(o.left._tag){case lc:{var f=i.pop(),c=i.pop(),l=t.sequentialCase(r,f,c);i.push(l);break}case vc:{var v=i.pop(),h=i.pop(),y=t.parallelCase(r,v,h);i.push(y);break}}break}case"Right":{i.push(o.right);break}}}if(i.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return i.pop()}),Sa=function(e,r){return Lo(e)?"All fibers interrupted without errors.":Ul(e).map(function(t){return(r==null?void 0:r.renderErrorCause)!==!0||t.cause===void 0?t.stack:"".concat(t.stack,` {
`).concat(ql(t.cause,"  "),`
}`)}).join(`
`)},ql=function(e,r){for(var t=e.stack.split(`
`),n="".concat(r,"[cause]: ").concat(t[0]),u=1,a=t.length;u<a;u++)n+=`
`.concat(r).concat(t[u]);return e.cause&&(n+=` {
`.concat(ql(e.cause,"".concat(r,"  ")),`
`).concat(r,"}")),n},hc=function(e){um(r,e);function r(t){nm(this,r);var n,u=(typeof t>"u"?"undefined":Do(t))==="object"&&t!==null,a=Error.stackTraceLimit;return Error.stackTraceLimit=1,n=tm(this,r,[Im(t),u&&"cause"in t&&typeof t.cause<"u"?{cause:new r(t.cause)}:void 0]),Ir(n,"span",void 0),n.message===""&&(n.message="An error has occurred"),Error.stackTraceLimit=a,n.name=t instanceof Error?t.name:"Error",u&&(dc in t&&(n.span=t[dc]),Object.keys(t).forEach(function(i){i in n||(n[i]=t[i])})),n.stack=Tm("".concat(n.name,": ").concat(n.message),t instanceof Error&&t.stack?t.stack:"",n.span),n}return r}(globalThis.Error),Im=function(e){if(typeof e=="string")return e;if((typeof e>"u"?"undefined":Do(e))==="object"&&e!==null&&e instanceof Error)return e.message;try{if(F(e,"toString")&&Fn(e.toString)&&e.toString!==Object.prototype.toString&&e.toString!==globalThis.Array.prototype.toString)return e.toString()}catch{}return qs(e)},Em=/\((.*)\)/g,Pm=j("effect/Tracer/spanToTrace",function(){return new WeakMap}),Tm=function(e,r,t){for(var n=[e],u=r.startsWith(e)?r.slice(e.length).split(`
`):r.split(`
`),a=1;a<u.length&&!u[a].includes("Generator.next");a++){if(u[a].includes("effect_internal_function")){n.pop();break}n.push(u[a].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(t)for(var i=t,o=0;i&&i._tag==="Span"&&o<10;){var f=Pm.get(i);if(typeof f=="function"){var c=f();if(typeof c=="string"){var l=c.matchAll(Em),v=!1,h=!0,y=!1,_=void 0;try{for(var p=l[Symbol.iterator](),S;!(h=(S=p.next()).done);h=!0){var m=Ze(S.value,2),b=m[1];v=!0,n.push("    at ".concat(i.name," (").concat(b,")"))}}catch(R){y=!0,_=R}finally{try{!h&&p.return!=null&&p.return()}finally{if(y)throw _}}v||n.push("    at ".concat(i.name," (").concat(c.replace(/^at /,""),")"))}else n.push("    at ".concat(i.name))}else n.push("    at ".concat(i.name));i=jr(i.parent),o++}return n.join(`
`)},dc=Symbol.for("effect/SpanAnnotation"),Ul=function(e){return Uo(e,void 0,{emptyCase:function(){return[]},dieCase:function(r,t){return[new hc(t)]},failCase:function(r,t){return[new hc(t)]},interruptCase:function(){return[]},parallelCase:function(r,t,n){return fu(t).concat(fu(n))},sequentialCase:function(r,t,n){return fu(t).concat(fu(n))}})};function yc(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Am(e){if(Array.isArray(e))return e}function ve(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Rm(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function Mm(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bl(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){ve(e,u,t[u])})}return e}function Fm(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function Hl(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function Cm(e,r){return Am(e)||Rm(e,r)||Nm(e,r)||Mm()}function Nm(e,r){if(e){if(typeof e=="string")return yc(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yc(e,r)}}var jm=Symbol.for("effect/Context/Tag"),qu=Symbol.for("effect/Context/Reference"),xm="effect/STM",Dm=Symbol.for(xm),or,Jl=Hl(Bl({},jn),(or={_op:"Tag"},ve(or,Dm,$t),ve(or,jm,{_Service:function(e){return e},_Identifier:function(e){return e}}),ve(or,"toString",function(){return te(this.toJSON())}),ve(or,"toJSON",function(){return{_id:"Tag",key:this.key,stack:this.stack}}),ve(or,B,function(){return this.toJSON()}),ve(or,"of",function(e){return e}),ve(or,"context",function(e){return Kl(this,e)}),or)),Lm=Hl(Bl({},Jl),ve({},qu,qu)),qm=function(e){var r=Error.stackTraceLimit;Error.stackTraceLimit=2;var t=new Error;Error.stackTraceLimit=r;var n=Object.create(Jl);return Object.defineProperty(n,"stack",{get:function(){return t.stack}}),n.key=e,n},Um=function(){return function(e,r){var t=function(){},n=Error.stackTraceLimit;Error.stackTraceLimit=2;var u=new Error;return Error.stackTraceLimit=n,Object.setPrototypeOf(t,Lm),t.key=e,t.defaultValue=r.defaultValue,Object.defineProperty(t,"stack",{get:function(){return u.stack}}),t}},Vl=Symbol.for("effect/Context"),fr,Bm=(fr={},ve(fr,Vl,{_Services:function(e){return e}}),ve(fr,T,function(e){if(Jm(e)&&this.unsafeMap.size===e.unsafeMap.size){var r=!0,t=!1,n=void 0;try{for(var u=this.unsafeMap.keys()[Symbol.iterator](),a;!(r=(a=u.next()).done);r=!0){var i=a.value;if(!e.unsafeMap.has(i)||!P(this.unsafeMap.get(i),e.unsafeMap.get(i)))return!1}}catch(o){t=!0,n=o}finally{try{!r&&u.return!=null&&u.return()}finally{if(t)throw n}}return!0}return!1}),ve(fr,A,function(){return U(this,po(this.unsafeMap.size))}),ve(fr,"pipe",function(){return I(this,arguments)}),ve(fr,"toString",function(){return te(this.toJSON())}),ve(fr,"toJSON",function(){return{_id:"Context",services:Array.from(this.unsafeMap).map(z)}}),ve(fr,B,function(){return this.toJSON()}),fr),jt=function(e){var r=Object.create(Bm);return r.unsafeMap=e,r},Hm=function(e){var r=new Error("Service not found".concat(e.key?": ".concat(String(e.key)):""));if(e.stack){var t=e.stack.split(`
`);if(t.length>2){var n=t[2].match(/at (.*)/);n&&(r.message=r.message+" (defined at ".concat(n[1],")"))}}if(r.stack){var u=r.stack.split(`
`);u.splice(1,3),r.stack=u.join(`
`)}return r},Jm=function(e){return F(e,Vl)},Vm=function(e){return F(e,qu)},Km=jt(new Map),zm=function(){return Km},Kl=function(e,r){return jt(new Map([[e.key,r]]))},Gm=s(3,function(e,r,t){var n=new Map(e.unsafeMap);return n.set(r.key,t),jt(n)}),Wa=j("effect/Context/defaultValueCache",function(){return new Map}),Bo=function(e){if(Wa.has(e.key))return Wa.get(e.key);var r=e.defaultValue();return Wa.set(e.key,r),r},Wm=function(e,r){return e.unsafeMap.has(r.key)?e.unsafeMap.get(r.key):Bo(r)},zl=s(2,function(e,r){if(!e.unsafeMap.has(r.key)){if(qu in r)return Bo(r);throw Hm(r)}return e.unsafeMap.get(r.key)}),Ym=zl,Qm=s(2,function(e,r){return e.unsafeMap.has(r.key)?dr(e.unsafeMap.get(r.key)):Vm(r)?dr(Bo(r)):kt}),Xm=s(2,function(e,r){var t=new Map(e.unsafeMap),n=!0,u=!1,a=void 0;try{for(var i=r.unsafeMap[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var f=Cm(o.value,2),c=f[0],l=f[1];t.set(c,l)}}catch(v){u=!0,a=v}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}return jt(t)}),tt=qm,Ho=zm,Zm=Kl,fn=Gm,Gl=Ym,Wl=zl,Hn=Qm,Yl=Xm,Ql=Um;function _c(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function eb(e){if(Array.isArray(e))return e}function Mr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function rb(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function tb(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function nb(e,r){return eb(e)||rb(e,r)||ub(e,r)||tb()}function ub(e,r){if(e){if(typeof e=="string")return _c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _c(e,r)}}var Ii=Symbol.for("effect/Duration"),ab=BigInt(0),pc=BigInt(24),cu=BigInt(60),Ei=BigInt(1e3),mc=BigInt(1e6),Pi=BigInt(1e9),bc=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,me=function(e){if(Xl(e))return e;if(mu(e))return Ti(e);if(oy(e))return Ya(e);if(Array.isArray(e)){if(e.length===2&&mu(e[0])&&mu(e[1]))return Ya(BigInt(e[0])*Pi+BigInt(e[1]))}else if(ay(e)){bc.lastIndex=0;var r=bc.exec(e);if(r){var t=nb(r,3);t[0];var n=t[1],u=t[2],a=Number(n);switch(u){case"nano":case"nanos":return Ya(BigInt(n));case"micro":case"micros":return cb(BigInt(n));case"milli":case"millis":return Ti(a);case"second":case"seconds":return sb(a);case"minute":case"minutes":return lb(a);case"hour":case"hours":return vb(a);case"day":case"days":return hb(a);case"week":case"weeks":return db(a)}}}throw new Error("Invalid DurationInput")},gc={_tag:"Millis",millis:0},ib={_tag:"Infinity"},cr,ob=(cr={},Mr(cr,Ii,Ii),Mr(cr,A,function(){return U(this,Ls(this.value))}),Mr(cr,T,function(e){return Xl(e)&&Sb(this,e)}),Mr(cr,"toString",function(){return"Duration(".concat(wb(this),")")}),Mr(cr,"toJSON",function(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:_b(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}}),Mr(cr,B,function(){return this.toJSON()}),Mr(cr,"pipe",function(){return I(this,arguments)}),cr),ur=function(e){var r=Object.create(ob);return mu(e)?isNaN(e)||e<=0?r.value=gc:Number.isFinite(e)?Number.isInteger(e)?r.value={_tag:"Millis",millis:e}:r.value={_tag:"Nanos",nanos:BigInt(Math.round(e*1e6))}:r.value=ib:e<=ab?r.value=gc:r.value={_tag:"Nanos",nanos:e},r},Xl=function(e){return F(e,Ii)},fb=ur(0),HA=ur(1/0),Ya=function(e){return ur(e)},cb=function(e){return ur(e*Ei)},Ti=function(e){return ur(e)},sb=function(e){return ur(e*1e3)},lb=function(e){return ur(e*6e4)},vb=function(e){return ur(e*36e5)},hb=function(e){return ur(e*864e5)},db=function(e){return ur(e*6048e5)},Ai=function(e){return pb(e,{onMillis:function(r){return r},onNanos:function(r){return Number(r)/1e6}})},JA=function(e){var r=me(e);switch(r.value._tag){case"Infinity":return O();case"Nanos":return E(r.value.nanos);case"Millis":return E(BigInt(Math.round(r.value.millis*1e6)))}},yb=function(e){var r=me(e);switch(r.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return r.value.nanos;case"Millis":return BigInt(Math.round(r.value.millis*1e6))}},_b=function(e){var r=me(e);switch(r.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(r.value.nanos/Pi),Number(r.value.nanos%Pi)];case"Millis":return[Math.floor(r.value.millis/1e3),Math.round(r.value.millis%1e3*1e6)]}},pb=s(2,function(e,r){var t=me(e);switch(t.value._tag){case"Nanos":return r.onNanos(t.value.nanos);case"Infinity":return r.onMillis(1/0);case"Millis":return r.onMillis(t.value.millis)}}),zt=s(3,function(e,r,t){var n=me(e),u=me(r);if(n.value._tag==="Infinity"||u.value._tag==="Infinity")return t.onMillis(Ai(n),Ai(u));if(n.value._tag==="Nanos"||u.value._tag==="Nanos"){var a=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6)),i=u.value._tag==="Nanos"?u.value.nanos:BigInt(Math.round(u.value.millis*1e6));return t.onNanos(a,i)}return t.onMillis(n.value.millis,u.value.millis)}),Zl=Dn(function(e,r){return zt(e,r,{onMillis:function(t,n){return t<n?-1:t>n?1:0},onNanos:function(t,n){return t<n?-1:t>n?1:0}})}),VA=s_(el(Zl,me)),mb=function(e,r){return zt(e,r,{onMillis:function(t,n){return t===n},onNanos:function(t,n){return t===n}})},bb=tl(Zl),KA=s(2,function(e,r){return bb(me(e),{minimum:me(r.minimum),maximum:me(r.maximum)})}),zA=s(2,function(e,r){return zt(e,r,{onMillis:function(t,n){return t<n},onNanos:function(t,n){return t<n}})}),GA=s(2,function(e,r){return zt(e,r,{onMillis:function(t,n){return t<=n},onNanos:function(t,n){return t<=n}})}),WA=s(2,function(e,r){return zt(e,r,{onMillis:function(t,n){return t>n},onNanos:function(t,n){return t>n}})}),gb=s(2,function(e,r){return zt(e,r,{onMillis:function(t,n){return t>=n},onNanos:function(t,n){return t>=n}})}),Sb=s(2,function(e,r){return mb(me(e),me(r))}),Ob=function(e){var r=me(e);if(r.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};var t=yb(r),n=t/mc,u=n/Ei,a=u/cu,i=a/cu,o=i/pc;return{days:Number(o),hours:Number(i%pc),minutes:Number(a%cu),seconds:Number(u%cu),millis:Number(n%Ei),nanos:Number(t%mc)}},wb=function(e){var r=me(e);if(r.value._tag==="Infinity")return"Infinity";var t=Ob(r),n=[];return t.days!==0&&n.push("".concat(t.days,"d")),t.hours!==0&&n.push("".concat(t.hours,"h")),t.minutes!==0&&n.push("".concat(t.minutes,"m")),t.seconds!==0&&n.push("".concat(t.seconds,"s")),t.millis!==0&&n.push("".concat(t.millis,"ms")),t.nanos!==0&&n.push("".concat(t.nanos,"ns")),n.join(" ")};function cn(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Sc=Symbol.for("effect/MutableRef"),Fr,$b=(Fr={},cn(Fr,Sc,Sc),cn(Fr,"toString",function(){return te(this.toJSON())}),cn(Fr,"toJSON",function(){return{_id:"MutableRef",current:z(this.current)}}),cn(Fr,B,function(){return this.toJSON()}),cn(Fr,"pipe",function(){return I(this,arguments)}),Fr),ev=function(e){var r=Object.create($b);return r.current=e,r},Oa=function(e){return e.current},rv=s(2,function(e,r){return e.current=r,e});function Jo(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function kb(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vo(e,r,t){return r&&kb(e.prototype,r),e}function Se(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var wa="effect/FiberId",nt=Symbol.for(wa),Uu="None",Ri="Runtime",Mi="Composite",Ib=Q("".concat(wa,"-").concat(Uu)),Eb=nt,Pb=A,Tb=T,Ab=B,Rb=function(){function e(){Jo(this,e),Se(this,Eb,nt),Se(this,"_tag",Uu),Se(this,"id",-1),Se(this,"startTimeMillis",-1)}return Vo(e,[{key:Pb,value:function(){return Ib}},{key:Tb,value:function(t){return $a(t)&&t._tag===Uu}},{key:"toString",value:function(){return te(this.toJSON())}},{key:"toJSON",value:function(){return{_id:"FiberId",_tag:this._tag}}},{key:Ab,value:function(){return this.toJSON()}}]),e}(),Mb=nt,Fb=A,Cb=T,Nb=B,tv=function(){function e(r,t){Jo(this,e),Se(this,"id",void 0),Se(this,"startTimeMillis",void 0),Se(this,Mb,nt),Se(this,"_tag",Ri),this.id=r,this.startTimeMillis=t}return Vo(e,[{key:Fb,value:function(){return U(this,Q("".concat(wa,"-").concat(this._tag,"-").concat(this.id,"-").concat(this.startTimeMillis)))}},{key:Cb,value:function(t){return $a(t)&&t._tag===Ri&&this.id===t.id&&this.startTimeMillis===t.startTimeMillis}},{key:"toString",value:function(){return te(this.toJSON())}},{key:"toJSON",value:function(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}},{key:Nb,value:function(){return this.toJSON()}}]),e}(),jb=nt,xb=A,Db=T,Lb=B,qb=function(){function e(r,t){Jo(this,e),Se(this,"left",void 0),Se(this,"right",void 0),Se(this,jb,nt),Se(this,"_tag",Mi),Se(this,"_hash",void 0),this.left=r,this.right=t}return Vo(e,[{key:xb,value:function(){return d(Q("".concat(wa,"-").concat(this._tag)),N(g(this.left)),N(g(this.right)),U(this))}},{key:Db,value:function(t){return $a(t)&&t._tag===Mi&&P(this.left,t.left)&&P(this.right,t.right)}},{key:"toString",value:function(){return te(this.toJSON())}},{key:"toJSON",value:function(){return{_id:"FiberId",_tag:this._tag,left:z(this.left),right:z(this.right)}}},{key:Lb,value:function(){return this.toJSON()}}]),e}(),Ub=new Rb,Bb=function(e,r){return new tv(e,r)},Hb=function(e,r){return new qb(e,r)},$a=function(e){return F(e,nt)},Fi=function(e){switch(e._tag){case Uu:return Gr();case Ri:return xo(e.id);case Mi:return d(Fi(e.left),$n(Fi(e.right)))}},Oc=j(Symbol.for("effect/Fiber/Id/_fiberCounter"),function(){return ev(0)}),nv=function(e){var r=Array.from(Fi(e)).map(function(t){return"#".concat(t)}).join(",");return r},Jb=function(){var e=Oa(Oc);return d(Oc,rv(e+1)),new tv(e,Date.now())},Yr=Ub,YA=Bb,QA=Hb,XA=$a,Vb=nv,uv=Jb,ZA=kl,Ko=pa,Kb=Mp,zb=Fp,av=Cp,iv=On,ov=Il,Gb=Co,Wb=Lp,fv=ma;function ie(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var In=Symbol.for("effect/List"),Ci=function(e){return G(e)},Yb=function(e){return Cs(To(e),Ci)},Qb=Yb(P),je,Xb=(je={},ie(je,In,In),ie(je,"_tag","Cons"),ie(je,"toString",function(){return te(this.toJSON())}),ie(je,"toJSON",function(){return{_id:"List",_tag:"Cons",values:Ci(this).map(z)}}),ie(je,B,function(){return this.toJSON()}),ie(je,T,function(e){return cv(e)&&this._tag===e._tag&&Qb(this,e)}),ie(je,A,function(){return U(this,Bt(Ci(this)))}),ie(je,Symbol.iterator,function(){var e=!1,r=this;return{next:function(){if(e)return this.return();if(r._tag==="Nil")return e=!0,this.return();var t=r.head;return r=r.tail,{done:e,value:t}},return:function(t){return e||(e=!0),{done:!0,value:t}}}}),ie(je,"pipe",function(){return I(this,arguments)}),je),xt=function(e,r){var t=Object.create(Xb);return t.head=e,t.tail=r,t},Zb=Q("Nil"),xe,eg=(xe={},ie(xe,In,In),ie(xe,"_tag","Nil"),ie(xe,"toString",function(){return te(this.toJSON())}),ie(xe,"toJSON",function(){return{_id:"List",_tag:"Nil"}}),ie(xe,B,function(){return this.toJSON()}),ie(xe,A,function(){return Zb}),ie(xe,T,function(e){return cv(e)&&this._tag===e._tag}),ie(xe,Symbol.iterator,function(){return{next:function(){return{done:!0,value:void 0}}}}),ie(xe,"pipe",function(){return I(this,arguments)}),xe),mn=Object.create(eg),cv=function(e){return F(e,In)},mr=function(e){return e._tag==="Nil"},rg=function(e){return e._tag==="Cons"},tg=function(){return mn},Qr=function(e,r){return xt(e,r)},Dt=tg,zo=function(e){return xt(e,mn)},eR=function(e){var r=e[Symbol.iterator](),t;if((t=r.next())&&!t.done){for(var n=xt(t.value,mn),u=n;(t=r.next())&&!t.done;){var a=xt(t.value,mn);u.tail=a,u=a}return n}else return mn},ng=s(2,function(e,r){return ag(r,e)}),ug=s(2,function(e,r){return Qr(r,e)}),ag=s(2,function(e,r){if(mr(e))return r;if(mr(r))return e;for(var t=xt(r.head,e),n=t,u=r.tail;!mr(u);){var a=xt(u.head,e);n.tail=a,n=a,u=u.tail}return t}),ig=s(3,function(e,r,t){for(var n=r,u=e;!mr(u);)n=t(n,u.head),u=u.tail;return n}),og=function(e){for(var r=Dt(),t=e;!mr(t);)r=ug(r,t.head),t=t.tail;return r};function wc(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var su,rR=Object.assign(Object.create(Array.prototype),(su={},wc(su,A,function(){return U(this,Bt(this))}),wc(su,T,function(e){return Array.isArray(e)&&this.length===e.length?this.every(function(r,t){return P(r,e[t])}):!1}),su)),Go=function(){function e(r){r&&Object.assign(this,r)}return e.prototype=ya,e}(),tR=function(e){return Object.assign(Object.create(ya),e)};function $c(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function fg(e){if(Array.isArray(e))return e}function sv(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function cg(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function sg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lg(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){sv(e,u,t[u])})}return e}function vg(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function hg(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function Bu(e,r){return fg(e)||cg(e,r)||dg(e,r)||sg()}function dg(e,r){if(e){if(typeof e=="string")return $c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $c(e,r)}}var yg=Symbol.for("effect/DifferContextPatch");function kc(e){return e}var Jn=hg(lg({},Go.prototype),sv({},yg,{_Value:kc,_Patch:kc})),_g=Object.assign(Object.create(Jn),{_tag:"Empty"}),pg=Object.create(_g),lv=function(){return pg},mg=Object.assign(Object.create(Jn),{_tag:"AndThen"}),bg=function(e,r){var t=Object.create(mg);return t.first=e,t.second=r,t},gg=Object.assign(Object.create(Jn),{_tag:"AddService"}),Sg=function(e,r){var t=Object.create(gg);return t.key=e,t.service=r,t},Og=Object.assign(Object.create(Jn),{_tag:"RemoveService"}),wg=function(e){var r=Object.create(Og);return r.key=e,r},$g=Object.assign(Object.create(Jn),{_tag:"UpdateService"}),kg=function(e,r){var t=Object.create($g);return t.key=e,t.update=r,t},Ig=function(e,r){var t=new Map(e.unsafeMap),n=lv(),u=!0,a=!1,i=void 0;try{for(var o=function(){var m=Bu(c.value,2),b=m[0],R=m[1];if(t.has(b)){var H=t.get(b);t.delete(b),P(H,R)||(n=Ou(kg(b,function(){return R}))(n))}else t.delete(b),n=Ou(Sg(b,R))(n)},f=r.unsafeMap.entries()[Symbol.iterator](),c;!(u=(c=f.next()).done);u=!0)o()}catch(m){a=!0,i=m}finally{try{!u&&f.return!=null&&f.return()}finally{if(a)throw i}}var l=!0,v=!1,h=void 0;try{for(var y=t.entries()[Symbol.iterator](),_;!(l=(_=y.next()).done);l=!0){var p=Bu(_.value,1),S=p[0];n=Ou(wg(S))(n)}}catch(m){v=!0,h=m}finally{try{!l&&y.return!=null&&y.return()}finally{if(v)throw h}}return n},Ou=s(2,function(e,r){return bg(e,r)}),Eg=s(2,function(e,r){if(e._tag==="Empty")return r;for(var t=!1,n=Ie(e),u=new Map(r.unsafeMap);Tt(n);){var a=At(n),i=Lr(n);switch(a._tag){case"Empty":{n=i;break}case"AddService":{u.set(a.key,a.service),n=i;break}case"AndThen":{n=Ve(Ve(i,a.second),a.first);break}case"RemoveService":{u.delete(a.key),n=i;break}case"UpdateService":{u.set(a.key,a.update(u.get(a.key))),t=!0,n=i;break}}}if(!t)return jt(u);var o=new Map,f=!0,c=!1,l=void 0;try{for(var v=r.unsafeMap[Symbol.iterator](),h;!(f=(h=v.next()).done);f=!0){var y=Bu(h.value,1),_=y[0];u.has(_)&&(o.set(_,u.get(_)),u.delete(_))}}catch(Fe){c=!0,l=Fe}finally{try{!f&&v.return!=null&&v.return()}finally{if(c)throw l}}var p=!0,S=!1,m=void 0;try{for(var b=u[Symbol.iterator](),R;!(p=(R=b.next()).done);p=!0){var H=Bu(R.value,2),L=H[0],ce=H[1];o.set(L,ce)}}catch(Fe){S=!0,m=Fe}finally{try{!p&&b.return!=null&&b.return()}finally{if(S)throw m}}return jt(o)});function Ic(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Pg(e){if(Array.isArray(e))return e}function vv(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Tg(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function Ag(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rg(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){vv(e,u,t[u])})}return e}function Mg(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function Fg(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function Ec(e,r){return Pg(e)||Tg(e,r)||Cg(e,r)||Ag()}function Cg(e,r){if(e){if(typeof e=="string")return Ic(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ic(e,r)}}var Ng=Symbol.for("effect/DifferHashSetPatch");function Qa(e){return e}var ka=Fg(Rg({},Go.prototype),vv({},Ng,{_Value:Qa,_Key:Qa,_Patch:Qa})),jg=Object.assign(Object.create(ka),{_tag:"Empty"}),xg=Object.create(jg),hv=function(){return xg},Dg=Object.assign(Object.create(ka),{_tag:"AndThen"}),Lg=function(e,r){var t=Object.create(Dg);return t.first=e,t.second=r,t},qg=Object.assign(Object.create(ka),{_tag:"Add"}),Ug=function(e){var r=Object.create(qg);return r.value=e,r},Bg=Object.assign(Object.create(ka),{_tag:"Remove"}),Hg=function(e){var r=Object.create(Bg);return r.value=e,r},Jg=function(e,r){var t=Ec(xu([e,hv()],function(a,i){var o=Ec(a,2),f=o[0],c=o[1];return Xp(i)(f)?[Fl(i)(f),c]:[f,Ni(Ug(i))(c)]})(r),2),n=t[0],u=t[1];return xu(u,function(a,i){return Ni(Hg(i))(a)})(n)},Ni=s(2,function(e,r){return Lg(e,r)}),Vg=s(2,function(e,r){if(e._tag==="Empty")return r;for(var t=r,n=Ie(e);Tt(n);){var u=At(n),a=Lr(n);switch(u._tag){case"Empty":{n=a;break}case"AndThen":{n=Ve(u.first)(Ve(u.second)(a));break}case"Add":{t=pn(u.value)(t),n=a;break}case"Remove":t=Fl(u.value)(t),n=a}}return t});function dv(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Kg(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){dv(e,u,t[u])})}return e}function zg(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function Gg(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}var Wg=Symbol.for("effect/DifferReadonlyArrayPatch");function Pc(e){return e}var Vn=Gg(Kg({},Go.prototype),dv({},Wg,{_Value:Pc,_Patch:Pc})),Yg=Object.assign(Object.create(Vn),{_tag:"Empty"}),Qg=Object.create(Yg),yv=function(){return Qg},Xg=Object.assign(Object.create(Vn),{_tag:"AndThen"}),Zg=function(e,r){var t=Object.create(Xg);return t.first=e,t.second=r,t},eS=Object.assign(Object.create(Vn),{_tag:"Append"}),rS=function(e){var r=Object.create(eS);return r.values=e,r},tS=Object.assign(Object.create(Vn),{_tag:"Slice"}),nS=function(e,r){var t=Object.create(tS);return t.from=e,t.until=r,t},uS=Object.assign(Object.create(Vn),{_tag:"Update"}),aS=function(e,r){var t=Object.create(uS);return t.index=e,t.patch=r,t},iS=function(e){for(var r=0,t=yv();r<e.oldValue.length&&r<e.newValue.length;){var n=e.oldValue[r],u=e.newValue[r],a=e.differ.diff(n,u);P(a,e.differ.empty)||(t=wu(t,aS(r,a))),r=r+1}return r<e.oldValue.length&&(t=wu(t,nS(0,r))),r<e.newValue.length&&(t=wu(t,rS(V_(r)(e.newValue)))),t},wu=s(2,function(e,r){return Zg(e,r)}),oS=s(3,function(e,r,t){if(e._tag==="Empty")return r;for(var n=r.slice(),u=qe(e);D_(u);){var a=pe(u),i=Kr(u);switch(a._tag){case"Empty":{u=i;break}case"AndThen":{i.unshift(a.first,a.second),u=i;break}case"Append":{var o=!0,f=!1,c=void 0;try{for(var l=a.values[Symbol.iterator](),v;!(o=(v=l.next()).done);o=!0){var h=v.value;n.push(h)}}catch(y){f=!0,c=y}finally{try{!o&&l.return!=null&&l.return()}finally{if(f)throw c}}u=i;break}case"Slice":{n=n.slice(a.from,a.until),u=i;break}case"Update":{n[a.index]=t.patch(a.patch,n[a.index]),u=i;break}}}return n});function fS(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var cS=Symbol.for("effect/Differ"),sS=fS({},cS,{_P:re,_V:re}),Gt=function(e){var r=Object.create(sS);return r.empty=e.empty,r.diff=e.diff,r.combine=e.combine,r.patch=e.patch,r},lS=function(){return Gt({empty:lv(),combine:function(e,r){return Ou(r)(e)},diff:function(e,r){return Ig(e,r)},patch:function(e,r){return Eg(r)(e)}})},vS=function(){return Gt({empty:hv(),combine:function(e,r){return Ni(r)(e)},diff:function(e,r){return Jg(e,r)},patch:function(e,r){return Vg(r)(e)}})},hS=function(e){return Gt({empty:yv(),combine:function(r,t){return wu(r,t)},diff:function(r,t){return iS({oldValue:r,newValue:t,differ:e})},patch:function(r,t){return oS(r,t,e)}})},_v=function(){return dS(function(e,r){return r})},dS=function(e){return Gt({empty:re,combine:function(r,t){return r===re?t:t===re?r:function(n){return t(r(n))}},diff:function(r,t){return P(r,t)?re:Mn(t)},patch:function(r,t){return e(t,r(t))}})},En=255,pv=8,ji=function(e){return e&En},xi=function(e){return e>>pv&En},Kn=function(e,r){return(e&En)+((r&e&En)<<pv)},yS=Kn(0,0),_S=function(e){return Kn(e,e)},pS=function(e){return Kn(e,0)},mS=s(2,function(e,r){return Kn(ji(e)&~r,xi(e))}),bS=s(2,function(e,r){return e|r}),gS=function(e){return~e>>>0&En},SS=0,Wt=1,OS=2,mv=4,Di=16,bv=32,wS=function(e){return Ia(e,bv)},$S=s(2,function(e,r){return e|r}),Er=function(e){return gv(e)&&!IS(e)},gv=function(e){return Ia(e,Wt)},Ia=s(2,function(e,r){return(e&r)!==0}),Sv=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.reduce(function(n,u){return n|u},0)},kS=Sv(SS),Tc=function(e){return Ia(e,mv)},IS=function(e){return Ia(e,Di)},$u=s(2,function(e,r){return Kn(e^r,r)}),ku=s(2,function(e,r){return e&(gS(ji(r))|xi(r))|ji(r)&xi(r)}),Ac=Gt({empty:yS,diff:function(e,r){return $u(e,r)},combine:function(e,r){return bS(r)(e)},patch:function(e,r){return ku(r,e)}}),ES=_S,Ov=pS,Rc=mS;function Mc(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function PS(e){if(Array.isArray(e))return e}function wv(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Hu(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function TS(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function AS(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xa(e,r){return PS(e)||TS(e,r)||RS(e,r)||AS()}function RS(e,r){if(e){if(typeof e=="string")return Mc(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mc(e,r)}}var $v=function(e,r){return{_tag:"Par",left:e,right:r}},lu=function(e,r){return{_tag:"Seq",left:e,right:r}},MS=function(e){for(var r=zo(e),t=Dt();;){var n=Xa(ig(r,[kv(),Dt()],function(i,o){var f=Xa(i,2),c=f[0],l=f[1],v=Xa(FS(o),2),h=v[0],y=v[1];return[LS(c,h),ng(l,y)]}),2),u=n[0],a=n[1];if(t=CS(t,u),mr(a))return og(t);r=a}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},FS=function(e){for(var r=e,t=kv(),n=Dt(),u=Dt();;)switch(r._tag){case"Empty":{if(mr(n))return[t,u];r=n.head,n=n.tail;break}case"Par":{n=Qr(r.right,n),r=r.left;break}case"Seq":{var a=r.left,i=r.right;switch(a._tag){case"Empty":{r=i;break}case"Par":{var o=a.left,f=a.right;r=$v(lu(o,i),lu(f,i));break}case"Seq":{var c=a.left,l=a.right;r=lu(c,lu(l,i));break}case"Single":{r=a,u=Qr(i,u);break}}break}case"Single":{if(t=DS(t,r),mr(n))return[t,u];r=n.head,n=n.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},CS=function(e,r){if(mr(e))return zo(Za(r));if(qS(r))return e;var t=zS(e.head),n=US(r);return t.length===1&&n.length===1&&P(t[0],n[0])?Qr(KS(e.head,Za(r)),e.tail):Qr(Za(r),e)},NS=Symbol.for("effect/RequestBlock/RequestBlockParallel"),jS={_R:function(e){return e}},xS=NS,Wo=function e(r){wv(this,e),Hu(this,"map",void 0),Hu(this,xS,jS),this.map=r},kv=function(){return new Wo(Ko())},DS=function(e,r){return new Wo(Gb(e.map,r.dataSource,function(t){return __(bu(t,lp(r.blockedRequest)),function(){return Ie(r.blockedRequest)})}))},LS=function(e,r){return new Wo(fv(e.map,r.map,function(t,n,u){return iv(t,u,rt(av(t,u),{onNone:function(){return n},onSome:function(a){return Be(n,a)}}))}))},qS=function(e){return zb(e.map)},US=function(e){return Array.from(ov(e.map))},Za=function(e){return VS(Wb(e.map,function(r){return Ie(r)}))},BS=Symbol.for("effect/RequestBlock/RequestBlockSequential"),HS={_R:function(e){return e}},JS=BS,Iv=function e(r){wv(this,e),Hu(this,"map",void 0),Hu(this,JS,HS),this.map=r},VS=function(e){return new Iv(e)},KS=function(e,r){return new Iv(fv(r.map,e.map,function(t,n,u){return iv(t,u,rt(av(t,u),{onNone:function(){return Ar()},onSome:function(a){return Be(a,n)}}))}))},zS=function(e){return Array.from(ov(e.map))},GS=function(e){return Array.from(e.map)},Ea="Pending",Ev="Done",WS="effect/Deferred",YS=Symbol.for(WS),QS={_E:function(e){return e},_A:function(e){return e}},XS=function(e){return{_tag:Ea,joiners:e}},ZS=function(e){return{_tag:Ev,effect:e}};function eO(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function rO(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tO(e,r,t){return rO(e.prototype,r),e}function Fc(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var nO=Symbol.iterator,Yo=function(){function e(r){eO(this,e),Fc(this,"self",void 0),Fc(this,"called",!1),this.self=r}return tO(e,[{key:"next",value:function(t){return this.called?{value:t,done:!0}:(this.called=!0,{value:this.self,done:!1})}},{key:"return",value:function(t){return{value:t,done:!0}}},{key:"throw",value:function(t){throw t}},{key:nO,value:function(){return new e(this.self)}}]),e}();function Cc(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function uO(e){if(Array.isArray(e))return e}function aO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qo(e,r,t){return r=Ju(r),sO(e,Tv()?Reflect.construct(r,t||[],Ju(e).constructor):r.apply(e,t))}function ut(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function iO(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pa(e,r,t){return r&&iO(e.prototype,r),e}function w(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ju(e){return Ju=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ju(e)}function Xo(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Li(e,r)}function oO(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function fO(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zo(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){w(e,u,t[u])})}return e}function cO(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function Pv(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function sO(e,r){return r&&(vO(r)==="object"||typeof r=="function")?r:aO(e)}function Li(e,r){return Li=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},Li(e,r)}function lO(e,r){return uO(e)||oO(e,r)||hO(e,r)||fO()}function vO(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function hO(e,r){if(e){if(typeof e=="string")return Cc(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Cc(e,r)}}function Tv(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tv=function(){return!!e})()}var Av=function(e,r){var t=new le("Blocked");return t.effect_instruction_i0=e,t.effect_instruction_i1=r,t},dO=function(e){var r=new le("RunBlocked");return r.effect_instruction_i0=e,r},Lt=Symbol.for("effect/Effect"),yO=function e(r,t){ut(this,e),w(this,"patch",void 0),w(this,"op",void 0),w(this,"_op",So),this.patch=r,this.op=t},_O=Lt,pO=T,mO=A,bO=B,gO=Symbol.iterator,le=function(){function e(r){ut(this,e),w(this,"_op",void 0),w(this,"effect_instruction_i0",void 0),w(this,"effect_instruction_i1",void 0),w(this,"effect_instruction_i2",void 0),w(this,"trace",void 0),w(this,_O,$t),this._op=r}return Pa(e,[{key:pO,value:function(t){return this===t}},{key:mO,value:function(){return U(this,_o(this))}},{key:"pipe",value:function(){return I(this,arguments)}},{key:"toJSON",value:function(){return{_id:"Effect",_op:this._op,effect_instruction_i0:z(this.effect_instruction_i0),effect_instruction_i1:z(this.effect_instruction_i1),effect_instruction_i2:z(this.effect_instruction_i2)}}},{key:"toString",value:function(){return te(this.toJSON())}},{key:bO,value:function(){return this.toJSON()}},{key:gO,value:function(){return new Yo(new Cn(this))}}]),e}(),SO=Lt,OO=T,wO=A,$O=B,kO=Symbol.iterator,Rv=function(){function e(r){ut(this,e),w(this,"_op",void 0),w(this,"effect_instruction_i0",void 0),w(this,"effect_instruction_i1",void 0),w(this,"effect_instruction_i2",void 0),w(this,"trace",void 0),w(this,SO,$t),this._op=r,this._tag=r}return Pa(e,[{key:OO,value:function(t){return Da(t)&&t._op==="Failure"&&P(this.effect_instruction_i0,t.effect_instruction_i0)}},{key:wO,value:function(){return d(Q(this._tag),N(g(this.effect_instruction_i0)),U(this))}},{key:"cause",get:function(){return this.effect_instruction_i0}},{key:"pipe",value:function(){return I(this,arguments)}},{key:"toJSON",value:function(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}},{key:"toString",value:function(){return te(this.toJSON())}},{key:$O,value:function(){return this.toJSON()}},{key:kO,value:function(){return new Yo(new Cn(this))}}]),e}(),IO=Lt,EO=T,PO=A,TO=B,AO=Symbol.iterator,Mv=function(){function e(r){ut(this,e),w(this,"_op",void 0),w(this,"effect_instruction_i0",void 0),w(this,"effect_instruction_i1",void 0),w(this,"effect_instruction_i2",void 0),w(this,"trace",void 0),w(this,IO,$t),this._op=r,this._tag=r}return Pa(e,[{key:EO,value:function(t){return Da(t)&&t._op==="Success"&&P(this.effect_instruction_i0,t.effect_instruction_i0)}},{key:PO,value:function(){return d(Q(this._tag),N(g(this.effect_instruction_i0)),U(this))}},{key:"value",get:function(){return this.effect_instruction_i0}},{key:"pipe",value:function(){return I(this,arguments)}},{key:"toJSON",value:function(){return{_id:"Exit",_tag:this._op,value:z(this.value)}}},{key:"toString",value:function(){return te(this.toJSON())}},{key:TO,value:function(){return this.toJSON()}},{key:AO,value:function(){return new Yo(new Cn(this))}}]),e}(),Ta=function(e){return F(e,Lt)},ge=function(e){var r=new le(Hs);return r.effect_instruction_i0=e,r},RO=s(3,function(e,r,t){return Fa(function(n){return $(e,function(u){return $(bn(Y(function(){return n(r(u))})),function(a){return Y(function(){return t(u,a)}).pipe(Zr({onFailure:function(i){switch(a._tag){case $e:return Me(we(a.effect_instruction_i0,i));case ke:return Me(i)}},onSuccess:function(){return a}}))})})})}),zn=s(2,function(e,r){return $(e,function(){return x(r)})}),Gn=function(e){return zn(e,void 0)},Fv=function(){var r=new le(la);switch(arguments.length){case 2:{r.effect_instruction_i0=arguments[0],r.commit=arguments[1];break}case 3:{r.effect_instruction_i0=arguments[0],r.effect_instruction_i1=arguments[1],r.commit=arguments[2];break}case 4:{r.effect_instruction_i0=arguments[0],r.effect_instruction_i1=arguments[1],r.effect_instruction_i2=arguments[2],r.commit=arguments[3];break}default:throw new Error(ca("you're not supposed to end up here"))}return r},Vu=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yr,t=new le(Sn),n=void 0;return t.effect_instruction_i0=function(u){n=e(u)},t.effect_instruction_i1=r,Dv(t,function(u){return Ta(n)?n:be})},Cv=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yr;return Y(function(){return Vu(e,r)})},Xr=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yr;return Fv(e,function(){var t=this,n=void 0,u=void 0;function a(c){n?n(c):u===void 0&&(u=c)}var i=new le(Sn);i.effect_instruction_i0=function(c){n=c,u&&c(u)},i.effect_instruction_i1=r;var o=void 0,f=void 0;return this.effect_instruction_i0.length!==1?(f=new AbortController,o=de(function(){return t.effect_instruction_i0(a,f.signal)})):o=de(function(){return t.effect_instruction_i0(a)}),o||f?Dv(i,function(c){return f&&f.abort(),o??be}):i})},qi=s(2,function(e,r){return Aa(e,{onFailure:r,onSuccess:x})}),Ku=Symbol.for("effect/SpanAnnotation"),Nc=Symbol.for("effect/OriginalAnnotation"),ef=function(e,r){return W(r)?new Proxy(e,{has:function(t,n){return n===Ku||n===Nc||n in t},get:function(t,n){return n===Ku?r.value:n===Nc?e:t[n]}}):e},jc=function(e){return fa(e)&&!(Ku in e)?ge(function(r){return Me(Re(ef(e,cf(r))))}):Me(Re(e))},xc=function(e){return MO(function(){return Re(new sw(e))})},zu=function(e){return Aa(e,{onFailure:function(r){return x(nr(r))},onSuccess:function(r){return x(Oe(r))}})},bn=function(e){return NO(e,{onFailure:D,onSuccess:J})},oe=function(e){return fa(e)&&!(Ku in e)?ge(function(r){return Me(Lu(ef(e,cf(r))))}):Me(Lu(e))},dt=function(e){return $(k(e),oe)},Me=function(e){var r=new Rv($e);return r.effect_instruction_i0=e,r},MO=function(e){return $(k(e),Me)},FO=ge(function(e){return x(e.id())}),Nv=function(e){return ge(function(r){return e(r.id())})},$=s(2,function(e,r){var t=new le(va);return t.effect_instruction_i0=e,t.effect_instruction_i1=r,t}),CO=function(e){var r=new le("OnStep");return r.effect_instruction_i0=e,r},jv=function(e){return $(e,re)},NO=s(2,function(e,r){return Zr(e,{onFailure:function(t){return x(r.onFailure(t))},onSuccess:function(t){return x(r.onSuccess(t))}})}),Zr=s(2,function(e,r){var t=new le(ha);return t.effect_instruction_i0=e,t.effect_instruction_i1=r.onFailure,t.effect_instruction_i2=r.onSuccess,t}),Aa=s(2,function(e,r){return Zr(e,{onFailure:function(t){var n=Dl(t);if(n.length>0)return Me(Sm(t));var u=ym(t);return u.length>0?r.onFailure(pl(u)):Me(t)},onSuccess:r.onSuccess})}),yr=s(2,function(e,r){return Y(function(){var t=G(e),n=Eo(t.length),u=0;return zn(nf({while:function(){return u<t.length},body:function(){return r(t[u],u)},step:function(a){n[u++]=a}}),n)})}),Ra=s(2,function(e,r){return Y(function(){var t=G(e),n=0;return nf({while:function(){return n<t.length},body:function(){return r(t[n],n)},step:function(){n++}})})}),xv=function(e){var r=new le(Nn);return r.effect_instruction_i0=ES(Wt),r.effect_instruction_i1=function(){return e},r},_e=s(2,function(e,r){return $(e,function(t){return k(function(){return r(t)})})}),rf=s(2,function(e,r){return Aa(e,{onFailure:function(t){return dt(function(){return r.onFailure(t)})},onSuccess:function(t){return k(function(){return r.onSuccess(t)})}})}),Ma=s(2,function(e,r){return Zr(e,{onFailure:function(t){var n=mm(t);switch(n._tag){case"Left":return dt(function(){return r(n.left)});case"Right":return Me(n.right)}},onSuccess:x})}),tf=s(2,function(e,r){return Fa(function(t){return Zr(t(e),{onFailure:function(n){var u=D(n);return Zr(r(u),{onFailure:function(a){return D(we(n,a))},onSuccess:function(){return u}})},onSuccess:function(n){var u=J(n);return Ca(r(u),u)}})})}),Dv=s(2,function(e,r){return tf(e,ff({onFailure:function(t){return Lo(t)?Gn(r(_m(t))):be},onSuccess:function(){return be}}))}),jO=s(2,function(e,r){return LO(e,r,x)}),x=function(e){var r=new Mv(ke);return r.effect_instruction_i0=e,r},Y=function(e){var r=new le(la);return r.commit=e,r},k=function(e){var r=new le(Bs);return r.effect_instruction_i0=e,r},xO=s(function(e){return e.length===3||e.length===2&&!(fa(e[1])&&"onlyEffect"in e[1])},function(e,r){return $(e,function(t){var n=typeof r=="function"?r(t):r;return Ta(n)?zn(n,t):cy(n)?Vu(function(u){n.then(function(a){return u(x(t))},function(a){return u(oe(new yn(a)))})}):x(t)})}),DO=function(e){return ge(function(r){var t=r.getFiberRef(Bi),n=d(t,Je(function(){return r.scope()}));return e(Na(Bi,E(n)))})},LO=s(3,function(e,r,t){return Zr(e,{onFailure:function(n){var u=Dl(n);return u.length>0?Me(nl(gm(n))):r()},onSuccess:t})}),Lv=function(e){var r=new le(Nn);return r.effect_instruction_i0=Ov(Wt),r.effect_instruction_i1=function(){return e},r},Fa=function(e){return Fv(e,function(){var r=this,t=new le(Nn);return t.effect_instruction_i0=Ov(Wt),t.effect_instruction_i1=function(n){return gv(n)?de(function(){return r.effect_instruction_i0(xv)}):de(function(){return r.effect_instruction_i0(Lv)})},t})},be=x(void 0),qO=function(e){var r=new le(Nn);return r.effect_instruction_i0=e,r.effect_instruction_i1=void 0,r},nf=function(e){var r=new le(da);return r.effect_instruction_i0=e.while,r.effect_instruction_i1=e.body,r.effect_instruction_i2=e.step,r},uf=function(e){var r=new le(Fu);return typeof(e==null?void 0:e.priority)<"u"?uw(r,e.priority):r},qv=s(2,function(e,r){return $(e,function(t){return _e(r,function(n){return[t,n]})})}),Uv=s(2,function(e,r){return $(e,function(t){return zn(r,t)})}),Ca=s(2,function(e,r){return $(e,function(){return r})}),ei=Cv(function(){var e=setInterval(function(){},Math.pow(2,31)-1);return k(function(){return clearInterval(e)})}),UO=function(e){return $(FO,function(r){return d(e,Bv(r))})},Bv=s(2,function(e,r){return $(e.interruptAsFork(r),function(){return e.await})}),BO={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe:function(){return I(this,arguments)}},HO={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe:function(){return I(this,arguments)}},JO={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe:function(){return I(this,arguments)}},VO={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe:function(){return I(this,arguments)}},Hv={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe:function(){return I(this,arguments)}},Jv={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe:function(){return I(this,arguments)}},KO={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe:function(){return I(this,arguments)}},zO={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe:function(){return I(this,arguments)}},GO="effect/FiberRef",WO=Symbol.for(GO),YO={_A:function(e){return e}},af=function(e){return ge(function(r){return J(r.getFiberRef(e))})},of=s(2,function(e,r){return $(af(e),r)}),Dc=s(2,function(e,r){return QO(e,function(){return[void 0,r]})}),QO=s(2,function(e,r){return ge(function(t){var n=lO(r(t.getFiberRef(e)),2),u=n[0],a=n[1];return t.setFiberRef(e,a),x(u)})}),Na=s(3,function(e,r,t){return RO(Uv(af(r),Dc(r,t)),function(){return e},function(n){return Dc(r,n)})}),Ee=function(e,r){var t;return Yt(e,{differ:_v(),fork:(t=r==null?void 0:r.fork)!==null&&t!==void 0?t:re,join:r==null?void 0:r.join})},XO=function(e){var r=vS();return Yt(e,{differ:r,fork:r.empty})},ZO=function(e){var r=hS(_v());return Yt(e,{differ:r,fork:r.empty})},Vv=function(e){var r=lS();return Yt(e,{differ:r,fork:r.empty})},Yt=function(e,r){var t,n,u=Pv(Zo({},xn),(n={},w(n,WO,YO),w(n,"initial",e),w(n,"commit",function(){return af(this)}),w(n,"diff",function(a,i){return r.differ.diff(a,i)}),w(n,"combine",function(a,i){return r.differ.combine(a,i)}),w(n,"patch",function(a){return function(i){return r.differ.patch(a,i)}}),w(n,"fork",r.fork),w(n,"join",(t=r.join)!==null&&t!==void 0?t:function(a,i){return i}),n));return u},ew=function(e){return Yt(e,{differ:Ac,fork:Ac.empty})},Wn=j(Symbol.for("effect/FiberRef/currentContext"),function(){return Vv(Ho())}),ja=j(Symbol.for("effect/FiberRef/currentSchedulingPriority"),function(){return Ee(0)}),Kv=j(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),function(){return Ee(2048)}),rw=j(Symbol.for("effect/FiberRef/currentLogAnnotation"),function(){return Ee(Ko())}),tw=j(Symbol.for("effect/FiberRef/currentLogLevel"),function(){return Ee(Hv)}),nw=j(Symbol.for("effect/FiberRef/currentLogSpan"),function(){return Ee(Dt())}),uw=s(2,function(e,r){return Na(e,ja,r)}),aw=j(Symbol.for("effect/FiberRef/currentConcurrency"),function(){return Ee("unbounded")}),iw=j(Symbol.for("effect/FiberRef/currentRequestBatching"),function(){return Ee(!0)}),ow=j(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),function(){return Ee(E(Jv))}),Ui=j(Symbol.for("effect/FiberRef/currentMetricLabels"),function(){return ZO(It())}),Bi=j(Symbol.for("effect/FiberRef/currentForkScopeOverride"),function(){return Ee(O(),{fork:function(){return O()},join:function(e,r){return e}})}),vu=j(Symbol.for("effect/FiberRef/currentInterruptedCause"),function(){return Ee(kn,{fork:function(){return kn},join:function(e,r){return e}})}),Lc=Symbol.for("effect/Scope"),qc=Symbol.for("effect/CloseableScope"),fw=function(e,r){return e.addFinalizer(function(){return Gn(r)})},cw=function(e,r){return e.close(r)},xa=function(e,r){return e.fork(r)},zv=function(){var e=function(r){Xo(t,r);function t(){return ut(this,t),Qo(this,t,arguments)}return Pa(t,[{key:"commit",value:function(){return oe(this)}},{key:"toJSON",value:function(){return Zo({},this)}},{key:B,value:function(){return this.toString!==globalThis.Error.prototype.toString?this.stack?"".concat(this.toString(),`
`).concat(this.stack.split(`
`).slice(1).join(`
`)):this.toString():"Bun"in globalThis?Sa(Lu(this),{renderErrorCause:!0}):this}}]),t}(globalThis.Error);return Object.assign(e.prototype,Hy),e}(),at=function(e,r){var t=function(n){Xo(u,n);function u(){ut(this,u);var a;return a=Qo(this,u,arguments),w(a,"_tag",r),a}return u}(zv);return Object.assign(t.prototype,e),t.prototype.name=r,t},Uc=Symbol.for("effect/Cause/errors/RuntimeException"),sw=at(w({},Uc,Uc),"RuntimeException"),Hi=Symbol.for("effect/Cause/errors/InterruptedException");w({},Hi,Hi);var lw=function(e){return F(e,Hi)},Bc=Symbol.for("effect/Cause/errors/IllegalArgument"),nR=at(w({},Bc,Bc),"IllegalArgumentException"),Hc=Symbol.for("effect/Cause/errors/NoSuchElement"),Gv=at(w({},Hc,Hc),"NoSuchElementException"),Jc=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException");w({},Jc,Jc);var Vc=Symbol.for("effect/Cause/errors/ExceededCapacityException");w({},Vc,Vc);var Kc=Symbol.for("effect/Cause/errors/Timeout");w({},Kc,Kc);var zc=Symbol.for("effect/Cause/errors/UnknownException"),yn=function(){var e=function(t){Xo(n,t);function n(u,a){ut(this,n);var i;return i=Qo(this,n,[a??"An unknown error occurred",{cause:u}]),w(i,"cause",void 0),w(i,"_tag","UnknownException"),w(i,"error",void 0),i.cause=u,i.error=u,i}return n}(zv),r;return Object.assign(e.prototype,(r={},w(r,zc,zc),w(r,"name","UnknownException"),r)),e}(),Da=function(e){return Ta(e)&&"_tag"in e&&(e._tag==="Success"||e._tag==="Failure")},vw=s(2,function(e,r){switch(e._tag){case $e:return D(e.effect_instruction_i0);case ke:return J(r)}}),ri=function(e){return vw(e,void 0)},mt=function(e,r){return _w(e,r!=null&&r.parallel?Bn:we)},hw=function(e){return D(Re(e))},Gc=function(e){return D(Lu(e))},D=function(e){var r=new Rv($e);return r.effect_instruction_i0=e,r},dw=function(e){return D(Pr(e))},ti=s(2,function(e,r){switch(e._tag){case $e:return D(e.effect_instruction_i0);case ke:return J(r(e.effect_instruction_i0))}}),ff=s(2,function(e,r){var t=r.onFailure,n=r.onSuccess;switch(e._tag){case $e:return t(e.effect_instruction_i0);case ke:return n(e.effect_instruction_i0)}}),J=function(e){var r=new Mv(ke);return r.effect_instruction_i0=e,r},er=J(void 0),yw=s(3,function(e,r,t){var n=t.onFailure,u=t.onSuccess;switch(e._tag){case $e:switch(r._tag){case ke:return D(e.effect_instruction_i0);case $e:return D(n(e.effect_instruction_i0,r.effect_instruction_i0))}case ke:switch(r._tag){case ke:return J(u(e.effect_instruction_i0,r.effect_instruction_i0));case $e:return D(r.effect_instruction_i0)}}}),_w=function(e,r){var t=_l(e);return Tt(t)?d(Lr(t),ll(d(At(t),ti(Ie)),function(n,u){return d(n,yw(u,{onSuccess:function(a,i){return d(a,Ve(i))},onFailure:r}))}),ti(Pt),ti(function(n){return Hr(n)}),E):O()},pw=function(e){var r,t=Pv(Zo({},xn),(r={},w(r,YS,QS),w(r,"state",ev(XS([]))),w(r,"commit",function(){return Wv(this)}),w(r,"blockingOn",e),r));return t},Wv=function(e){return Cv(function(r){var t=Oa(e.state);switch(t._tag){case Ev:return r(t.effect);case Ea:return t.joiners.push(r),mw(e,r)}},e.blockingOn)},Yv=function(e,r){var t=Oa(e.state);if(t._tag===Ea){rv(e.state,ZS(r));for(var n=0,u=t.joiners.length;n<u;n++)t.joiners[n](r)}},mw=function(e,r){return k(function(){var t=Oa(e.state);if(t._tag===Ea){var n=t.joiners.indexOf(r);n>=0&&t.joiners.splice(n,1)}})},bw=ge(function(e){return J(e.currentContext)}),gw=function(){return bw},Yn=function(e){return $(gw(),e)},Sw=s(2,function(e,r){return Na(Wn,r)(e)}),Ow=s(2,function(e,r){return Yn(function(t){return Sw(e,r(t))})}),cf=function(e){var r=e.currentSpan;return r!==void 0&&r._tag==="Span"?E(r):O()};function ww(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function $w(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kw(e,r,t){return $w(e.prototype,r),e}function ni(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Iw(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}var Ew="effect/Clock",Qv=Symbol.for(Ew),sf=tt("effect/Clock"),Pw=Math.pow(2,31)-1,Wc={unsafeSchedule:function(e,r){var t=Ai(r);if(t>Pw)return vi;var n=!1,u=setTimeout(function(){n=!0,e()},t);return function(){return clearTimeout(u),!n}}},Yc=function(){var e=BigInt(1e6);if(typeof performance>"u")return function(){return BigInt(Date.now())*e};if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return function(){return BigInt(Math.round(performance.now()*1e6))};var r=BigInt(Date.now())*e-BigInt(Math.round(performance.now()*1e6));return function(){return r+BigInt(Math.round(performance.now()*1e6))}}(),Tw=function(){var e=(typeof process>"u"?"undefined":Iw(process))==="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!e)return Yc;var r=Yc()-e.bigint();return function(){return r+e.bigint()}}(),Aw=Qv,Rw=function(){function e(){var r=this;ww(this,e),ni(this,Aw,Qv),ni(this,"currentTimeMillis",k(function(){return r.unsafeCurrentTimeMillis()})),ni(this,"currentTimeNanos",k(function(){return r.unsafeCurrentTimeNanos()}))}return kw(e,[{key:"unsafeCurrentTimeMillis",value:function(){return Date.now()}},{key:"unsafeCurrentTimeNanos",value:function(){return Tw()}},{key:"scheduler",value:function(){return x(Wc)}},{key:"sleep",value:function(t){return Xr(function(n){var u=Wc.unsafeSchedule(function(){return n(be)},t);return Gn(k(u))})}}]),e}(),Mw=function(){return new Rw},Xv="And",Zv="Or",eh="InvalidData",rh="MissingData",th="SourceUnavailable",nh="Unsupported";function Ji(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Fw(e){if(Array.isArray(e))return Ji(e)}function Cw(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Nw(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jw(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Sr(e){return Fw(e)||Nw(e)||xw(e)||jw()}function xw(e,r){if(e){if(typeof e=="string")return Ji(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ji(e,r)}}var Dw="effect/ConfigError",Qc=Symbol.for(Dw),Qt=Cw({_tag:"ConfigError"},Qc,Qc),uh=function(e,r){var t=Object.create(Qt);return t._op=Xv,t.left=e,t.right=r,Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"".concat(this.left," and ").concat(this.right)}}),t},ah=function(e,r){var t=Object.create(Qt);return t._op=Zv,t.left=e,t.right=r,Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"".concat(this.left," or ").concat(this.right)}}),t},Lw=function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pathDelim:"."},n=Object.create(Qt);return n._op=eh,n.path=e,n.message=r,Object.defineProperty(n,"toString",{enumerable:!1,value:function(){var u=d(this.path,Ht(t.pathDelim));return"(Invalid data at ".concat(u,': "').concat(this.message,'")')}}),n},et=function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pathDelim:"."},n=Object.create(Qt);return n._op=rh,n.path=e,n.message=r,Object.defineProperty(n,"toString",{enumerable:!1,value:function(){var u=d(this.path,Ht(t.pathDelim));return"(Missing data at ".concat(u,': "').concat(this.message,'")')}}),n},qw=function(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{pathDelim:"."},u=Object.create(Qt);return u._op=th,u.path=e,u.message=r,u.cause=t,Object.defineProperty(u,"toString",{enumerable:!1,value:function(){var a=d(this.path,Ht(n.pathDelim));return"(Source unavailable at ".concat(a,': "').concat(this.message,'")')}}),u},Uw=function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pathDelim:"."},n=Object.create(Qt);return n._op=nh,n.path=e,n.message=r,Object.defineProperty(n,"toString",{enumerable:!1,value:function(){var u=d(this.path,Ht(t.pathDelim));return"(Unsupported operation at ".concat(u,': "').concat(this.message,'")')}}),n},qr=s(2,function(e,r){switch(e._op){case Xv:return uh(qr(e.left,r),qr(e.right,r));case Zv:return ah(qr(e.left,r),qr(e.right,r));case eh:return Lw(Sr(r).concat(Sr(e.path)),e.message);case rh:return et(Sr(r).concat(Sr(e.path)),e.message);case th:return qw(Sr(r).concat(Sr(e.path)),e.message,e.cause);case nh:return Uw(Sr(r).concat(Sr(e.path)),e.message)}}),Bw={_tag:"Empty"},ui=s(2,function(e,r){for(var t=zo(r),n=e;rg(t);){var u=t.head;switch(u._tag){case"Empty":{t=t.tail;break}case"AndThen":{t=Qr(u.first,Qr(u.second,t.tail));break}case"MapName":{n=yt(n,u.f),t=t.tail;break}case"Nested":{n=Cu(n,u.name),t=t.tail;break}case"Unnested":{var a=d(_n(n),O_(u.name));if(a)n=Kr(n),t=t.tail;else return nr(et(n,"Expected ".concat(u.name," to be in path in ConfigProvider#unnested")));break}}}return Oe(n)}),Hw="Constant",Jw="Fail",Vw="Fallback",Kw="Described",zw="Lazy",Gw="MapOrFail",Ww="Nested",Yw="Primitive",Qw="Sequence",Xw="HashMap",Zw="ZipWith",Xc={};function Vi(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function e$(e){if(Array.isArray(e))return e}function r$(e){if(Array.isArray(e))return Vi(e)}function Ur(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function t$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function n$(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function u$(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a$(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i$(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){Ur(e,u,t[u])})}return e}function ai(e,r){return e$(e)||n$(e,r)||ih(e,r)||u$()}function Zc(e){return r$(e)||t$(e)||ih(e)||a$()}function o$(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function ih(e,r){if(e){if(typeof e=="string")return Vi(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vi(e,r)}}var Gu=function(e,r){return Zc(e).concat(Zc(r))},f$="effect/ConfigProvider",es=Symbol.for(f$),oh=tt("effect/ConfigProvider"),c$="effect/ConfigProviderFlat",rs=Symbol.for(c$),s$=function(e){var r;return i$((r={},Ur(r,es,es),Ur(r,"pipe",function(){return I(this,arguments)}),r),e)},l$=function(e){var r;return r={},Ur(r,rs,rs),Ur(r,"patch",e.patch),Ur(r,"load",function(t,n){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return e.load(t,n,u)}),Ur(r,"enumerateChildren",e.enumerateChildren),r},v$=function(e){return s$({load:function(r){return $(Ae(e,It(),r,!1),function(t){return rt(_n(t),{onNone:function(){return oe(et(It(),"Expected a single value having structure: ".concat(r)))},onSome:x})})},flattened:e})},h$=function(e){var r=Object.assign({},{pathDelim:"_",seqDelim:","},e),t=r.pathDelim,n=r.seqDelim,u=function(c){return d(c,Ht(t))},a=function(c){return c.split(t)},i=function(){return typeof process<"u"&&"env"in process&&o$(Xc)==="object"?Xc:{}},o=function(c,l){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,h=u(c),y=i(),_=h in y?E(y[h]):O();return d(_,Ma(function(){return et(c,"Expected ".concat(h," to exist in the process context"))}),$(function(p){return m$(p,c,l,n,v)}))},f=function(c){return k(function(){var l=i(),v=Object.keys(l),h=v.map(function(_){return a(_.toUpperCase())}),y=h.filter(function(_){for(var p=0;p<c.length;p++){var S=d(c,cl(p)),m=_[p];if(m===void 0||S!==m)return!1}return!0}).flatMap(function(_){return _.slice(c.length,c.length+1)});return Qp(y)})};return v$(l$({load:o,enumerateChildren:f,patch:Bw}))},d$=function(e,r,t,n){var u=ac(t.length,function(f){return f>=n.length?O():E([e(f),f+1])}),a=ac(n.length,function(f){return f>=t.length?O():E([r(f),f+1])}),i=Gu(t,u),o=Gu(n,a);return[i,o]},y$=function(e,r){var t=r;if(t._tag==="Nested"){for(var n=e.slice();t._tag==="Nested";)n.push(t.name),t=t.config;return n}return e},Ae=function(e,r,t,n){var u=t;switch(u._tag){case Hw:return x(qe(u.value));case Kw:return Y(function(){return Ae(e,r,u.config,n)});case Jw:return oe(et(r,u.message));case Vw:return d(Y(function(){return Ae(e,r,u.first,n)}),qi(function(a){return u.condition(a)?d(Ae(e,r,u.second,n),qi(function(i){return oe(ah(a,i))})):oe(a)}));case zw:return Y(function(){return Ae(e,r,u.config(),n)});case Gw:return Y(function(){return d(Ae(e,r,u.original,n),$(yr(function(a){return d(u.mapOrFail(a),Ma(qr(y$(r,u.original))))})))});case Ww:return Y(function(){return Ae(e,Gu(r,qe(u.name)),u.config,n)});case Yw:return d(ui(r,e.patch),$(function(a){return d(e.load(a,u,n),$(function(i){if(i.length===0){var o=d(U_(a),Je(function(){return"<n/a>"}));return oe(et([],"Expected ".concat(u.description," with name ").concat(o)))}return x(i)}))}));case Qw:return d(ui(r,e.patch),$(function(a){return d(e.enumerateChildren(a),$(g$),$(function(i){return i.length===0?Y(function(){return _e(Ae(e,r,u.config,!0),qe)}):d(yr(i,function(o){return Ae(e,il(r,"[".concat(o,"]")),u.config,!0)}),_e(function(o){var f=ep(o);return f.length===0?qe(It()):qe(f)}))}))}));case Xw:return Y(function(){return d(ui(r,e.patch),$(function(a){return d(e.enumerateChildren(a),$(function(i){return d(i,yr(function(o){return Ae(e,Gu(a,qe(o)),u.valueConfig,n)}),_e(function(o){return o.length===0?qe(Ko()):d(b$(o),yt(function(f){return Kb(uc(G(i),f))}))}))}))}))});case Zw:return Y(function(){return d(Ae(e,r,u.left,n),zu,$(function(a){return d(Ae(e,r,u.right,n),zu,$(function(i){if(Tr(a)&&Tr(i))return oe(uh(a.left,i.left));if(Tr(a)&&Dr(i))return oe(a.left);if(Dr(a)&&Tr(i))return oe(i.left);if(Dr(a)&&Dr(i)){var o=d(r,Ht(".")),f=_$(r,o),c=ai(d$(f,f,d(a.right,yt(Oe)),d(i.right,yt(Oe))),2),l=c[0],v=c[1];return d(l,uc(v),yr(function(h){var y=ai(h,2),_=y[0],p=y[1];return d(qv(_,p),_e(function(S){var m=ai(S,2),b=m[0],R=m[1];return u.zip(b,R)}))}))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")}))}))})}},_$=function(e,r){return function(t){return nr(et(e,"The element at index ".concat(t,' in a sequence at path "').concat(r,'" was missing')))}},p$=function(e,r){var t=e.split(new RegExp("\\s*".concat(tp(r),"\\s*")));return t},m$=function(e,r,t,n,u){return u?d(p$(e,n),yr(function(a){return t.parse(a.trim())}),Ma(qr(r))):d(t.parse(e),rf({onFailure:qr(r),onSuccess:qe}))},b$=function(e){return Object.keys(e[0]).map(function(r){return e.map(function(t){return t[r]})})},g$=function(e){return d(yr(e,O$),rf({onFailure:function(){return It()},onSuccess:Nu(Et)}),zu,_e(a_))},S$=/^(\[(\d+)\])$/,O$=function(e){var r=e.match(S$);if(r!==null){var t=r[2];return d(t!==void 0&&t.length>0?E(t):O(),m_(w$))}return O()},w$=function(e){var r=Number.parseInt(e);return Number.isNaN(r)?O():E(r)};function Ki(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function $$(e){if(Array.isArray(e))return Ki(e)}function Z(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function k$(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I$(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sr(e){return $$(e)||k$(e)||E$(e)||I$()}function E$(e,r){if(e){if(typeof e=="string")return Ki(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ki(e,r)}}var ts=Symbol.for("effect/Console"),fh=tt("effect/Console"),K,P$=(K={},Z(K,ts,ts),Z(K,"assert",function(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return k(function(){var u;(u=console).assert.apply(u,[e].concat(sr(t)))})}),Z(K,"clear",k(function(){console.clear()})),Z(K,"count",function(e){return k(function(){console.count(e)})}),Z(K,"countReset",function(e){return k(function(){console.countReset(e)})}),Z(K,"debug",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return k(function(){var n;(n=console).debug.apply(n,sr(r))})}),Z(K,"dir",function(e,r){return k(function(){console.dir(e,r)})}),Z(K,"dirxml",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return k(function(){var n;(n=console).dirxml.apply(n,sr(r))})}),Z(K,"error",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return k(function(){var n;(n=console).error.apply(n,sr(r))})}),Z(K,"group",function(e){return e!=null&&e.collapsed?k(function(){return console.groupCollapsed(e==null?void 0:e.label)}):k(function(){return console.group(e==null?void 0:e.label)})}),Z(K,"groupEnd",k(function(){console.groupEnd()})),Z(K,"info",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return k(function(){var n;(n=console).info.apply(n,sr(r))})}),Z(K,"log",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return k(function(){var n;(n=console).log.apply(n,sr(r))})}),Z(K,"table",function(e,r){return k(function(){console.table(e,r)})}),Z(K,"time",function(e){return k(function(){return console.time(e)})}),Z(K,"timeEnd",function(e){return k(function(){return console.timeEnd(e)})}),Z(K,"timeLog",function(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];return k(function(){var u;(u=console).timeLog.apply(u,[e].concat(sr(t)))})}),Z(K,"trace",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return k(function(){var n;(n=console).trace.apply(n,sr(r))})}),Z(K,"warn",function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return k(function(){var n;(n=console).warn.apply(n,sr(r))})}),Z(K,"unsafe",console),K);function T$(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function A$(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R$(e,r,t){return A$(e.prototype,r),e}function ii(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var M$="effect/Random",ch=Symbol.for(M$),F$=tt("effect/Random"),C$=ch,N$=function(){function e(r){T$(this,e),ii(this,"seed",void 0),ii(this,C$,ch),ii(this,"PRNG",void 0),this.seed=r,this.PRNG=new ky(r)}return R$(e,[{key:"next",get:function(){var t=this;return k(function(){return t.PRNG.number()})}},{key:"nextBoolean",get:function(){return _e(this.next,function(t){return t>.5})}},{key:"nextInt",get:function(){var t=this;return k(function(){return t.PRNG.integer(Number.MAX_SAFE_INTEGER)})}},{key:"nextRange",value:function(t,n){return _e(this.next,function(u){return(n-t)*u+t})}},{key:"nextIntBetween",value:function(t,n){var u=this;return k(function(){return u.PRNG.integer(n-t)+t})}},{key:"shuffle",value:function(t){var n=this;return j$(t,function(u){return n.nextIntBetween(0,u)})}}]),e}(),j$=function(e,r){return Y(function(){return d(k(function(){return Array.from(e)}),$(function(t){for(var n=[],u=t.length;u>=2;u=u-1)n.push(u);return d(n,Ra(function(a){return d(r(a),_e(function(i){return x$(t,a-1,i)}))}),zn(_l(t)))}))})},x$=function(e,r,t){var n=e[r];return e[r]=e[t],e[t]=n,e},D$=function(e){return new N$(g(e))};function L$(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function q$(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U$(e,r,t){return q$(e.prototype,r),e}function he(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function B$(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){he(e,u,t[u])})}return e}var ns=Symbol.for("effect/Tracer"),H$=function(e){return B$(he({},ns,ns),e)},sh=tt("effect/Tracer"),lh=tt("effect/ParentSpan"),us=function(){var e="abcdef0123456789",r=e.length;return function(t){for(var n="",u=0;u<t;u++)n+=e.charAt(Math.floor(Math.random()*r));return n}}(),J$=function(){function e(r,t,n,u,a,i){L$(this,e),he(this,"name",void 0),he(this,"parent",void 0),he(this,"context",void 0),he(this,"links",void 0),he(this,"startTime",void 0),he(this,"kind",void 0),he(this,"_tag","Span"),he(this,"spanId",void 0),he(this,"traceId","native"),he(this,"sampled",!0),he(this,"status",void 0),he(this,"attributes",void 0),he(this,"events",[]),this.name=r,this.parent=t,this.context=n,this.links=u,this.startTime=a,this.kind=i,this.status={_tag:"Started",startTime:a},this.attributes=new Map,this.traceId=t._tag==="Some"?t.value.traceId:us(32),this.spanId=us(16)}return U$(e,[{key:"end",value:function(t,n){this.status={_tag:"Ended",endTime:t,exit:n,startTime:this.status.startTime}}},{key:"attribute",value:function(t,n){this.attributes.set(t,n)}},{key:"event",value:function(t,n,u){this.events.push([t,n,u??{}])}}]),e}(),V$=H$({span:function(e,r,t,n,u,a){return new J$(e,r,t,n,u,a)},context:function(e){return e()}}),K$=d(Ho(),fn(sf,Mw()),fn(fh,P$),fn(F$,D$(Math.random())),fn(oh,h$()),fn(sh,V$)),Wu=j(Symbol.for("effect/DefaultServices/currentServices"),function(){return Vv(K$)}),z$=function(e){return ge(function(r){return e(r.currentDefaultServices)})},G$=function(e){return z$(function(r){return e(r.unsafeMap.get(oh.key))})},uR=function(e){return G$(function(r){return r.load(e)})};function W$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y$(e,r,t){return r=Yu(r),Z$(e,vh()?Reflect.construct(r,t||[],Yu(e).constructor):r.apply(e,t))}function Q$(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Yu(e){return Yu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yu(e)}function X$(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),zi(e,r)}function Z$(e,r){return r&&(ek(r)==="object"||typeof r=="function")?r:W$(e)}function zi(e,r){return zi=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},zi(e,r)}function ek(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function vh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vh=function(){return!!e})()}var rk=jn,tk=Jy,nk=function(e){X$(r,e);function r(){return Q$(this,r),Y$(this,r,arguments)}return r}(tk),hh="Sequential",dh="Parallel",uk="ParallelN",lf={_tag:hh},ak={_tag:dh},ik=function(e){return{_tag:uk,parallelism:e}},ok=function(e){return e._tag===hh},fk=function(e){return e._tag===dh},Gi=lf,Wi=ak,Yi=ik;function Qi(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ck(e){if(Array.isArray(e))return e}function sk(e){if(Array.isArray(e))return Qi(e)}function lk(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function vk(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hk(e,r,t){return vk(e.prototype,r),e}function as(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function dk(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yk(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function _k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pk(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qu(e,r){return ck(e)||yk(e,r)||yh(e,r)||_k()}function Pn(e){return sk(e)||dk(e)||yh(e)||pk()}function yh(e,r){if(e){if(typeof e=="string")return Qi(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Qi(e,r)}}function mk(e){return new Rr(e)}function bk(){return mk(new Map)}var _h=Symbol.for("effect/FiberRefs"),gk=_h,Rr=function(){function e(r){lk(this,e),as(this,"locals",void 0),as(this,gk,_h),this.locals=r}return hk(e,[{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),Sk=function(e,r,t){for(var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=e,a=r,i=t,o=n,f=void 0;f===void 0;)if(ye(a)&&ye(i)){var c=pe(a)[0],l=Kr(a),v=pe(i)[0],h=pe(i)[1],y=Kr(i);c.startTimeMillis<v.startTimeMillis?(i=y,o=!0):c.startTimeMillis>v.startTimeMillis?a=l:c.id<v.id?(i=y,o=!0):c.id>v.id?a=l:f=[h,o]}else f=[u.initial,!0];return f},Ok=s(3,function(e,r,t){var n=new Map(e.locals);return t.locals.forEach(function(u,a){var i=u[0][1];if(!u[0][0][T](r)){if(!n.has(a)){if(P(i,a.initial))return;n.set(a,[[r,a.join(a.initial,i)]]);return}var o=n.get(a),f=Qu(Sk(a,o,u),2),c=f[0],l=f[1];if(l){var v=a.diff(c,i),h=o[0][1],y=a.join(h,a.patch(v)(h));if(!P(h,y)){var _,p=o[0][0];p[T](r)?_=[[p,y]].concat(Pn(o.slice(1))):_=[[r,y]].concat(Pn(o)),n.set(a,_)}}}}),new Rr(n)}),wk=s(2,function(e,r){var t=new Map;return ph(e,t,r),new Rr(t)}),ph=function(e,r,t){e.locals.forEach(function(n,u){var a=n[0][1],i=u.patch(u.fork)(a);P(a,i)?r.set(u,n):r.set(u,[[t,i]].concat(Pn(n)))})},mh=s(2,function(e,r){var t=new Map(e.locals);return t.delete(r),new Rr(t)}),$k=s(2,function(e,r){return e.locals.has(r)?E(pe(e.locals.get(r))[1]):O()}),Tn=s(2,function(e,r){return d($k(e,r),Je(function(){return r.initial}))}),Xi=s(2,function(e,r){var t=r.fiberId,n=r.fiberRef,u=r.value;if(e.locals.size===0)return new Rr(new Map([[n,[[t,u]]]]));var a=new Map(e.locals);return Zi(a,t,n,u),new Rr(a)}),Zi=function(e,r,t,n){var u,a=(u=e.get(t))!==null&&u!==void 0?u:[],i;if(ye(a)){var o=Qu(pe(a),2),f=o[0],c=o[1];if(f[T](r)){if(P(c,n))return;i=[[r,n]].concat(Pn(a.slice(1)))}else i=[[r,n]].concat(Pn(a))}else i=[[r,n]];e.set(t,i)},kk=s(2,function(e,r){var t=r.entries,n=r.forkAs;if(e.locals.size===0)return new Rr(new Map(t));var u=new Map(e.locals);return n!==void 0&&ph(e,u,n),t.forEach(function(a){var i=Qu(a,2),o=i[0],f=i[1];f.length===1?Zi(u,f[0][0],o,f[0][1]):f.forEach(function(c){var l=Qu(c,2),v=l[0],h=l[1];Zi(u,v,o,h)})}),new Rr(u)}),Ik=Tn,Ek=kk,Pk=bk;function is(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Tk(e){if(Array.isArray(e))return e}function Ak(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function Rk(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function os(e,r){return Tk(e)||Ak(e,r)||Mk(e,r)||Rk()}function Mk(e,r){if(e){if(typeof e=="string")return is(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return is(e,r)}}var bh="Empty",gh="Add",Sh="Remove",Oh="Update",wh="AndThen",Fk={_tag:bh},Ck=function(e,r){var t=new Map(e.locals),n=Fk,u=!0,a=!1,i=void 0;try{for(var o=r.locals.entries()[Symbol.iterator](),f;!(u=(f=o.next()).done);u=!0){var c=os(f.value,2),l=c[0],v=c[1],h=pe(v)[1],y=t.get(l);if(y!==void 0){var _=pe(y)[1];P(_,h)||(n=oi({_tag:Oh,fiberRef:l,patch:l.diff(_,h)})(n))}else n=oi({_tag:gh,fiberRef:l,value:h})(n);t.delete(l)}}catch(ce){a=!0,i=ce}finally{try{!u&&o.return!=null&&o.return()}finally{if(a)throw i}}var p=!0,S=!1,m=void 0;try{for(var b=t.entries()[Symbol.iterator](),R;!(p=(R=b.next()).done);p=!0){var H=os(R.value,1),L=H[0];n=oi({_tag:Sh,fiberRef:L})(n)}}catch(ce){S=!0,m=ce}finally{try{!p&&b.return!=null&&b.return()}finally{if(S)throw m}}return n},oi=s(2,function(e,r){return{_tag:wh,first:e,second:r}}),Nk=s(3,function(e,r,t){for(var n=t,u=qe(e);ye(u);){var a=pe(u),i=Kr(u);switch(a._tag){case bh:{u=i;break}case gh:{n=Xi(n,{fiberId:r,fiberRef:a.fiberRef,value:a.value}),u=i;break}case Sh:{n=mh(n,a.fiberRef),u=i;break}case Oh:{var o=Tn(n,a.fiberRef);n=Xi(n,{fiberId:r,fiberRef:a.fiberRef,value:a.fiberRef.patch(a.patch)(o)}),u=i;break}case wh:{u=Cu(a.first)(Cu(a.second)(i));break}}}return n}),jk=Ck,xk=Nk;function vf(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Dk(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hf(e,r,t){return r&&Dk(e.prototype,r),e}function _r(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var La="effect/FiberStatus",it=Symbol.for(La),Xu="Done",fs="Running",cs="Suspended",Lk=Q("".concat(La,"-").concat(Xu)),qk=it,Uk=A,Bk=T,Hk=function(){function e(){vf(this,e),_r(this,qk,it),_r(this,"_tag",Xu)}return hf(e,[{key:Uk,value:function(){return Lk}},{key:Bk,value:function(t){return df(t)&&t._tag===Xu}}]),e}(),Jk=it,Vk=A,Kk=T,zk=function(){function e(r){vf(this,e),_r(this,"runtimeFlags",void 0),_r(this,Jk,it),_r(this,"_tag",fs),this.runtimeFlags=r}return hf(e,[{key:Vk,value:function(){return d(g(La),N(g(this._tag)),N(g(this.runtimeFlags)),U(this))}},{key:Kk,value:function(t){return df(t)&&t._tag===fs&&this.runtimeFlags===t.runtimeFlags}}]),e}(),Gk=it,Wk=A,Yk=T,Qk=function(){function e(r,t){vf(this,e),_r(this,"runtimeFlags",void 0),_r(this,"blockingOn",void 0),_r(this,Gk,it),_r(this,"_tag",cs),this.runtimeFlags=r,this.blockingOn=t}return hf(e,[{key:Wk,value:function(){return d(g(La),N(g(this._tag)),N(g(this.runtimeFlags)),N(g(this.blockingOn)),U(this))}},{key:Yk,value:function(t){return df(t)&&t._tag===cs&&this.runtimeFlags===t.runtimeFlags&&P(this.blockingOn,t.blockingOn)}}]),e}(),Xk=new Hk,Zk=function(e){return new zk(e)},e0=function(e,r){return new Qk(e,r)},df=function(e){return F(e,it)},r0=function(e){return e._tag===Xu},t0=Xk,$h=Zk,n0=e0,u0=r0,a0=BO,i0=HO,o0=JO,f0=VO,c0=Hv,s0=Jv,l0=KO,v0=zO,h0=d(Et,el(function(e){return e.ordinal})),d0=rl(h0),y0=function(e){switch(e){case"All":return a0;case"Debug":return s0;case"Error":return o0;case"Fatal":return i0;case"Info":return c0;case"Trace":return l0;case"None":return v0;case"Warning":return f0}};function _0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e,r,t){return r=Zu(r),g0(e,Ih()?Reflect.construct(r,t||[],Zu(e).constructor):r.apply(e,t))}function ot(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function p0(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yf(e,r,t){return r&&p0(e.prototype,r),e}function m0(e,r){for(var t in r){var n=r[t];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t,n)}if(Object.getOwnPropertySymbols)for(var u=Object.getOwnPropertySymbols(r),a=0;a<u.length;a++){var i=u[a],n=r[i];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i,n)}return e}function C(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Zu(e){return Zu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zu(e)}function Xn(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&eo(e,r)}function ea(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){C(e,u,t[u])})}return e}function b0(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function _f(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function g0(e,r){return r&&(kh(r)==="object"||typeof r=="function")?r:_0(e)}function eo(e,r){return eo=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},eo(e,r)}function kh(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function Ih(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ih=function(){return!!e})()}var S0=Symbol.for("effect/Micro"),ra=Symbol.for("effect/Micro/MicroExit"),Eh=Symbol.for("effect/Micro/MicroCause"),O0={_E:re},w0=Eh,$0=B,Ph=function(e){Xn(r,e);function r(t,n,u){ot(this,r);var a,i="MicroCause.".concat(t),o,f,c;if(n instanceof globalThis.Error){o="(".concat(i,") ").concat(n.name),f=n.message;var l=f.split(`
`).length;c=n.stack?"(".concat(i,") ").concat(n.stack.split(`
`).slice(0,l+3).join(`
`)):"".concat(o,": ").concat(f)}else o=i,f=wt(n,0),c="".concat(o,": ").concat(f);return u.length>0&&(c+=`
    `.concat(u.join(`
    `))),a=Qn(this,r,[f]),C(a,"_tag",void 0),C(a,"traces",void 0),C(a,w0,void 0),a._tag=t,a.traces=u,a[Eh]=O0,a.name=o,a.stack=c,a}return yf(r,[{key:"pipe",value:function(){return I(this,arguments)}},{key:"toString",value:function(){return this.stack}},{key:$0,value:function(){return this.stack}}]),r}(globalThis.Error),k0=function(e){Xn(r,e);function r(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];ot(this,r);var u;return u=Qn(this,r,["Die",t,n]),C(u,"defect",void 0),u.defect=t,u}return r}(Ph),I0=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new k0(e,r)},E0=function(e){Xn(r,e);function r(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ot(this,r),Qn(this,r,["Interrupt","interrupted",t])}return r}(Ph),P0=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new E0(e)},T0=function(e){return e._tag==="Interrupt"},Th=Symbol.for("effect/Micro/MicroFiber"),A0={_A:re,_E:re},R0=Th,M0=function(){function e(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;ot(this,e),C(this,"context",void 0),C(this,"interruptible",void 0),C(this,R0,void 0),C(this,"_stack",[]),C(this,"_observers",[]),C(this,"_exit",void 0),C(this,"_children",void 0),C(this,"currentOpCount",0),C(this,"_interrupted",!1),C(this,"_yielded",void 0),this.context=r,this.interruptible=t,this[Th]=A0}return yf(e,[{key:"getRef",value:function(t){return Wm(this.context,t)}},{key:"addObserver",value:function(t){var n=this;return this._exit?(t(this._exit),Fs):(this._observers.push(t),function(){var u=n._observers.indexOf(t);u>=0&&n._observers.splice(u,1)})}},{key:"unsafeInterrupt",value:function(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(Sf))}},{key:"unsafePoll",value:function(){return this._exit}},{key:"evaluate",value:function(t){if(!this._exit){if(this._yielded!==void 0){var n=this._yielded;this._yielded=void 0,n()}var u=this.runLoop(t);if(u!==hu){var a=ss.interruptChildren&&ss.interruptChildren(this);if(a!==void 0)return this.evaluate(na(a,function(){return u}));this._exit=u;for(var i=0;i<this._observers.length;i++)this._observers[i](u);this._observers.length=0}}}},{key:"runLoop",value:function(t){var n=!1,u=t;this.currentOpCount=0;try{for(var a,i=function(){if(a.currentOpCount++,!n&&a.getRef(Of).shouldYield(a)){n=!0;var f=u;u=na(x0,function(){return f})}if(u=u[ro](a),u===hu){var c=a._yielded;return ra in c?(a._yielded=void 0,{v:c}):{v:hu}}};;){var o=(a=this,i());if(kh(o)==="object")return o.v}}catch(f){return F(u,ro)?to(f):to("MicroFiber.runLoop: Not a valid effect: ".concat(String(u)))}}},{key:"getCont",value:function(t){for(;;){var n=this._stack.pop();if(!n)return;var u=n[ta]&&n[ta](this);if(u)return C({},t,u);if(n[t])return n}}},{key:"yieldWith",value:function(t){return this._yielded=t,hu}},{key:"children",value:function(){var t;return(t=this._children)!==null&&t!==void 0?t:this._children=new Set}}]),e}(),ss=j("effect/Micro/fiberMiddleware",function(){return{interruptChildren:void 0}}),Ah=Symbol.for("effect/Micro/identifier"),ne=Symbol.for("effect/Micro/args"),ro=Symbol.for("effect/Micro/evaluate"),qt=Symbol.for("effect/Micro/successCont"),bt=Symbol.for("effect/Micro/failureCont"),ta=Symbol.for("effect/Micro/ensureCont"),hu=Symbol.for("effect/Micro/Yield"),F0={_A:re,_E:re,_R:re},Or,C0=_f(ea({},rk),(Or={_op:"Micro"},C(Or,S0,F0),C(Or,"pipe",function(){return I(this,arguments)}),C(Or,Symbol.iterator,function(){return new Ds(new Cn(this))}),C(Or,"toJSON",function(){return ea({_id:"Micro",op:this[Ah]},ne in this?{args:this[ne]}:void 0)}),C(Or,"toString",function(){return te(this)}),C(Or,B,function(){return te(this)}),Or));function N0(e){return to("Micro.evaluate: Not implemented")}var qa=function(e){var r,t;return _f(ea({},C0),(t={},C(t,Ah,e.op),C(t,ro,(r=e.eval)!==null&&r!==void 0?r:N0),C(t,qt,e.contA),C(t,bt,e.contE),C(t,ta,e.ensure),t))},pf=function(e){var r=qa(e);return function(){var n=Object.create(r);return n[ne]=e.single===!1?arguments:arguments[0],n}},Rh=function(e){var r,t={},n=_f(ea({},qa(e)),(r={},C(r,ra,ra),C(r,"_tag",e.op),t[e.prop]=t[e.prop]||{},t[e.prop].get=function(){return this[ne]},C(r,"toJSON",function(){return C({_id:"MicroExit",_tag:e.op},e.prop,this[ne])}),C(r,T,function(u){return q0(u)&&u._tag===e.op&&P(this[ne],u[ne])}),C(r,A,function(){return U(this,N(Q(e.op))(g(this[ne])))}),m0(r,t),r));return function(a){var i=Object.create(n);return i[ne]=a,i[qt]=void 0,i[bt]=void 0,i[ta]=void 0,i}},mf=Rh({op:"Success",prop:"value",eval:function(e){var r=e.getCont(qt);return r?r[qt](this[ne],e):e.yieldWith(this)}}),Mh=Rh({op:"Failure",prop:"cause",eval:function(e){for(var r=e.getCont(bt);T0(this[ne])&&r&&e.interruptible;)r=e.getCont(bt);return r?r[bt](this[ne],e):e.yieldWith(this)}}),j0=pf({op:"Yield",eval:function(e){var r=!1,t;return e.getRef(Of).scheduleTask(function(){r||e.evaluate(U0)},(t=this[ne])!==null&&t!==void 0?t:0),e.yieldWith(function(){r=!0})}}),x0=j0(0),D0=mf(void 0),bf=pf({op:"WithMicroFiber",eval:function(e){return this[ne](e)}}),na=s(2,function(e,r){var t=Object.create(L0);return t[ne]=e,t[qt]=r,t}),L0=qa({op:"OnSuccess",eval:function(e){return e._stack.push(this),this[ne]}}),q0=function(e){return F(e,ra)},Fh=mf,gf=Mh,Sf=gf(P0()),to=function(e){return gf(I0(e))},U0=Fh(void 0),B0="setImmediate"in globalThis?globalThis.setImmediate:function(e){return setTimeout(e,0)},Ch=function(){function e(){var r=this;ot(this,e),C(this,"tasks",[]),C(this,"running",!1),C(this,"afterScheduled",function(){r.running=!1,r.runTasks()})}return yf(e,[{key:"scheduleTask",value:function(t,n){this.tasks.push(t),this.running||(this.running=!0,B0(this.afterScheduled))}},{key:"runTasks",value:function(){var t=this.tasks;this.tasks=[];for(var n=0,u=t.length;n<u;n++)t[n]()}},{key:"shouldYield",value:function(t){return t.currentOpCount>=t.getRef(V0)}},{key:"flush",value:function(){for(;this.tasks.length>0;)this.runTasks()}}]),e}(),H0=s(2,function(e,r){return bf(function(t){var n=t.context;return t.context=r(n),G0(e,function(){return t.context=n,D0})})}),J0=s(2,function(e,r){return H0(e,Yl(r))}),V0=function(e){Xn(r,e);function r(){return ot(this,r),Qn(this,r,arguments)}return r}(Ql()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:function(){return 2048}})),Of=function(e){Xn(r,e);function r(){return ot(this,r),Qn(this,r,arguments)}return r}(Ql()("effect/Micro/currentScheduler",{defaultValue:function(){return new Ch}})),K0=s(2,function(e,r){var t=Object.create(z0);return t[ne]=e,t[qt]=r.onSuccess,t[bt]=r.onFailure,t}),z0=qa({op:"OnSuccessAndFailure",eval:function(e){return e._stack.push(this),this[ne]}}),G0=s(2,function(e,r){return Y0(function(t){return K0(t(e),{onFailure:function(n){return na(r(gf(n)),function(){return Mh(n)})},onSuccess:function(n){return na(r(Fh(n)),function(){return mf(n)})}})})}),Nh=pf({op:"SetInterruptible",ensure:function(e){if(e.interruptible=this[ne],e._interrupted&&e.interruptible)return function(){return Sf}}}),W0=function(e){return bf(function(r){return r.interruptible?e:(r.interruptible=!0,r._stack.push(Nh(!1)),r._interrupted?Sf:e)})},Y0=function(e){return bf(function(r){return r.interruptible?(r.interruptible=!1,r._stack.push(Nh(!0)),e(W0)):e(re)})},Q0=function(e,r){var t,n=new M0(Of.context((t=void 0)!==null&&t!==void 0?t:new Ch));return n.evaluate(e),n};function ls(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function X0(e){if(Array.isArray(e))return e}function wf(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Z0(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $f(e,r,t){return r&&Z0(e.prototype,r),e}function gt(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function eI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function rI(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function jh(e,r){return X0(e)||eI(e,r)||tI(e,r)||rI()}function tI(e,r){if(e){if(typeof e=="string")return ls(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ls(e,r)}}var xh=function(){function e(){wf(this,e),gt(this,"buckets",[])}return $f(e,[{key:"scheduleTask",value:function(t,n){for(var u=this.buckets.length,a=void 0,i=0;i<u&&this.buckets[i][0]<=n;i++)a=this.buckets[i];a&&a[0]===n?a[1].push(t):i===u?this.buckets.push([n,[t]]):this.buckets.splice(i,0,[n,[t]])}}]),e}(),nI=function(){function e(r){wf(this,e),gt(this,"maxNextTickBeforeTimer",void 0),gt(this,"running",!1),gt(this,"tasks",new xh),this.maxNextTickBeforeTimer=r}return $f(e,[{key:"starveInternal",value:function(t){var n=this.tasks.buckets;this.tasks.buckets=[];var u=!0,a=!1,i=void 0;try{for(var o=n[Symbol.iterator](),f;!(u=(f=o.next()).done);u=!0)for(var c=jh(f.value,2),l=c[0],v=c[1],h=0;h<v.length;h++)v[h]()}catch(y){a=!0,i=y}finally{try{!u&&o.return!=null&&o.return()}finally{if(a)throw i}}this.tasks.buckets.length===0?this.running=!1:this.starve(t)}},{key:"starve",value:function(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;n>=this.maxNextTickBeforeTimer?setTimeout(function(){return t.starveInternal(0)},0):Promise.resolve(void 0).then(function(){return t.starveInternal(n+1)})}},{key:"shouldYield",value:function(t){return t.currentOpCount>t.getFiberRef(Kv)?t.getFiberRef(ja):!1}},{key:"scheduleTask",value:function(t,n){this.tasks.scheduleTask(t,n),this.running||(this.running=!0,this.starve())}}]),e}(),Dh=j(Symbol.for("effect/Scheduler/defaultScheduler"),function(){return new nI(2048)}),uI=function(){function e(){wf(this,e),gt(this,"tasks",new xh),gt(this,"deferred",!1)}return $f(e,[{key:"scheduleTask",value:function(t,n){this.deferred?Dh.scheduleTask(t,n):this.tasks.scheduleTask(t,n)}},{key:"shouldYield",value:function(t){return t.currentOpCount>t.getFiberRef(Kv)?t.getFiberRef(ja):!1}},{key:"flush",value:function(){for(;this.tasks.buckets.length>0;){var t=this.tasks.buckets;this.tasks.buckets=[];var n=!0,u=!1,a=void 0;try{for(var i=t[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0)for(var f=jh(o.value,2),c=f[0],l=f[1],v=0;v<l.length;v++)l[v]()}catch(h){u=!0,a=h}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}}this.deferred=!0}}]),e}(),Lh=j(Symbol.for("effect/FiberRef/currentScheduler"),function(){return Ee(Dh)}),qh=j(Symbol.for("effect/FiberRef/currentRequestMap"),function(){return Ee(new Map)}),vs=function(e,r,t,n){switch(e){case void 0:return r();case"unbounded":return t();case"inherit":return of(aw,function(u){return u==="unbounded"?t():u>1?n(u):r()});default:return e>1?n(e):r()}},Uh=function(e){return e.replace(/[\s="]/g,"_")},aI=function(e){return function(r){var t=Uh(r.label);return"".concat(t,"=").concat(e-r.startTime,"ms")}};function iI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function oI(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fI(e,r,t){return oI(e.prototype,r),e}function du(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Bh="effect/MetricLabel",kf=Symbol.for(Bh),cI=kf,sI=A,lI=T,vI=function(){function e(r,t){iI(this,e),du(this,"key",void 0),du(this,"value",void 0),du(this,cI,kf),du(this,"_hash",void 0),this.key=r,this.value=t,this._hash=Q(Bh+this.key+this.value)}return fI(e,[{key:sI,value:function(){return this._hash}},{key:lI,value:function(t){return dI(t)&&this.key===t.key&&this.value===t.value}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),hI=function(e,r){return new vI(e,r)},dI=function(e){return F(e,kf)},yI=function(e){var r,t=void 0;return typeof e=="function"?r=e:(r=e.try,t=e.catch),r.length>=1?Xr(function(n,u){try{r(u).then(function(a){return n(J(a))},function(a){return n(t?dt(function(){return t(a)}):oe(new yn(a)))})}catch(a){n(t?dt(function(){return t(a)}):oe(new yn(a)))}}):Xr(function(n){try{r().then(function(u){return n(J(u))},function(u){return n(t?dt(function(){return t(u)}):oe(new yn(u)))})}catch(u){n(t?dt(function(){return t(u)}):oe(new yn(u)))}})},aR=Da,iR=D,oR=ff,fR=J,If="InterruptSignal",Ef="Stateful",Pf="Resume",Tf="YieldNow",fi=function(e){return{_tag:If,cause:e}},Iu=function(e){return{_tag:Ef,onFiber:e}},ct=function(e){return{_tag:Pf,effect:e}},_I=function(){return{_tag:Tf}};function Hh(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function pI(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jh(e,r,t){return r&&pI(e.prototype,r),e}function St(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var mI="effect/FiberScope",Ua=Symbol.for(mI),bI=Ua,gI=function(){function e(){Hh(this,e),St(this,bI,Ua),St(this,"fiberId",Yr),St(this,"roots",new Set)}return Jh(e,[{key:"add",value:function(t,n){var u=this;this.roots.add(n),n.addObserver(function(){u.roots.delete(n)})}}]),e}(),SI=Ua,OI=function(){function e(r,t){Hh(this,e),St(this,"fiberId",void 0),St(this,"parent",void 0),St(this,SI,Ua),this.fiberId=r,this.parent=t}return Jh(e,[{key:"add",value:function(t,n){this.parent.tell(Iu(function(u){u.addChild(n),n.addObserver(function(){u.removeChild(n)})}))}}]),e}(),wI=function(e){return new OI(e.id(),e)},Af=j(Symbol.for("effect/FiberScope/Global"),function(){return new gI});function no(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function hs(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){no(e,u,t[u])})}return e}function $I(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function ds(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}var kI="effect/Fiber",Vh=Symbol.for(kI),Kh={_E:function(e){return e},_A:function(e){return e}},yu,II=(yu={},no(yu,Vh,Kh),no(yu,"pipe",function(){return I(this,arguments)}),yu),EI="effect/Fiber",PI=Symbol.for(EI),Rf=function(e){return Uv(jv(e.await),e.inheritAll)};ds(hs(ds(hs({},xn),{commit:function(){return Rf(this)}}),II),{id:function(){return Yr},await:ei,children:x([]),inheritAll:ei,poll:x(O()),interruptAsFork:function(){return ei}});var Cr="effect/FiberCurrent",ys={},_s;function TI(){if(_s)return ys;_s=1;var e=lo(),r=Jd(),t=Vd();return e({target:"String",proto:!0,forced:t("bold")},{bold:function(){return r(this,"b","","")}}),ys}TI();function ps(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function AI(e){if(Array.isArray(e))return e}function Ot(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function RI(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function MI(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function FI(e,r){return AI(e)||RI(e,r)||CI(e,r)||MI()}function ms(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function CI(e,r){if(e){if(typeof e=="string")return ps(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ps(e,r)}}var NI="effect/Logger",zh=Symbol.for(NI),Gh={_Message:function(e){return e},_Output:function(e){return e}},Mf=function(e){var r;return r={},Ot(r,zh,Gh),Ot(r,"log",e),Ot(r,"pipe",function(){return I(this,arguments)}),r},sn;sn={},Ot(sn,zh,Gh),Ot(sn,"log",Fs),Ot(sn,"pipe",function(){return I(this,arguments)});var jI=/^[^\s"=]*$/,xI=function(e,r){return function(t){var n=t.annotations,u=t.cause,a=t.date,i=t.fiberId,o=t.logLevel,f=t.message,c=t.spans,l=function(ae){return ae.match(jI)?ae:e(ae)},v=function(ae,ar){return"".concat(Uh(ae),"=").concat(l(ar))},h=function(ae,ar){return" "+v(ae,ar)},y=v("timestamp",a.toISOString());y+=h("level",o.label),y+=h("fiber",nv(i));for(var _=N_(f),p=0;p<_.length;p++)y+=h("message",wt(_[p],r));vm(u)||(y+=h("cause",Sa(u,{renderErrorCause:!0})));var S=!0,m=!1,b=void 0;try{for(var R=c[Symbol.iterator](),H;!(S=(H=R.next()).done);S=!0){var L=H.value;y+=" "+aI(a.getTime())(L)}}catch(ae){m=!0,b=ae}finally{try{!S&&R.return!=null&&R.return()}finally{if(m)throw b}}var ce=!0,Fe=!1,X=void 0;try{for(var se=n[Symbol.iterator](),ue;!(ce=(ue=se.next()).done);ce=!0){var Ce=FI(ue.value,2),Ne=Ce[0],Pe=Ce[1];y+=h(Ne,wt(Pe,r))}}catch(ae){Fe=!0,X=ae}finally{try{!ce&&se.return!=null&&se.return()}finally{if(Fe)throw X}}return y}},DI=function(e){return'"'.concat(e.replace(/\\([\s\S])|(")/g,"\\$1$2"),'"')},LI=Mf(xI(DI)),qI=(typeof process>"u"?"undefined":ms(process))==="object"&&process!==null&&ms(process.stdout)==="object"&&process.stdout!==null;qI&&process.stdout.isTTY;function UI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function BI(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HI(e,r,t){return BI(e.prototype,r),e}function ci(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Wh="effect/MetricBoundaries",Ff=Symbol.for(Wh),JI=Ff,VI=A,KI=T,zI=function(){function e(r){UI(this,e),ci(this,"values",void 0),ci(this,JI,Ff),ci(this,"_hash",void 0),this.values=r,this._hash=d(Q(Wh),N(Bt(this.values)))}return HI(e,[{key:VI,value:function(){return this._hash}},{key:KI,value:function(t){return GI(t)&&P(this.values,t.values)}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),GI=function(e){return F(e,Ff)},WI=function(e){var r=d(e,ol(Ie(Number.POSITIVE_INFINITY)),rp);return new zI(r)},YI=function(e){return d(C_(e.count-1,function(r){return e.start*Math.pow(e.factor,r)}),Ao,WI)};function Yh(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function QI(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qh(e,r,t){return r&&QI(e.prototype,r),e}function hr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var XI="effect/MetricKeyType",Xh=Symbol.for(XI),Zh="effect/MetricKeyType/Counter",Cf=Symbol.for(Zh),ZI="effect/MetricKeyType/Frequency",eE=Symbol.for(ZI),rE="effect/MetricKeyType/Gauge",tE=Symbol.for(rE),ed="effect/MetricKeyType/Histogram",Nf=Symbol.for(ed),nE="effect/MetricKeyType/Summary",uE=Symbol.for(nE),rd={_In:function(e){return e},_Out:function(e){return e}},aE=Xh,iE=Cf,oE=A,fE=T,cE=function(){function e(r,t){Yh(this,e),hr(this,"incremental",void 0),hr(this,"bigint",void 0),hr(this,aE,rd),hr(this,iE,Cf),hr(this,"_hash",void 0),this.incremental=r,this.bigint=t,this._hash=Q(Zh)}return Qh(e,[{key:oE,value:function(){return this._hash}},{key:fE,value:function(t){return td(t)}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),sE=Xh,lE=Nf,vE=A,hE=T,dE=function(){function e(r){Yh(this,e),hr(this,"boundaries",void 0),hr(this,sE,rd),hr(this,lE,Nf),hr(this,"_hash",void 0),this.boundaries=r,this._hash=d(Q(ed),N(g(this.boundaries)))}return Qh(e,[{key:vE,value:function(){return this._hash}},{key:hE,value:function(t){return nd(t)&&P(this.boundaries,t.boundaries)}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),yE=function(e){var r,t;return new cE((r=e==null?void 0:e.incremental)!==null&&r!==void 0?r:!1,(t=e==null?void 0:e.bigint)!==null&&t!==void 0?t:!1)},_E=function(e){return new dE(e)},td=function(e){return F(e,Cf)},pE=function(e){return F(e,eE)},mE=function(e){return F(e,tE)},nd=function(e){return F(e,Nf)},bE=function(e){return F(e,uE)};function gE(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function SE(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OE(e,r,t){return SE(e.prototype,r),e}function st(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var wE="effect/MetricKey",ud=Symbol.for(wE),$E={_Type:function(e){return e}},kE=To(P),IE=ud,EE=A,PE=T,jf=function(){function e(r,t,n){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];gE(this,e),st(this,"name",void 0),st(this,"keyType",void 0),st(this,"description",void 0),st(this,"tags",void 0),st(this,IE,$E),st(this,"_hash",void 0),this.name=r,this.keyType=t,this.description=n,this.tags=u,this._hash=d(Q(this.name+this.description),N(g(this.keyType)),N(Bt(this.tags)))}return OE(e,[{key:EE,value:function(){return this._hash}},{key:PE,value:function(t){return TE(t)&&this.name===t.name&&P(this.keyType,t.keyType)&&P(this.description,t.description)&&kE(this.tags,t.tags)}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),TE=function(e){return F(e,ud)},AE=function(e,r){return new jf(e,yE(r),Io(r==null?void 0:r.description))},RE=function(e,r,t){return new jf(e,_E(r),Io(t))},ME=s(2,function(e,r){return r.length===0?e:new jf(e.name,e.keyType,e.description,gu(e.tags,r))});function ad(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function FE(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function id(e,r,t){return r&&FE(e.prototype,r),e}function Ue(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var bs=Symbol.for("effect/MutableHashMap"),wr,CE=(wr={},Ue(wr,bs,bs),Ue(wr,Symbol.iterator,function(){return new jE(this)}),Ue(wr,"toString",function(){return te(this.toJSON())}),Ue(wr,"toJSON",function(){return{_id:"MutableHashMap",values:Array.from(this).map(z)}}),Ue(wr,B,function(){return this.toJSON()}),Ue(wr,"pipe",function(){return I(this,arguments)}),wr),NE=Symbol.iterator,jE=function(){function e(r){ad(this,e),Ue(this,"self",void 0),Ue(this,"referentialIterator",void 0),Ue(this,"bucketIterator",void 0),this.self=r,this.referentialIterator=r.referential[Symbol.iterator]()}return id(e,[{key:"next",value:function(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();var t=this.referentialIterator.next();return t.done?(this.bucketIterator=new xE(this.self.buckets.values()),this.next()):t}},{key:NE,value:function(){return new e(this.self)}}]),e}(),xE=function(){function e(r){ad(this,e),Ue(this,"backing",void 0),Ue(this,"currentBucket",void 0),this.backing=r}return id(e,[{key:"next",value:function(){if(this.currentBucket===void 0){var t=this.backing.next();if(t.done)return t;this.currentBucket=t.value[Symbol.iterator]()}var n=this.currentBucket.next();return n.done?(this.currentBucket=void 0,this.next()):n}}]),e}(),DE=function(){var e=Object.create(CE);return e.referential=new Map,e.buckets=new Map,e.bucketsSize=0,e},xr=s(2,function(e,r){if(Ru(r)===!1)return e.referential.has(r)?E(e.referential.get(r)):O();var t=r[A](),n=e.buckets.get(t);return n===void 0?O():LE(e,n,r)}),LE=function(e,r,t){for(var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=0,a=r.length;u<a;u++)if(t[T](r[u][0])){var i=r[u][1];return n&&(r.splice(u,1),e.bucketsSize--),E(i)}return O()},ln=s(2,function(e,r){return W(xr(e,r))}),vn=s(3,function(e,r,t){if(Ru(r)===!1)return e.referential.set(r,t),e;var n=r[A](),u=e.buckets.get(n);return u===void 0?(e.buckets.set(n,[[r,t]]),e.bucketsSize++,e):(qE(e,u,r),u.push([r,t]),e.bucketsSize++,e)}),qE=function(e,r,t){for(var n=0,u=r.length;n<u;n++)if(t[T](r[n][0])){r.splice(n,1),e.bucketsSize--;return}};function Zn(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function UE(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eu(e,r,t){return r&&UE(e.prototype,r),e}function q(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var BE="effect/MetricState",ru=Symbol.for(BE),od="effect/MetricState/Counter",xf=Symbol.for(od),fd="effect/MetricState/Frequency",Df=Symbol.for(fd),cd="effect/MetricState/Gauge",Lf=Symbol.for(cd),sd="effect/MetricState/Histogram",qf=Symbol.for(sd),ld="effect/MetricState/Summary",Uf=Symbol.for(ld),tu={_A:function(e){return e}},HE=ru,JE=xf,VE=A,KE=T,zE=function(){function e(r){Zn(this,e),q(this,"count",void 0),q(this,HE,tu),q(this,JE,xf),this.count=r}return eu(e,[{key:VE,value:function(){return d(g(od),N(g(this.count)),U(this))}},{key:KE,value:function(t){return g1(t)&&this.count===t.count}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),GE=To(P),WE=ru,YE=Df,QE=A,XE=T,ZE=function(){function e(r){Zn(this,e),q(this,"occurrences",void 0),q(this,WE,tu),q(this,YE,Df),q(this,"_hash",void 0),this.occurrences=r}return eu(e,[{key:QE,value:function(){return d(Q(fd),N(Bt(G(this.occurrences.entries()))),U(this))}},{key:XE,value:function(t){return S1(t)&&GE(G(this.occurrences.entries()),G(t.occurrences.entries()))}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),e1=ru,r1=Lf,t1=A,n1=T,u1=function(){function e(r){Zn(this,e),q(this,"value",void 0),q(this,e1,tu),q(this,r1,Lf),this.value=r}return eu(e,[{key:t1,value:function(){return d(g(cd),N(g(this.value)),U(this))}},{key:n1,value:function(t){return O1(t)&&this.value===t.value}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),a1=ru,i1=qf,o1=A,f1=T,c1=function(){function e(r,t,n,u,a){Zn(this,e),q(this,"buckets",void 0),q(this,"count",void 0),q(this,"min",void 0),q(this,"max",void 0),q(this,"sum",void 0),q(this,a1,tu),q(this,i1,qf),this.buckets=r,this.count=t,this.min=n,this.max=u,this.sum=a}return eu(e,[{key:o1,value:function(){return d(g(sd),N(g(this.buckets)),N(g(this.count)),N(g(this.min)),N(g(this.max)),N(g(this.sum)),U(this))}},{key:f1,value:function(t){return w1(t)&&P(this.buckets,t.buckets)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),s1=ru,l1=Uf,v1=A,h1=T,d1=function(){function e(r,t,n,u,a,i){Zn(this,e),q(this,"error",void 0),q(this,"quantiles",void 0),q(this,"count",void 0),q(this,"min",void 0),q(this,"max",void 0),q(this,"sum",void 0),q(this,s1,tu),q(this,l1,Uf),this.error=r,this.quantiles=t,this.count=n,this.min=u,this.max=a,this.sum=i}return eu(e,[{key:v1,value:function(){return d(g(ld),N(g(this.error)),N(g(this.quantiles)),N(g(this.count)),N(g(this.min)),N(g(this.max)),N(g(this.sum)),U(this))}},{key:h1,value:function(t){return $1(t)&&this.error===t.error&&P(this.quantiles,t.quantiles)&&this.count===t.count&&this.min===t.min&&this.max===t.max&&this.sum===t.sum}},{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),y1=function(e){return new zE(e)},_1=function(e){return new ZE(e)},p1=function(e){return new u1(e)},m1=function(e){return new c1(e.buckets,e.count,e.min,e.max,e.sum)},b1=function(e){return new d1(e.error,e.quantiles,e.count,e.min,e.max,e.sum)},g1=function(e){return F(e,xf)},S1=function(e){return F(e,Df)},O1=function(e){return F(e,Lf)},w1=function(e){return F(e,qf)},$1=function(e){return F(e,Uf)};function gs(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function k1(e){if(Array.isArray(e))return e}function uo(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function I1(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function E1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P1(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){uo(e,u,t[u])})}return e}function si(e,r){return k1(e)||I1(e,r)||T1(e,r)||E1()}function T1(e,r){if(e){if(typeof e=="string")return gs(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gs(e,r)}}var A1="effect/MetricHook",R1=Symbol.for(A1),M1={_In:function(e){return e},_Out:function(e){return e}},nu=function(e){var r;return P1((r={},uo(r,R1,M1),uo(r,"pipe",function(){return I(this,arguments)}),r),e)},Ss=BigInt(0),F1=function(e){var r=e.keyType.bigint?Ss:0,t=e.keyType.incremental?e.keyType.bigint?function(u){return u>=Ss}:function(u){return u>=0}:function(u){return!0},n=function(u){t(u)&&(r=r+u)};return nu({get:function(){return y1(r)},update:n,modify:n})},C1=function(e){var r=new Map,t=!0,n=!1,u=void 0;try{for(var a=e.keyType.preregisteredWords[Symbol.iterator](),i;!(t=(i=a.next()).done);t=!0){var o=i.value;r.set(o,0)}}catch(c){n=!0,u=c}finally{try{!t&&a.return!=null&&a.return()}finally{if(n)throw u}}var f=function(c){var l,v=(l=r.get(c))!==null&&l!==void 0?l:0;r.set(c,v+1)};return nu({get:function(){return _1(r)},update:f,modify:f})},N1=function(e,r){var t=r;return nu({get:function(){return p1(t)},update:function(n){t=n},modify:function(n){t=t+n}})},j1=function(e){var r=e.keyType.boundaries.values,t=r.length,n=new Uint32Array(t+1),u=new Float32Array(t),a=0,i=0,o=Number.MAX_VALUE,f=Number.MIN_VALUE;d(r,Nu(Et),yt(function(v,h){u[h]=v}));var c=function(v){for(var h=0,y=t;h!==y;){var _=Math.floor(h+(y-h)/2),p=u[_];v<=p?y=_:h=_,y===h+1&&(v<=u[h]?y=h:h=y)}n[h]=n[h]+1,a=a+1,i=i+v,v<o&&(o=v),v>f&&(f=v)},l=function(){for(var v=Eo(t),h=0,y=0;y<t;y++){var _=u[y],p=n[y];h=h+p,v[y]=[_,h]}return v};return nu({get:function(){return m1({buckets:l(),count:a,min:o,max:f,sum:i})},update:c,modify:c})},x1=function(e){var r=e.keyType,t=r.error,n=r.maxAge,u=r.maxSize,a=r.quantiles,i=d(a,Nu(Et)),o=Eo(u),f=0,c=0,l=0,v=Number.MAX_VALUE,h=Number.MIN_VALUE,y=function(p){for(var S=[],m=0;m!==u-1;){var b=o[m];if(b!=null){var R=si(b,2),H=R[0],L=R[1],ce=Ti(p-H);gb(ce,fb)&&ce<=n&&S.push(L)}m=m+1}return D1(t,i,Nu(S,Et))},_=function(p,S){if(u>0){f=f+1;var m=f%u;o[m]=[S,p]}c=c+1,l=l+p,p<v&&(v=p),p>h&&(h=p)};return nu({get:function(){return b1({error:t,quantiles:y(Date.now()),count:c,min:v,max:h,sum:l})},update:function(p){var S=si(p,2),m=S[0],b=S[1];return _(m,b)},modify:function(p){var S=si(p,2),m=S[0],b=S[1];return _(m,b)}})},D1=function(e,r,t){var n=t.length;if(!ye(r))return It();var u=r[0],a=r.slice(1),i=Os(e,n,O(),0,u,t),o=qe(i);return a.forEach(function(f){o.push(Os(e,n,i.value,i.consumed,f,i.rest))}),yt(o,function(f){return[f.quantile,f.value]})},Os=function(e,r,t,n,u,a){for(var i=e,o=r,f=t,c=n,l=u,v=a,h=e,y=r,_=t,p=n,S=u,m=a;;){if(!ye(v))return{quantile:l,value:O(),consumed:c,rest:[]};if(l===1)return{quantile:l,value:E(Po(v)),consumed:c+v.length,rest:[]};var b=J_(v,function(X){return X<=v[0]}),R=l*o,H=i/2*R,L=c+b[0].length,ce=Math.abs(L-R);if(L<R-H){h=i,y=o,_=_n(v),p=L,S=l,m=b[1],i=h,o=y,f=_,c=p,l=S,v=m;continue}if(L>R+H)return{quantile:l,value:f,consumed:c,rest:v};switch(f._tag){case"None":{h=i,y=o,_=_n(v),p=L,S=l,m=b[1],i=h,o=y,f=_,c=p,l=S,v=m;continue}case"Some":{var Fe=Math.abs(R-f.value);if(ce<Fe){h=i,y=o,_=_n(v),p=L,S=l,m=b[1],i=h,o=y,f=_,c=p,l=S,v=m;continue}return{quantile:l,value:E(f.value),consumed:c,rest:v}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")};function _u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var L1="effect/MetricPair",q1=Symbol.for(L1),U1={_Type:function(e){return e}},B1=function(e,r){var t;return t={},_u(t,q1,U1),_u(t,"metricKey",e),_u(t,"metricState",r),_u(t,"pipe",function(){return I(this,arguments)}),t};function ws(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function H1(e){if(Array.isArray(e))return e}function J1(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function V1(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function K1(e,r,t){return V1(e.prototype,r),e}function $s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function z1(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function G1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function W1(e,r){return H1(e)||z1(e,r)||Y1(e,r)||G1()}function Y1(e,r){if(e){if(typeof e=="string")return ws(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ws(e,r)}}var Q1="effect/MetricRegistry",vd=Symbol.for(Q1),X1=vd,Z1=function(){function e(){J1(this,e),$s(this,X1,vd),$s(this,"map",DE())}return K1(e,[{key:"snapshot",value:function(){var t=[],n=!0,u=!1,a=void 0;try{for(var i=this.map[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var f=W1(o.value,2),c=f[0],l=f[1];t.push(B1(c,l.get()))}}catch(v){u=!0,a=v}finally{try{!n&&i.return!=null&&i.return()}finally{if(u)throw a}}return t}},{key:"get",value:function(t){var n=d(this.map,xr(t),jr);if(n==null){if(td(t.keyType))return this.getCounter(t);if(mE(t.keyType))return this.getGauge(t);if(pE(t.keyType))return this.getFrequency(t);if(nd(t.keyType))return this.getHistogram(t);if(bE(t.keyType))return this.getSummary(t);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return n}},{key:"getCounter",value:function(t){var n=d(this.map,xr(t),jr);if(n==null){var u=F1(t);d(this.map,ln(t))||d(this.map,vn(t,u)),n=u}return n}},{key:"getFrequency",value:function(t){var n=d(this.map,xr(t),jr);if(n==null){var u=C1(t);d(this.map,ln(t))||d(this.map,vn(t,u)),n=u}return n}},{key:"getGauge",value:function(t){var n=d(this.map,xr(t),jr);if(n==null){var u=N1(t,t.keyType.bigint?BigInt(0):0);d(this.map,ln(t))||d(this.map,vn(t,u)),n=u}return n}},{key:"getHistogram",value:function(t){var n=d(this.map,xr(t),jr);if(n==null){var u=j1(t);d(this.map,ln(t))||d(this.map,vn(t,u)),n=u}return n}},{key:"getSummary",value:function(t){var n=d(this.map,xr(t),jr);if(n==null){var u=x1(t);d(this.map,ln(t))||d(this.map,vn(t,u)),n=u}return n}}]),e}(),eP=function(){return new Z1};function Nr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var rP="effect/Metric",tP=Symbol.for(rP),nP={_Type:function(e){return e},_In:function(e){return e},_Out:function(e){return e}},ks=j(Symbol.for("effect/Metric/globalMetricRegistry"),function(){return eP()}),hd=function(r,t,n,u){var a,i=Object.assign(function(o){return xO(o,function(f){return oP(i,f)})},(a={},Nr(a,tP,nP),Nr(a,"keyType",r),Nr(a,"unsafeUpdate",t),Nr(a,"unsafeValue",n),Nr(a,"unsafeModify",u),Nr(a,"register",function(){return this.unsafeValue([]),this}),Nr(a,"pipe",function(){return I(this,arguments)}),a));return i},Ba=function(e,r){return dd(AE(e,r))},dd=function(e){var r,t=new WeakMap,n=function(u){if(u.length===0)return r!==void 0||(r=ks.get(e)),r;var a=t.get(u);return a!==void 0||(a=ks.get(ME(e,u)),t.set(u,a)),a};return hd(e.keyType,function(u,a){return n(a).update(u)},function(u){return n(u).get()},function(u,a){return n(a).modify(u)})},uP=function(e,r,t){return dd(RE(e,r,t))},aP=s(3,function(e,r,t){return iP(e,[hI(r,t)])}),iP=s(2,function(e,r){return hd(e.keyType,function(t,n){return e.unsafeUpdate(t,gu(r,n))},function(t){return e.unsafeValue(gu(r,t))},function(t,n){return e.unsafeModify(t,gu(r,n))})}),oP=s(2,function(e,r){return of(Ui,function(t){return k(function(){return e.unsafeUpdate(r,t)})})});function yd(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function fP(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(u){return Object.getOwnPropertyDescriptor(t,u).enumerable}))),n.forEach(function(u){yd(e,u,t[u])})}return e}function cP(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}function sP(e,r){return r=r??{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}var lP="effect/Request",vP=Symbol.for(lP),hP={_E:function(e){return e},_A:function(e){return e}},dP=sP(fP({},ya),yd({},vP,hP)),cR=function(){function e(r){r&&Object.assign(this,r)}return e.prototype=dP,e}(),yP=s(2,function(e,r){return of(qh,function(t){return k(function(){if(t.has(e)){var n=t.get(e);n.state.completed||(n.state.completed=!0,Yv(n.result,r))}})})});function Bf(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _P(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hf(e,r,t){return r&&_P(e.prototype,r),e}function pr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var pP="effect/Supervisor",Ha=Symbol.for(pP),Jf={_T:function(e){return e}},mP=Ha,_d=function(){function e(r,t){Bf(this,e),pr(this,"underlying",void 0),pr(this,"value0",void 0),pr(this,mP,Jf),this.underlying=r,this.value0=t}return Hf(e,[{key:"value",get:function(){return this.value0}},{key:"onStart",value:function(t,n,u,a){this.underlying.onStart(t,n,u,a)}},{key:"onEnd",value:function(t,n){this.underlying.onEnd(t,n)}},{key:"onEffect",value:function(t,n){this.underlying.onEffect(t,n)}},{key:"onSuspend",value:function(t){this.underlying.onSuspend(t)}},{key:"onResume",value:function(t){this.underlying.onResume(t)}},{key:"map",value:function(t){return new e(this,d(this.value,_e(t)))}},{key:"zip",value:function(t){return new pd(this,t)}}]),e}(),bP=Ha,pd=function(){function e(r,t){Bf(this,e),pr(this,"left",void 0),pr(this,"right",void 0),pr(this,"_tag","Zip"),pr(this,bP,Jf),this.left=r,this.right=t}return Hf(e,[{key:"value",get:function(){return qv(this.left.value,this.right.value)}},{key:"onStart",value:function(t,n,u,a){this.left.onStart(t,n,u,a),this.right.onStart(t,n,u,a)}},{key:"onEnd",value:function(t,n){this.left.onEnd(t,n),this.right.onEnd(t,n)}},{key:"onEffect",value:function(t,n){this.left.onEffect(t,n),this.right.onEffect(t,n)}},{key:"onSuspend",value:function(t){this.left.onSuspend(t),this.right.onSuspend(t)}},{key:"onResume",value:function(t){this.left.onResume(t),this.right.onResume(t)}},{key:"map",value:function(t){return new _d(this,d(this.value,_e(t)))}},{key:"zip",value:function(t){return new e(this,t)}}]),e}(),md=function(e){return F(e,Ha)&&js(e,"Zip")},gP=Ha,SP=function(){function e(r){Bf(this,e),pr(this,"effect",void 0),pr(this,gP,Jf),this.effect=r}return Hf(e,[{key:"value",get:function(){return this.effect}},{key:"onStart",value:function(t,n,u,a){}},{key:"onEnd",value:function(t,n){}},{key:"onEffect",value:function(t,n){}},{key:"onSuspend",value:function(t){}},{key:"onResume",value:function(t){}},{key:"map",value:function(t){return new _d(this,d(this.value,_e(t)))}},{key:"zip",value:function(t){return new pd(this,t)}},{key:"onRun",value:function(t,n){return t()}}]),e}(),OP=function(e){return new SP(e)},Ja=j("effect/Supervisor/none",function(){return OP(be)}),wP=Gt,bd="Empty",gd="AddSupervisor",Sd="RemoveSupervisor",Od="AndThen",gn={_tag:bd},Eu=function(e,r){return{_tag:Od,first:e,second:r}},$P=function(e,r){return kP(r,Ie(e))},kP=function(e,r){for(var t=e,n=r;Tt(n);){var u=At(n);switch(u._tag){case bd:{n=Lr(n);break}case gd:{t=t.zip(u.supervisor),n=Lr(n);break}case Sd:{t=ao(t,u.supervisor),n=Lr(n);break}case Od:{n=Ve(u.first)(Ve(u.second)(Lr(n)));break}}}return t},ao=function(e,r){return P(e,r)?Ja:md(e)?ao(e.left,r).zip(ao(e.right,r)):e},ua=function(e){return P(e,Ja)?Gr():md(e)?d(ua(e.left),$n(ua(e.right))):xo(e)},IP=function(e,r){if(P(e,r))return gn;var t=ua(e),n=ua(r),u=d(n,cc(t),xu(gn,function(i,o){return Eu(i,{_tag:gd,supervisor:o})})),a=d(t,cc(n),xu(gn,function(i,o){return Eu(i,{_tag:Sd,supervisor:o})}));return Eu(u,a)},EP=wP({empty:gn,patch:$P,combine:Eu,diff:IP});function io(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function PP(e){if(Array.isArray(e))return e}function TP(e){if(Array.isArray(e))return io(e)}function AP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RP(e,r,t){return r=aa(r),qP(e,Id()?Reflect.construct(r,[],aa(e).constructor):r.apply(e,t))}function MP(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function FP(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CP(e,r,t){return FP(e.prototype,r),e}function M(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function aa(e){return aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},aa(e)}function NP(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),oo(e,r)}function jP(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xP(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n=[],u=!0,a=!1,i,o;try{for(t=t.call(e);!(u=(i=t.next()).done)&&(n.push(i.value),!(r&&n.length===r));u=!0);}catch(f){a=!0,o=f}finally{try{!u&&t.return!=null&&t.return()}finally{if(a)throw o}}return n}}function DP(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function LP(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qP(e,r){return r&&($d(r)==="object"||typeof r=="function")?r:AP(e)}function oo(e,r){return oo=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},oo(e,r)}function wd(e,r){return PP(e)||xP(e,r)||kd(e,r)||DP()}function UP(e){return TP(e)||jP(e)||kd(e)||LP()}function $d(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function kd(e,r){if(e){if(typeof e=="string")return io(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return io(e,r)}}function Id(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Id=function(){return!!e})()}var BP=Ba("effect_fiber_started",{incremental:!0}),Is=Ba("effect_fiber_active"),HP=Ba("effect_fiber_successes",{incremental:!0}),JP=Ba("effect_fiber_failures",{incremental:!0}),VP=aP(uP("effect_fiber_lifetimes",YI({start:.5,factor:2,count:35})),"time_unit","milliseconds"),hn="Continue",KP="Done",Es="Yield",zP={_E:function(e){return e},_A:function(e){return e}},pu=function(e){throw new Error("BUG: FiberRuntime - ".concat(wt(e)," - please report an issue at https://github.com/Effect-TS/effect/issues"))},lr=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),vr=j("effect/internal/fiberRuntime/yieldedOpChannel",function(){return{currentOp:null}}),$r,dn=($r={},M($r,va,function(e,r,t){return de(function(){return r.effect_instruction_i1(t)})}),M($r,"OnStep",function(e,r,t){return J(J(t))}),M($r,ha,function(e,r,t){return de(function(){return r.effect_instruction_i2(t)})}),M($r,So,function(e,r,t){return e.patchRuntimeFlags(e.currentRuntimeFlags,r.patch),Er(e.currentRuntimeFlags)&&e.isInterrupted()?D(e.getInterruptedCause()):J(t)}),M($r,da,function(e,r,t){return de(function(){return r.effect_instruction_i2(t)}),de(function(){return r.effect_instruction_i0()})?(e.pushStack(r),de(function(){return r.effect_instruction_i1()})):be}),M($r,Mu,function(e,r,t){var n=de(function(){return r.effect_instruction_i0.next(t)});return n.done?J(n.value):(e.pushStack(r),Py(n.value))}),$r),lt,GP=(lt={},M(lt,If,function(e,r,t,n){return e.processNewInterruptSignal(n.cause),Er(r)?D(n.cause):t}),M(lt,Pf,function(e,r,t,n){throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")}),M(lt,Ef,function(e,r,t,n){return n.onFiber(e,$h(r)),t}),M(lt,Tf,function(e,r,t,n){return $(uf(),function(){return t})}),lt),WP=function(e){return Ra(MS(e),function(r){return Jr(GS(r),function(t){var n=wd(t,2),u=n[0],a=n[1],i=new Map,o=[],f=!0,c=!1,l=void 0;try{for(var v=a[Symbol.iterator](),h;!(f=(h=v.next()).done);f=!0){var y=h.value;o.push(Hr(y));var _=!0,p=!1,S=void 0;try{for(var m=y[Symbol.iterator](),b;!(_=(b=m.next()).done);_=!0){var R=b.value;i.set(R.request,R)}}catch(L){p=!0,S=L}finally{try{!_&&m.return!=null&&m.return()}finally{if(p)throw S}}}}catch(L){c=!0,l=L}finally{try{!f&&v.return!=null&&v.return()}finally{if(c)throw l}}var H=o.flat();return Na(ET(u.runAll(o),H,function(){return H.forEach(function(L){L.listeners.interrupted=!0})}),qh,i)},!1,!1)})},YP=oa(),QP=Vh,XP=PI,ZP=Cy,eT=Bs,rT=ke,tT=$e,nT=Hs,uT=Nn,aT=va,iT=di,oT=ha,fT=Sn,cT=Fu,sT=da,lT=Mu,vT=la,Ed=function(e){NP(r,e);function r(t,n,u){MP(this,r);var a;if(a=RP(this,r),M(a,QP,Kh),M(a,XP,zP),M(a,"_fiberRefs",void 0),M(a,"_fiberId",void 0),M(a,"_queue",new Array),M(a,"_children",null),M(a,"_observers",new Array),M(a,"_running",!1),M(a,"_stack",[]),M(a,"_asyncInterruptor",null),M(a,"_asyncBlockingOn",null),M(a,"_exitValue",null),M(a,"_steps",[]),M(a,"_isYielding",!1),M(a,"currentRuntimeFlags",void 0),M(a,"currentOpCount",0),M(a,"currentSupervisor",void 0),M(a,"currentScheduler",void 0),M(a,"currentTracer",void 0),M(a,"currentSpan",void 0),M(a,"currentContext",void 0),M(a,"currentDefaultServices",void 0),M(a,"run",function(){a.drainQueueOnCurrentThread()}),a.currentRuntimeFlags=u,a._fiberId=t,a._fiberRefs=n,Tc(u)){var i=a.getFiberRef(Ui);BP.unsafeUpdate(1,i),Is.unsafeUpdate(1,i)}return a.refreshRefCache(),a}return CP(r,[{key:"commit",value:function(){return Rf(this)}},{key:"id",value:function(){return this._fiberId}},{key:"resume",value:function(n){this.tell(ct(n))}},{key:"status",get:function(){return this.ask(function(n,u){return u})}},{key:"runtimeFlags",get:function(){return this.ask(function(n,u){return u0(u)?n.currentRuntimeFlags:u.runtimeFlags})}},{key:"scope",value:function(){return wI(this)}},{key:"children",get:function(){return this.ask(function(n){return Array.from(n.getChildren())})}},{key:"getChildren",value:function(){return this._children===null&&(this._children=new Set),this._children}},{key:"getInterruptedCause",value:function(){return this.getFiberRef(vu)}},{key:"fiberRefs",value:function(){return this.ask(function(n){return n.getFiberRefs()})}},{key:"ask",value:function(n){var u=this;return Y(function(){var a=pw(u._fiberId);return u.tell(Iu(function(i,o){Yv(a,k(function(){return n(i,o)}))})),Wv(a)})}},{key:"tell",value:function(n){this._queue.push(n),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}},{key:"await",get:function(){var n=this;return Xr(function(u){var a=function(i){return u(x(i))};return n.tell(Iu(function(i,o){i._exitValue!==null?a(n._exitValue):i.addObserver(a)})),k(function(){return n.tell(Iu(function(i,o){i.removeObserver(a)}))})},this.id())}},{key:"inheritAll",get:function(){var n=this;return ge(function(u,a){var i=u.id(),o=u.getFiberRefs(),f=a.runtimeFlags,c=n.getFiberRefs(),l=Ok(o,i,c);u.setFiberRefs(l);var v=u.getFiberRef(Rs),h=d($u(f,v),Rc(Wt),Rc(Di));return qO(h)})}},{key:"poll",get:function(){var n=this;return k(function(){return Io(n._exitValue)})}},{key:"unsafePoll",value:function(){return this._exitValue}},{key:"interruptAsFork",value:function(n){var u=this;return k(function(){return u.tell(fi(Pr(n)))})}},{key:"unsafeInterruptAsFork",value:function(n){this.tell(fi(Pr(n)))}},{key:"addObserver",value:function(n){this._exitValue!==null?n(this._exitValue):this._observers.push(n)}},{key:"removeObserver",value:function(n){this._observers=this._observers.filter(function(u){return u!==n})}},{key:"getFiberRefs",value:function(){return this.setFiberRef(Rs,this.currentRuntimeFlags),this._fiberRefs}},{key:"unsafeDeleteFiberRef",value:function(n){this._fiberRefs=mh(this._fiberRefs,n)}},{key:"getFiberRef",value:function(n){return this._fiberRefs.locals.has(n)?this._fiberRefs.locals.get(n)[0][1]:n.initial}},{key:"setFiberRef",value:function(n,u){this._fiberRefs=Xi(this._fiberRefs,{fiberId:this._fiberId,fiberRef:n,value:u}),this.refreshRefCache()}},{key:"refreshRefCache",value:function(){this.currentDefaultServices=this.getFiberRef(Wu),this.currentTracer=this.currentDefaultServices.unsafeMap.get(sh.key),this.currentSupervisor=this.getFiberRef(IT),this.currentScheduler=this.getFiberRef(Lh),this.currentContext=this.getFiberRef(Wn),this.currentSpan=this.currentContext.unsafeMap.get(lh.key)}},{key:"setFiberRefs",value:function(n){this._fiberRefs=n,this.refreshRefCache()}},{key:"addChild",value:function(n){this.getChildren().add(n)}},{key:"removeChild",value:function(n){this.getChildren().delete(n)}},{key:"transferChildren",value:function(n){var u=this._children;if(this._children=null,u!==null&&u.size>0){var a=!0,i=!1,o=void 0;try{for(var f=u[Symbol.iterator](),c;!(a=(c=f.next()).done);a=!0){var l=c.value;l._exitValue===null&&n.add(this.currentRuntimeFlags,l)}}catch(v){i=!0,o=v}finally{try{!a&&f.return!=null&&f.return()}finally{if(i)throw o}}}}},{key:"drainQueueOnCurrentThread",value:function(){for(var n=!0;n;){var u=hn,a=globalThis[Cr];globalThis[Cr]=this;try{for(;u===hn;)u=this._queue.length===0?KP:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[Cr]=a}this._queue.length>0&&!this._running?(this._running=!0,u===Es?(this.drainQueueLaterOnExecutor(),n=!1):n=!0):n=!1}}},{key:"drainQueueLaterOnExecutor",value:function(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(ja))}},{key:"drainQueueWhileRunning",value:function(n,u){for(var a=u;this._queue.length>0;){var i=this._queue.splice(0,1)[0];a=GP[i._tag](this,n,a,i)}return a}},{key:"isInterrupted",value:function(){return!hm(this.getFiberRef(vu))}},{key:"addInterruptedCause",value:function(n){var u=this.getFiberRef(vu);this.setFiberRef(vu,we(u,n))}},{key:"processNewInterruptSignal",value:function(n){this.addInterruptedCause(n),this.sendInterruptSignalToAllChildren()}},{key:"sendInterruptSignalToAllChildren",value:function(){if(this._children===null||this._children.size===0)return!1;var n=!1,u=!0,a=!1,i=void 0;try{for(var o=this._children[Symbol.iterator](),f;!(u=(f=o.next()).done);u=!0){var c=f.value;c.tell(fi(Pr(this.id()))),n=!0}}catch(l){a=!0,i=l}finally{try{!u&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}},{key:"interruptAllChildren",value:function(){if(this.sendInterruptSignalToAllChildren()){var n=this._children.values();this._children=null;var u=!1,a=function(){var i=n.next();return i.done?k(function(){u=!0}):Gn(i.value.await)};return nf({while:function(){return!u},body:a,step:function(){}})}return null}},{key:"reportExitValue",value:function(n){if(Tc(this.currentRuntimeFlags)){var u=this.getFiberRef(Ui),a=this.id().startTimeMillis,i=Date.now();switch(VP.unsafeUpdate(i-a,u),Is.unsafeUpdate(-1,u),n._tag){case ke:{HP.unsafeUpdate(1,u);break}case $e:{JP.unsafeUpdate(1,u);break}}}if(n._tag==="Failure"){var o=this.getFiberRef(ow);!Lo(n.cause)&&o._tag==="Some"&&this.log("Fiber terminated with an unhandled error",n.cause,o)}}},{key:"setExitValue",value:function(n){this._exitValue=n,this.reportExitValue(n);for(var u=this._observers.length-1;u>=0;u--)this._observers[u](n);this._observers=[]}},{key:"getLoggers",value:function(){return this.getFiberRef(pT)}},{key:"log",value:function(n,u,a){var i=this,o=W(a)?a.value:this.getFiberRef(tw),f=this.getFiberRef(hT);if(!d0(f,o)){var c=this.getFiberRef(nw),l=this.getFiberRef(rw),v=this.getLoggers(),h=this.getFiberRefs();if(Ml(v)>0){var y=Gl(this.getFiberRef(Wu),sf),_=new Date(y.unsafeCurrentTimeMillis());My(h,function(){var p=!0,S=!1,m=void 0;try{for(var b=v[Symbol.iterator](),R;!(p=(R=b.next()).done);p=!0){var H=R.value;H.log({fiberId:i.id(),logLevel:o,message:n,cause:u,context:h,spans:c,annotations:l,date:_})}}catch(L){S=!0,m=L}finally{try{!p&&b.return!=null&&b.return()}finally{if(S)throw m}}})}}}},{key:"evaluateMessageWhileSuspended",value:function(n){switch(n._tag){case Tf:return Es;case If:return this.processNewInterruptSignal(n.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(D(n.cause)),this._asyncInterruptor=null),hn;case Pf:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(n.effect),hn;case Ef:return n.onFiber(this,this._exitValue!==null?t0:n0(this.currentRuntimeFlags,this._asyncBlockingOn)),hn;default:return pu(n)}}},{key:"evaluateEffect",value:function(n){this.currentSupervisor.onResume(this);try{for(var u,a=function(){var o=i,f=u.runLoop(o);if(f===lr){var c=vr.currentOp;vr.currentOp=null,c._op===Fu?wS(u.currentRuntimeFlags)?(u.tell(_I()),u.tell(ct(er)),i=null):i=er:c._op===Sn&&(i=null)}else{u.currentRuntimeFlags=d(u.currentRuntimeFlags,$S(Di));var l=u.interruptAllChildren();l!==null?i=$(l,function(){return f}):(u._queue.length===0?u.setExitValue(f):u.tell(ct(f)),i=null)}},i=Er(this.currentRuntimeFlags)&&this.isInterrupted()?D(this.getInterruptedCause()):n;i!==null;)u=this,a()}finally{this.currentSupervisor.onSuspend(this)}}},{key:"start",value:function(n){if(this._running)this.tell(ct(n));else{this._running=!0;var u=globalThis[Cr];globalThis[Cr]=this;try{this.evaluateEffect(n)}finally{this._running=!1,globalThis[Cr]=u,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}},{key:"startFork",value:function(n){this.tell(ct(n))}},{key:"patchRuntimeFlags",value:function(n,u){var a=ku(n,u);return globalThis[Cr]=this,this.currentRuntimeFlags=a,a}},{key:"initiateAsync",value:function(n,u){var a=this,i=!1,o=function(f){i||(i=!0,a.tell(ct(f)))};Er(n)&&(this._asyncInterruptor=o);try{u(o)}catch(f){o(Me(Re(f)))}}},{key:"pushStack",value:function(n){this._stack.push(n),n._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}},{key:"popStack",value:function(){var n=this._stack.pop();if(n)return n._op==="OnStep"&&this._steps.pop(),n}},{key:"getNextSuccessCont",value:function(){for(var n=this.popStack();n;){if(n._op!==di)return n;n=this.popStack()}}},{key:"getNextFailCont",value:function(){for(var n=this.popStack();n;){if(n._op!==va&&n._op!==da&&n._op!==Mu)return n;n=this.popStack()}}},{key:ZP,value:function(n){var u=this;return k(function(){return Wl(u.currentContext,n)})}},{key:"Left",value:function(n){return oe(n.left)}},{key:"None",value:function(n){return oe(new Gv)}},{key:"Right",value:function(n){return J(n.right)}},{key:"Some",value:function(n){return J(n.value)}},{key:"Micro",value:function(n){var u=this;return Vu(function(a){var i=a,o=Q0(J0(n,u.currentContext));return o.addObserver(function(f){if(f._tag==="Success")return i(J(f.value));switch(f.cause._tag){case"Interrupt":return i(D(Pr(Yr)));case"Fail":return i(oe(f.cause.error));case"Die":return i(jc(f.cause.defect))}}),Vu(function(f){i=function(c){f(be)},o.unsafeInterrupt()})})}},{key:eT,value:function(n){var u=de(function(){return n.effect_instruction_i0()}),a=this.getNextSuccessCont();return a!==void 0?(a._op in dn||pu(a),dn[a._op](this,a,u)):(vr.currentOp=J(u),lr)}},{key:rT,value:function(n){var u=n,a=this.getNextSuccessCont();return a!==void 0?(a._op in dn||pu(a),dn[a._op](this,a,u.effect_instruction_i0)):(vr.currentOp=u,lr)}},{key:tT,value:function(n){var u=n.effect_instruction_i0,a=this.getNextFailCont();if(a!==void 0)switch(a._op){case di:case ha:return Er(this.currentRuntimeFlags)&&this.isInterrupted()?D(sc(u)):de(function(){return a.effect_instruction_i1(u)});case"OnStep":return Er(this.currentRuntimeFlags)&&this.isInterrupted()?D(sc(u)):J(D(u));case So:return this.patchRuntimeFlags(this.currentRuntimeFlags,a.patch),Er(this.currentRuntimeFlags)&&this.isInterrupted()?D(we(u,this.getInterruptedCause())):D(u);default:pu(a)}else return vr.currentOp=D(u),lr}},{key:nT,value:function(n){var u=this;return de(function(){return n.effect_instruction_i0(u,$h(u.currentRuntimeFlags))})}},{key:"Blocked",value:function(n){var u=this.getFiberRefs(),a=this.currentRuntimeFlags;if(this._steps.length>0){for(var i=[],o=this._steps[this._steps.length-1],f=this.popStack();f&&f._op!=="OnStep";)i.push(f),f=this.popStack();this.setFiberRefs(o.refs),this.currentRuntimeFlags=o.flags;var c=jk(o.refs,u),l=$u(o.flags,a);return J(Av(n.effect_instruction_i0,ge(function(v){for(;i.length>0;)v.pushStack(i.pop());return v.setFiberRefs(xk(v.id(),v.getFiberRefs())(c)),v.currentRuntimeFlags=ku(l)(v.currentRuntimeFlags),n.effect_instruction_i1})))}return Fa(function(v){return $(Td(dO(n.effect_instruction_i0)),function(){return v(n.effect_instruction_i1)})})}},{key:"RunBlocked",value:function(n){return WP(n.effect_instruction_i0)}},{key:uT,value:function(n){var u=n.effect_instruction_i0,a=this.currentRuntimeFlags,i=ku(a,u);if(Er(i)&&this.isInterrupted())return D(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,u),n.effect_instruction_i1){var o=$u(i,a);return this.pushStack(new yO(o,n)),de(function(){return n.effect_instruction_i1(a)})}else return er}},{key:aT,value:function(n){return this.pushStack(n),n.effect_instruction_i0}},{key:"OnStep",value:function(n){return this.pushStack(n),n.effect_instruction_i0}},{key:iT,value:function(n){return this.pushStack(n),n.effect_instruction_i0}},{key:oT,value:function(n){return this.pushStack(n),n.effect_instruction_i0}},{key:fT,value:function(n){return this._asyncBlockingOn=n.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,n.effect_instruction_i0),vr.currentOp=n,lr}},{key:cT,value:function(n){return this._isYielding=!1,vr.currentOp=n,lr}},{key:sT,value:function(n){var u=n.effect_instruction_i0,a=n.effect_instruction_i1;return u()?(this.pushStack(n),a()):er}},{key:lT,value:function(n){return dn[Mu](this,n,void 0)}},{key:vT,value:function(n){return de(function(){return n.commit()})}},{key:"runLoop",value:function(n){var u,a=function(){if(u.currentRuntimeFlags&OS&&u.currentSupervisor.onEffect(u,o),u._queue.length>0&&(o=u.drainQueueWhileRunning(u.currentRuntimeFlags,o)),!u._isYielding){u.currentOpCount+=1;var c=u.currentScheduler.shouldYield(u);if(c!==!1){u._isYielding=!0,u.currentOpCount=0;var l=o;o=$(uf({priority:c}),function(){return l})}}try{if(o=u.currentTracer.context(function(){return YP!==o[Lt]._V?xc("Cannot execute an Effect versioned ".concat(o[Lt]._V," with a Runtime of version ").concat(oa())):i[o._op](o)},u),o===lr){var v=vr.currentOp;return v._op===Fu||v._op===Sn?{v:lr}:(vr.currentOp=null,{v:v._op===ke||v._op===$e?v:D(Re(v))})}}catch(h){o!==lr&&!F(o,"_op")||!(o._op in u)?o=xc("Not a valid effect: ".concat(wt(o))):lw(h)?o=D(we(Re(h),Pr(Yr))):o=jc(h)}},i=this,o=n;for(this.currentOpCount=0;;){var f=(u=this,a());if($d(f)==="object")return f.v}}}]),r}(nk),hT=j("effect/FiberRef/currentMinimumLogLevel",function(){return Ee(y0("Info"))}),dT=function(e){return Mf(function(r){var t=Ik(r.context,Wu);Gl(t,fh).unsafe.log(e.log(r))})},yT=j(Symbol.for("effect/Logger/defaultLogger"),function(){return dT(LI)}),_T=j(Symbol.for("effect/Logger/tracerLogger"),function(){return Mf(function(e){var r=e.annotations,t=e.cause,n=e.context,u=e.fiberId,a=e.logLevel,i=e.message,o=Hn(Tn(n,Wn),lh);if(!(o._tag==="None"||o.value._tag==="ExternalSpan")){var f=Wl(Tn(n,Wu),sf),c={},l=!0,v=!1,h=void 0;try{for(var y=r[Symbol.iterator](),_;!(l=(_=y.next()).done);l=!0){var p=wd(_.value,2),S=p[0],m=p[1];c[S]=m}}catch(b){v=!0,h=b}finally{try{!l&&y.return!=null&&y.return()}finally{if(v)throw h}}c["effect.fiberId"]=Vb(u),c["effect.logLevel"]=a.label,t!==null&&t._tag!=="Empty"&&(c["effect.cause"]=Sa(t,{renderErrorCause:!0})),o.value.event(wt(Array.isArray(i)?i[0]:i),f.unsafeCurrentTimeNanos(),c)}})}),pT=j(Symbol.for("effect/FiberRef/currentLoggers"),function(){return XO(xo(yT,_T))}),mT=s(function(e){return fy(e[0])},function(e,r,t){return ge(function(n){var u=(t==null?void 0:t.batching)===!0||(t==null?void 0:t.batching)==="inherit"&&n.getFiberRef(iw);return t!=null&&t.discard?vs(t.concurrency,function(){return vt(Gi,t==null?void 0:t.concurrentFinalizers)(function(a){return u?Jr(e,function(i,o){return a(r(i,o))},!0,!1,1):Ra(e,function(i,o){return a(r(i,o))})})},function(){return vt(Wi,t==null?void 0:t.concurrentFinalizers)(function(a){return Jr(e,function(i,o){return a(r(i,o))},u,!1)})},function(a){return vt(Yi(a),t==null?void 0:t.concurrentFinalizers)(function(i){return Jr(e,function(o,f){return i(r(o,f))},u,!1,a)})}):vs(t==null?void 0:t.concurrency,function(){return vt(Gi,t==null?void 0:t.concurrentFinalizers)(function(a){return u?fo(e,1,function(i,o){return a(r(i,o))},!0):yr(e,function(i,o){return a(r(i,o))})})},function(){return vt(Wi,t==null?void 0:t.concurrentFinalizers)(function(a){return Pd(e,function(i,o){return a(r(i,o))},u)})},function(a){return vt(Yi(a),t==null?void 0:t.concurrentFinalizers)(function(i){return fo(e,a,function(o,f){return i(r(o,f))},u)})})})}),Pd=function(e,r,t){return Y(function(){var n=G(e),u=new Array(n.length),a=function(i,o){return $(r(i,o),function(f){return k(function(){return u[o]=f})})};return Ca(Jr(n,a,t,!1),x(u))})},Jr=function(e,r,t,n,u){return Fa(function(a){return DO(function(i){return ge(function(o){var f=Array.from(e).reverse(),c=f.length;if(c===0)return be;var l=0,v=!1,h=u?Math.min(f.length,u):f.length,y=new Set,_=new Array,p=function(){return y.forEach(function(X){X.currentScheduler.scheduleTask(function(){X.unsafeInterruptAsFork(o.id())},0)})},S=new Array,m=new Array,b=new Array,R=function(){var X=_.filter(function(se){var ue=se.exit;return ue._tag==="Failure"}).sort(function(se,ue){return se.index<ue.index?-1:se.index===ue.index?0:1}).map(function(se){var ue=se.exit;return ue});return X.length===0&&X.push(er),X},H=function(X){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ue=Lv(i(X)),Ce=gT(ue,o,o.currentRuntimeFlags,Af);return o.currentScheduler.scheduleTask(function(){se&&Ce.unsafeInterruptAsFork(o.id()),Ce.resume(ue)},0),Ce},L=function(){n||(c-=f.length,f=[]),v=!0,p()},ce=t?CO:bn,Fe=H(Xr(function(X){for(var se=function(Ne,Pe){Ne._op==="Blocked"?b.push(Ne):(_.push({index:Pe,exit:Ne}),Ne._op==="Failure"&&!v&&L())},ue=function(){if(f.length>0){var Ne=f.pop(),Pe=l++,ae=function(){var ze=f.pop();return Pe=l++,$(uf(),function(){return $(ce(a(r(ze,Pe))),ar)})},ar=function(ze){return f.length>0&&(se(ze,Pe),f.length>0)?ae():x(ze)},au=$(ce(a(r(Ne,Pe))),ar),Ke=H(au);S.push(Ke),y.add(Ke),v&&Ke.currentScheduler.scheduleTask(function(){Ke.unsafeInterruptAsFork(o.id())},0),Ke.addObserver(function(ze){var Xt;if(ze._op==="Failure"?Xt=ze:Xt=ze.effect_instruction_i0,m.push(Ke),y.delete(Ke),se(Xt,Pe),_.length===c)X(x(Je(mt(R(),{parallel:!0}),function(){return er})));else if(b.length+_.length===c){var Va=b.map(function(Zt){return Zt.effect_instruction_i0}).reduce($v);X(x(Av(Va,Jr([Je(mt(R(),{parallel:!0}),function(){return er})].concat(UP(b.map(function(Zt){return Zt.effect_instruction_i1}))),function(Zt){return Zt},t,!0,u))))}else ue()})}},Ce=0;Ce<h;Ce++)ue()}));return Gn(tf(jv(a(Rf(Fe))),ff({onFailure:function(){L();var X=b.length+1,se=Math.min(typeof u=="number"?u:b.length,b.length),ue=Array.from(b);return Xr(function(Ce){var Ne=[],Pe=0,ae=0,ar=function(ze,Xt){return function(Va){Ne[ze]=Va,Pe++,Pe===X&&Ce(nl(mt(Ne,{parallel:!0}))),ue.length>0&&Xt&&au()}},au=function(){H(ue.pop(),!0).addObserver(ar(ae,!0)),ae++};Fe.addObserver(ar(ae,!1)),ae++;for(var Ke=0;Ke<se;Ke++)au()})},onSuccess:function(){return yr(m,function(X){return X.inheritAll})}})))})})})},fo=function(e,r,t,n){return Y(function(){var u=G(e),a=new Array(u.length),i=function(o,f){return _e(t(o,f),function(c){return a[f]=c})};return Ca(Jr(u,i,n,!1,r),x(a))})},Td=function(e){return ST(e,Af)},bT=function(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=Ad(e,r,t,n);return u.resume(e),u},gT=function(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=Ad(e,r,t,n);return u},Ad=function(e,r,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=uv(),a=r.getFiberRefs(),i=wk(a,u),o=new Ed(u,i,t),f=Tn(i,Wn),c=o.currentSupervisor;c.onStart(f,e,E(r),o),o.addObserver(function(v){return c.onEnd(v,o)});var l=n!==null?n:d(r.getFiberRef(Bi),Je(function(){return r.scope()}));return l.add(t,o),o},ST=function(e,r){return ge(function(t,n){return x(bT(e,t,n.runtimeFlags,r))})},Ps=function(e){return Yn(function(r){return rt(Hn(r,uu),{onNone:function(){return e},onSome:function(t){switch(t.strategy._tag){case"Parallel":return e;case"Sequential":case"ParallelN":return $(xa(t,Wi),function(n){return Vf(e,n)})}}})})},Ts=function(e){return function(r){return Yn(function(t){return rt(Hn(t,uu),{onNone:function(){return r},onSome:function(n){return n.strategy._tag==="ParallelN"&&n.strategy.parallelism===e?r:$(xa(n,Yi(e)),function(u){return Vf(r,u)})}})})}},vt=function(e,r){return function(t){return Yn(function(n){return rt(Hn(n,uu),{onNone:function(){return t(re)},onSome:function(u){if(r===!0){var a=e._tag==="Parallel"?Ps:e._tag==="Sequential"?As:Ts(e.parallelism);switch(u.strategy._tag){case"Parallel":return a(t(Ps));case"Sequential":return a(t(As));case"ParallelN":return a(t(Ts(u.strategy.parallelism)))}}else return t(re)}})})}},As=function(e){return Yn(function(r){return rt(Hn(r,uu),{onNone:function(){return e},onSome:function(t){switch(t.strategy._tag){case"Sequential":return e;case"Parallel":case"ParallelN":return $(xa(t,Gi),function(n){return Vf(e,n)})}}})})},uu=tt("effect/Scope"),OT=function(e,r){e.state._tag==="Open"&&e.state.finalizers.add(r)},kr,wT=(kr={},M(kr,Lc,Lc),M(kr,qc,qc),M(kr,"pipe",function(){return I(this,arguments)}),M(kr,"fork",function(e){var r=this;return k(function(){var t=$T(e);if(r.state._tag==="Closed")return t.state=r.state,t;var n=function(u){return t.close(u)};return r.state.finalizers.add(n),OT(t,function(u){return k(function(){r.state._tag==="Open"&&r.state.finalizers.delete(n)})}),t})}),M(kr,"close",function(e){var r=this;return Y(function(){if(r.state._tag==="Closed")return be;var t=Array.from(r.state.finalizers.values()).reverse();return r.state={_tag:"Closed",exit:e},t.length===0?be:ok(r.strategy)?d(yr(t,function(n){return bn(n(e))}),$(function(n){return d(mt(n),bu(ri),Je(function(){return er}))})):fk(r.strategy)?d(Pd(t,function(n){return bn(n(e))},!1),$(function(n){return d(mt(n,{parallel:!0}),bu(ri),Je(function(){return er}))})):d(fo(t,r.strategy.parallelism,function(n){return bn(n(e))},!1),$(function(n){return d(mt(n,{parallel:!0}),bu(ri),Je(function(){return er}))}))})}),M(kr,"addFinalizer",function(e){var r=this;return Y(function(){return r.state._tag==="Closed"?e(r.state.exit):(r.state.finalizers.add(e),be)})}),kr),$T=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lf,r=Object.create(wT);return r.strategy=e,r.state={_tag:"Open",finalizers:new Set},r},Vf=s(2,function(e,r){return Ow(e,Yl(Zm(uu,r)))}),kT=function(e){return Yt(e,{differ:EP,fork:gn})},Rs=ew(kS),IT=kT(Ja),ET=function(e,r,t){return Nv(function(n){return $($(Td(xv(e)),function(u){return Xr(function(a){var i=r.map(function(c){return c.listeners.count}),o=function(){i.every(function(c){return c===0})&&r.every(function(c){return c.result.state.current._tag==="Pending"?!0:!!(c.result.state.current._tag==="Done"&&Da(c.result.state.current.effect)&&c.result.state.current.effect._tag==="Failure"&&dm(c.result.state.current.effect.cause))})&&(f.forEach(function(c){return c()}),t==null||t(),a(UO(u)))};u.addObserver(function(c){f.forEach(function(l){return l()}),a(c)});var f=r.map(function(c,l){var v=function(h){i[l]=h,o()};return c.listeners.addObserver(v),function(){return c.listeners.removeObserver(v)}});return o(),k(function(){f.forEach(function(c){return c()})})})}),function(){return Y(function(){var u=r.flatMap(function(a){return a.state.completed?[]:[a]});return Ra(u,function(a){return yP(a.request,dw(n))})})})})},PT=cw,TT=xa;function AT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rd(e,r,t){return r=An(r),FT(e,zf()?Reflect.construct(r,t||[],An(e).constructor):r.apply(e,t))}function Kf(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Pu(e,r,t){return zf()?Pu=Reflect.construct:Pu=function(u,a,i){var o=[null];o.push.apply(o,a);var f=Function.bind.apply(u,o),c=new f;return i&&Rn(c,i.prototype),c},Pu.apply(null,arguments)}function RT(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Md(e,r,t){return r&&RT(e.prototype,r),e}function Vr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function An(e){return An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},An(e)}function Fd(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&Rn(e,r)}function MT(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function FT(e,r){return r&&(CT(r)==="object"||typeof r=="function")?r:AT(e)}function Rn(e,r){return Rn=Object.setPrototypeOf||function(n,u){return n.__proto__=u,n},Rn(e,r)}function CT(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function ia(e){var r=typeof Map=="function"?new Map:void 0;return ia=function(n){if(n===null||!MT(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(n))return r.get(n);r.set(n,u)}function u(){return Pu(n,arguments,An(this).constructor)}return u.prototype=Object.create(n.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),Rn(u,n)},ia(e)}function zf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zf=function(){return!!e})()}var Cd=function(e){return function(r,t){var n=uv(),u=[[Wn,[[n,e.context]]]];t!=null&&t.scheduler&&u.push([Lh,[[n,t.scheduler]]]);var a=Ek(e.fiberRefs,{entries:u,forkAs:n});t!=null&&t.updateRefs&&(a=t.updateRefs(a,n));var i=new Ed(n,a,e.runtimeFlags),o=r;t!=null&&t.scope&&(o=$(TT(t.scope,lf),function(c){return Ca(fw(c,Nv(function(l){return P(l,i.id())?be:Bv(i,l)})),tf(r,function(l){return PT(c,l)}))}));var f=i.currentSupervisor;return f!==Ja&&(f.onStart(e.context,o,O(),i),i.addObserver(function(c){return f.onEnd(c,i)})),Af.add(e.runtimeFlags,i),(t==null?void 0:t.immediate)===!1?i.resume(o):i.start(o),i}},NT=function(e){return function(r){var t=BT(e)(r);if(t._tag==="Failure")throw Nd(t.effect_instruction_i0);return t.effect_instruction_i0}},jT=function(e){Fd(r,e);function r(t){Kf(this,r);var n;return n=Rd(this,r,["Fiber #".concat(t.id().id," cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work")]),Vr(n,"fiber",void 0),Vr(n,"_tag","AsyncFiberException"),n.fiber=t,n.name=n._tag,n.stack=n.message,n}return r}(ia(Error)),xT=function(e){var r=Error.stackTraceLimit;Error.stackTraceLimit=0;var t=new jT(e);return Error.stackTraceLimit=r,t},co=Symbol.for("effect/Runtime/FiberFailure"),so=Symbol.for("effect/Runtime/FiberFailure/Cause"),DT=co,LT=so,qT=B,UT=function(e){Fd(r,e);function r(t){Kf(this,r);var n;n=Rd(this,r),Vr(n,DT,void 0),Vr(n,LT,void 0),n[co]=co,n[so]=t;var u=Ul(t);if(u.length>0){var a=u[0];n.name=a.name,n.message=a.message,n.stack=a.stack}return n.name="(FiberFailure) ".concat(n.name),(n.message===void 0||n.message.length===0)&&(n.message="An error has occurred"),n}return Md(r,[{key:"toJSON",value:function(){return{_id:"FiberFailure",cause:this[so].toJSON()}}},{key:"toString",value:function(){var n;return"(FiberFailure) "+((n=this.stack)!==null&&n!==void 0?n:this.message)}},{key:qT,value:function(){return this.toString()}}]),r}(ia(Error)),Nd=function(e){var r=Error.stackTraceLimit;Error.stackTraceLimit=0;var t=new UT(e);return Error.stackTraceLimit=r,t},jd=function(e){var r=e;switch(r._op){case"Failure":case"Success":return r;case"Left":return Gc(r.left);case"Right":return J(r.right);case"Some":return J(r.value);case"None":return Gc(Gv())}},BT=function(e){return function(r){var t=jd(r);if(t)return t;var n=new uI,u=Cd(e)(r,{scheduler:n});n.flush();var a=u.unsafePoll();return a||hw(ef(xT(u),cf(u)))}},HT=function(e){return function(r,t){return xd(e)(r,t).then(function(n){switch(n._tag){case ke:return n.effect_instruction_i0;case $e:throw Nd(n.effect_instruction_i0)}})}},xd=function(e){return function(r,t){return new Promise(function(n){var u=jd(r);u&&n(u);var a=Cd(e)(r);a.addObserver(function(i){n(i)}),(t==null?void 0:t.signal)!==void 0&&(t.signal.aborted?a.unsafeInterruptAsFork(a.id()):t.signal.addEventListener("abort",function(){a.unsafeInterruptAsFork(a.id())},{once:!0}))})}},JT=function(){function e(r,t,n){Kf(this,e),Vr(this,"context",void 0),Vr(this,"runtimeFlags",void 0),Vr(this,"fiberRefs",void 0),this.context=r,this.runtimeFlags=t,this.fiberRefs=n}return Md(e,[{key:"pipe",value:function(){return I(this,arguments)}}]),e}(),VT=function(e){return new JT(e.context,e.runtimeFlags,e.fiberRefs)},KT=Sv(Wt,bv,mv),Gf=VT({context:Ho(),runtimeFlags:KT,fiberRefs:Pk()}),zT=HT(Gf),GT=xd(Gf),WT=NT(Gf),sR=Ta,lR=mT,vR=x,hR=Y,dR=be,yR=qi,_R=yI,pR=_e,mR=rf,bR=Ma,gR=zu,SR=$,OR=Aa,wR=jO,$R=zT,kR=GT,IR=WT;export{Sa as $,el as A,X_ as B,Z_ as C,j as D,rt as E,To as F,bu as G,U_ as H,g as I,d as J,N as K,U as L,A as M,P as N,Et as O,T as P,te as Q,z as R,B as S,I as T,kn as U,Lu as V,Re as W,Pr as X,Bn as Y,we as Z,lm as _,mu as a,$R as a$,nR as a0,po as a1,Q as a2,Ut as a3,V as a4,Zs as a5,cR as a6,IR as a7,pR as a8,vR as a9,sA as aA,fa as aB,cA as aC,iA as aD,yA as aE,Y_ as aF,mR as aG,o_ as aH,wA as aI,rl as aJ,$A as aK,s_ as aL,tl as aM,Dn as aN,p_ as aO,i_ as aP,SA as aQ,Lw as aR,Gw as aS,uR as aT,xn as aU,Ww as aV,Yw as aW,bA as aX,rA as aY,OA as aZ,mA as a_,wR as aa,yR as ab,SR as ac,OR as ad,lR as ae,b_ as af,Io as ag,sR as ah,Go as ai,tR as aj,rR as ak,zv as al,Dr as am,Tr as an,hA as ao,nr as ap,gR as aq,dR as ar,hR as as,Oe as at,dA as au,bR as av,gA as aw,IA as ax,jr as ay,D_ as az,iy as b,uA as b$,jA as b0,ol as b1,N_ as b2,Ht as b3,qA as b4,LA as b5,UA as b6,KA as b7,me as b8,zA as b9,vb as bA,hb as bB,db as bC,mb as bD,JA as bE,Ai as bF,_b as bG,eA as bH,kA as bI,_A as bJ,yl as bK,vp as bL,Tt as bM,Ru as bN,XA as bO,fR as bP,iR as bQ,aR as bR,oR as bS,BA as bT,ZA as bU,cv as bV,tA as bW,AA as bX,fA as bY,oA as bZ,DA as b_,GA as ba,WA as bb,gb as bc,VA as bd,lA as be,_n as bf,qe as bg,RA as bh,PA as bi,pA as bj,u_ as bk,ap as bl,Ar as bm,_l as bn,Hr as bo,sp as bp,Qp as bq,Kb as br,eR as bs,Xl as bt,HA as bu,Ya as bv,cb as bw,Ti as bx,sb as by,lb as bz,aA as c,nA as c0,QA as c1,YA as c2,Yr as c3,_R as c4,kR as c5,vA as d,oy as e,CA as f,Fn as g,F as h,ay as i,ye as j,tp as k,W as l,MA as m,Eo as n,s as o,O as p,Je as q,FA as r,E as s,EA as t,m_ as u,TA as v,re as w,NA as x,xA as y,Nu as z};
