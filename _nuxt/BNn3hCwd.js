import"./CR__Ohlt.js";import{cm as t,cn as u,L as c}from"./Dr010rql.js";import"./B-pl63Pz.js";function g(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function v(a,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,e.key,e)}}function m(a,r,n){return v(a.prototype,r),a}function h(a){switch(a){case 35916:return 33776;case 35918:return 33778;case 35919:return 33779;case 37493:return 37492;case 37497:return 37496;case 37495:return 37494;case 37840:return 37808;case 36493:return 36492}return null}var b=function(){function a(){g(this,a),this.supportCascades=!1}return m(a,[{key:"loadCubeData",value:function(n,e,l,o){if(!Array.isArray(n)){e._invertVScale=!e.invertY;var i=e.getEngine(),s=new t(n,6),f=s.numberOfMipmapLevels>1&&e.generateMipMaps;i._unpackFlipY(!0),s.uploadLevels(e,e.generateMipMaps),e.width=s.pixelWidth,e.height=s.pixelHeight,i._setCubeMapTextureParams(e,f,s.numberOfMipmapLevels-1),e.isReady=!0,e.onLoadedObservable.notifyObservers(e),e.onLoadedObservable.clear(),o&&o()}}},{key:"loadData",value:function(n,e,l,o){if(t.IsValid(n)){e._invertVScale=!e.invertY;var i=new t(n,1),s=h(i.glInternalFormat);s?(e.format=s,e._useSRGBBuffer=e.getEngine()._getUseSRGBBuffer(!0,e.generateMipMaps),e._gammaSpace=!0):e.format=i.glInternalFormat,l(i.pixelWidth,i.pixelHeight,e.generateMipMaps,!0,function(){i.uploadLevels(e,e.generateMipMaps)},i.isInvalid)}else if(u.IsValid(n)){var f=new u(e.getEngine());f._uploadAsync(n,e,o).then(function(){l(e.width,e.height,e.generateMipMaps,!0,function(){},!1)},function(p){c.Warn("Failed to load KTX2 texture data: ".concat(p.message)),l(0,0,!1,!1,function(){},!0)})}else c.Error("texture missing KTX identifier"),l(0,0,!1,!1,function(){},!0)}}]),a}();export{b as _KTXTextureLoader};
