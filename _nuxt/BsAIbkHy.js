import{ci as u,cj as c,L as m}from"./CvXGGgpH.js";import"./CtRFD05V.js";function s(n){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},s(n)}function v(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function p(n,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,b(e.key),e)}}function g(n,r,a){return r&&p(n.prototype,r),a&&p(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n}function b(n){var r=d(n,"string");return s(r)=="symbol"?r:r+""}function d(n,r){if(s(n)!="object"||!n)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var e=a.call(n,r||"default");if(s(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function h(n){switch(n){case 35916:return 33776;case 35918:return 33778;case 35919:return 33779;case 37493:return 37492;case 37497:return 37496;case 37495:return 37494;case 37840:return 37808;case 36493:return 36492}return null}var S=function(){function n(){v(this,n),this.supportCascades=!1}return g(n,[{key:"loadCubeData",value:function(a,e,t,l){if(!Array.isArray(a)){e._invertVScale=!e.invertY;var i=e.getEngine(),o=new u(a,6),f=o.numberOfMipmapLevels>1&&e.generateMipMaps;i._unpackFlipY(!0),o.uploadLevels(e,e.generateMipMaps),e.width=o.pixelWidth,e.height=o.pixelHeight,i._setCubeMapTextureParams(e,f,o.numberOfMipmapLevels-1),e.isReady=!0,e.onLoadedObservable.notifyObservers(e),e.onLoadedObservable.clear(),l&&l()}}},{key:"loadData",value:function(a,e,t,l){if(u.IsValid(a)){e._invertVScale=!e.invertY;var i=new u(a,1),o=h(i.glInternalFormat);o?(e.format=o,e._useSRGBBuffer=e.getEngine()._getUseSRGBBuffer(!0,e.generateMipMaps),e._gammaSpace=!0):e.format=i.glInternalFormat,t(i.pixelWidth,i.pixelHeight,e.generateMipMaps,!0,function(){i.uploadLevels(e,e.generateMipMaps)},i.isInvalid)}else if(c.IsValid(a)){var f=new c(e.getEngine());f._uploadAsync(a,e,l).then(function(){t(e.width,e.height,e.generateMipMaps,!0,function(){},!1)},function(y){m.Warn("Failed to load KTX2 texture data: ".concat(y.message)),t(0,0,!1,!1,function(){},!0)})}else m.Error("texture missing KTX identifier"),t(0,0,!1,!1,function(){},!0)}}])}();export{S as _KTXTextureLoader};
