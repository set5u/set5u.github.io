import"./CR__Ohlt.js";import{ch as s,aM as c}from"./Dr010rql.js";import"./B-pl63Pz.js";function D(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function v(o,l){for(var i=0;i<l.length;i++){var a=l[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}function C(o,l,i){return v(o.prototype,l),o}var M=function(){function o(){D(this,o),this.supportCascades=!0}return C(o,[{key:"loadCubeData",value:function(i,a,t,n){var p=a.getEngine(),e,r=!1,m=1e3;if(Array.isArray(i))for(var f=0;f<i.length;f++){var h=i[f];e=s.GetDDSInfo(h),a.width=e.width,a.height=e.height,r=(e.isRGB||e.isLuminance||e.mipmapCount>1)&&a.generateMipMaps,p._unpackFlipY(e.isCompressed),s.UploadDDSLevels(p,a,h,e,r,6,-1,f),!e.isFourCC&&e.mipmapCount===1?p.generateMipMapsForCubemap(a):m=e.mipmapCount-1}else{var u=i;e=s.GetDDSInfo(u),a.width=e.width,a.height=e.height,t&&(e.sphericalPolynomial=new c),r=(e.isRGB||e.isLuminance||e.mipmapCount>1)&&a.generateMipMaps,p._unpackFlipY(e.isCompressed),s.UploadDDSLevels(p,a,u,e,r,6),!e.isFourCC&&e.mipmapCount===1?p.generateMipMapsForCubemap(a,!1):m=e.mipmapCount-1}p._setCubeMapTextureParams(a,r,m),a.isReady=!0,a.onLoadedObservable.notifyObservers(a),a.onLoadedObservable.clear(),n&&n({isDDS:!0,width:a.width,info:e,data:i,texture:a})}},{key:"loadData",value:function(i,a,t){var n=s.GetDDSInfo(i),p=(n.isRGB||n.isLuminance||n.mipmapCount>1)&&a.generateMipMaps&&Math.max(n.width,n.height)>>n.mipmapCount-1===1;t(n.width,n.height,p,n.isFourCC,function(){s.UploadDDSLevels(a.getEngine(),a,i,n,p,1)})}}]),o}();export{M as _DDSTextureLoader};
