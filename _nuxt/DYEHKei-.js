import{bz as _t,Q as gt,Z as M,d as B,M as vt,L as J,bG as Gt,a2 as me,bH as Yn,O as yt,u as Lt,y as Te,bI as Pe}from"./CvXGGgpH.js";import"./CtRFD05V.js";function Mt(m,r){return Kn(m)||zn(m,r)||ke(m,r)||jn()}function jn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zn(m,r){var t=m==null?null:typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(t!=null){var e,n,a,o,_=[],u=!0,y=!1;try{if(a=(t=t.call(m)).next,r===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(e=a.call(t)).done)&&(_.push(e.value),_.length!==r);u=!0);}catch(v){y=!0,n=v}finally{try{if(!u&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(y)throw n}}return _}}function Kn(m){if(Array.isArray(m))return m}function N(m,r){var t=typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(!t){if(Array.isArray(m)||(t=ke(m))||r&&m&&typeof m.length=="number"){t&&(m=t);var e=0,n=function(){};return{s:n,n:function(){return e>=m.length?{done:!0}:{done:!1,value:m[e++]}},e:function(y){throw y},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,_=!1;return{s:function(){t=t.call(m)},n:function(){var y=t.next();return o=y.done,y},e:function(y){_=!0,a=y},f:function(){try{o||t.return==null||t.return()}finally{if(_)throw a}}}}function ke(m,r){if(m){if(typeof m=="string")return ge(m,r);var t={}.toString.call(m).slice(8,-1);return t==="Object"&&m.constructor&&(t=m.constructor.name),t==="Map"||t==="Set"?Array.from(m):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ge(m,r):void 0}}function ge(m,r){(r==null||r>m.length)&&(r=m.length);for(var t=0,e=Array(r);t<r;t++)e[t]=m[t];return e}function st(m){"@babel/helpers - typeof";return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},st(m)}function it(m,r){if(!(m instanceof r))throw new TypeError("Cannot call a class as a function")}function ve(m,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(m,Zn(e.key),e)}}function rt(m,r,t){return r&&ve(m.prototype,r),t&&ve(m,t),Object.defineProperty(m,"prototype",{writable:!1}),m}function Zn(m){var r=Xn(m,"string");return st(r)=="symbol"?r:r+""}function Xn(m,r){if(st(m)!="object"||!m)return m;var t=m[Symbol.toPrimitive];if(t!==void 0){var e=t.call(m,r||"default");if(st(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(m)}var qn=function(){function m(r,t,e,n){var a=this;if(it(this,m),this._pluginData=void 0,this._pluginDataInstances=[],this._collisionCBEnabled=!1,this._collisionEndedCBEnabled=!1,this.disableSync=!1,this._isDisposed=!1,this._shape=null,this._prestepType=_t.DISABLED,!!n){var o=n.getPhysicsEngine();if(!o)throw new Error("No Physics Engine available.");if(this._physicsEngine=o,o.getPluginVersion()!=2)throw new Error("Plugin version is incorrect. Expected version 2.");var _=o.getPhysicsPlugin();if(!_)throw new Error("No Physics Plugin available.");this._physicsPlugin=_,r.rotationQuaternion||(r.rotationQuaternion=gt.FromEulerAngles(r.rotation.x,r.rotation.y,r.rotation.z)),this.startAsleep=e,this._motionType=t,this.disableSync=t==0;var u=r;u.hasThinInstances?this._physicsPlugin.initBodyInstances(this,t,u):(r.parent&&r.computeWorldMatrix(!0),this._physicsPlugin.initBody(this,t,r.absolutePosition,r.absoluteRotationQuaternion)),this.transformNode=r,r.physicsBody=this,o.addBody(this),this._nodeDisposeObserver=r.onDisposeObservable.add(function(){a.dispose()})}}return rt(m,[{key:"disablePreStep",get:function(){return this._prestepType==_t.DISABLED},set:function(t){this._prestepType=t?_t.DISABLED:_t.TELEPORT}},{key:"getClassName",value:function(){return"PhysicsBody"}},{key:"clone",value:function(t){var e=new m(t,this.getMotionType(),this.startAsleep,this.transformNode.getScene());return e.shape=this.shape,e.setMassProperties(this.getMassProperties()),e.setLinearDamping(this.getLinearDamping()),e.setAngularDamping(this.getAngularDamping()),e}},{key:"updateBodyInstances",value:function(){var t=this.transformNode;t.hasThinInstances&&this._physicsPlugin.updateBodyInstances(this,t)}},{key:"numInstances",get:function(){return this._pluginDataInstances.length}},{key:"motionType",get:function(){return this._motionType}},{key:"shape",get:function(){return this._shape},set:function(t){this._shape=t,t&&this._physicsPlugin.setShape(this,t)}},{key:"getBoundingBox",value:function(){return this._physicsPlugin.getBodyBoundingBox(this)}},{key:"setEventMask",value:function(t,e){this._physicsPlugin.setEventMask(this,t,e)}},{key:"getEventMask",value:function(t){return this._physicsPlugin.getEventMask(this,t)}},{key:"setMotionType",value:function(t,e){this.disableSync=t==0,this._physicsPlugin.setMotionType(this,t,e)}},{key:"getMotionType",value:function(t){return this._physicsPlugin.getMotionType(this,t)}},{key:"setPrestepType",value:function(t){this._prestepType=t}},{key:"getPrestepType",value:function(){return this._prestepType}},{key:"computeMassProperties",value:function(t){return this._physicsPlugin.computeMassProperties(this,t)}},{key:"setMassProperties",value:function(t,e){this._physicsPlugin.setMassProperties(this,t,e)}},{key:"getMassProperties",value:function(t){return this._physicsPlugin.getMassProperties(this,t)}},{key:"setLinearDamping",value:function(t,e){this._physicsPlugin.setLinearDamping(this,t,e)}},{key:"getLinearDamping",value:function(t){return this._physicsPlugin.getLinearDamping(this,t)}},{key:"setAngularDamping",value:function(t,e){this._physicsPlugin.setAngularDamping(this,t,e)}},{key:"getAngularDamping",value:function(t){return this._physicsPlugin.getAngularDamping(this,t)}},{key:"setLinearVelocity",value:function(t,e){this._physicsPlugin.setLinearVelocity(this,t,e)}},{key:"getLinearVelocityToRef",value:function(t,e){this._physicsPlugin.getLinearVelocityToRef(this,t,e)}},{key:"getLinearVelocity",value:function(t){var e=new B;return this.getLinearVelocityToRef(e,t),e}},{key:"setAngularVelocity",value:function(t,e){this._physicsPlugin.setAngularVelocity(this,t,e)}},{key:"getAngularVelocityToRef",value:function(t,e){this._physicsPlugin.getAngularVelocityToRef(this,t,e)}},{key:"getAngularVelocity",value:function(t){var e=new B;return this.getAngularVelocityToRef(e,t),e}},{key:"applyImpulse",value:function(t,e,n){this._physicsPlugin.applyImpulse(this,t,e,n)}},{key:"applyAngularImpulse",value:function(t,e){this._physicsPlugin.applyAngularImpulse(this,t,e)}},{key:"applyForce",value:function(t,e,n){this._physicsPlugin.applyForce(this,t,e,n)}},{key:"getGeometry",value:function(){return this._physicsPlugin.getBodyGeometry(this)}},{key:"getCollisionObservable",value:function(){return this._physicsPlugin.getCollisionObservable(this)}},{key:"getCollisionEndedObservable",value:function(){return this._physicsPlugin.getCollisionEndedObservable(this)}},{key:"setCollisionCallbackEnabled",value:function(t){this._collisionCBEnabled=t,this._physicsPlugin.setCollisionCallbackEnabled(this,t)}},{key:"setCollisionEndedCallbackEnabled",value:function(t){this._collisionEndedCBEnabled=t,this._physicsPlugin.setCollisionEndedCallbackEnabled(this,t)}},{key:"getObjectCenterWorld",value:function(t){var e=new B;return this.getObjectCenterWorldToRef(e,t)}},{key:"getObjectCenterWorldToRef",value:function(t,e){var n;if(((n=this._pluginDataInstances)===null||n===void 0?void 0:n.length)>0){var a=e||0,o=this.transformNode._thinInstanceDataStorage.matrixData;o&&t.set(o[a*16+12],o[a*16+13],o[a*16+14])}else t.copyFrom(this.transformNode.position);return t}},{key:"addConstraint",value:function(t,e,n,a){this._physicsPlugin.addConstraint(this,t,e,n,a)}},{key:"syncWithBone",value:function(t,e,n,a,o,_){var u=this.transformNode;if(u.rotationQuaternion)if(o){var y=M.Quaternion[0];t.getRotationQuaternionToRef(1,e,y),y.multiplyToRef(o,u.rotationQuaternion)}else t.getRotationQuaternionToRef(1,e,u.rotationQuaternion);var v=M.Vector3[0],H=M.Vector3[1];_||(_=M.Vector3[2],_.x=0,_.y=1,_.z=0),t.getDirectionToRef(_,e,H),t.getAbsolutePositionToRef(e,v),a==null&&n&&(a=n.length()),a!=null&&(v.x+=H.x*a,v.y+=H.y*a,v.z+=H.z*a),u.setAbsolutePosition(v)}},{key:"iterateOverAllInstances",value:function(t){var e;if(((e=this._pluginDataInstances)===null||e===void 0?void 0:e.length)>0)for(var n=0;n<this._pluginDataInstances.length;n++)t(this,n);else t(this,void 0)}},{key:"setGravityFactor",value:function(t,e){this._physicsPlugin.setGravityFactor(this,t,e)}},{key:"getGravityFactor",value:function(t){return this._physicsPlugin.getGravityFactor(this,t)}},{key:"setTargetTransform",value:function(t,e,n){this._physicsPlugin.setTargetTransform(this,t,e,n)}},{key:"isDisposed",get:function(){return this._isDisposed}},{key:"dispose",value:function(){this._isDisposed||(this._collisionCBEnabled&&this.setCollisionCallbackEnabled(!1),this._collisionEndedCBEnabled&&this.setCollisionEndedCallbackEnabled(!1),this._nodeDisposeObserver&&(this.transformNode.onDisposeObservable.remove(this._nodeDisposeObserver),this._nodeDisposeObserver=null),this._physicsEngine.removeBody(this),this._physicsPlugin.removeBody(this),this._physicsPlugin.disposeBody(this),this.transformNode.physicsBody=null,this._pluginData=null,this._pluginDataInstances.length=0,this._isDisposed=!0,this.shape=null)}}])}(),be=function(){function m(r,t){if(it(this,m),this._pluginData=void 0,this._isTrigger=!1,this._isDisposed=!1,!!t){var e=t.getPhysicsEngine();if(!e)throw new Error("No Physics Engine available.");if(e.getPluginVersion()!=2)throw new Error("Plugin version is incorrect. Expected version 2.");var n=e.getPhysicsPlugin();if(!n)throw new Error("No Physics Plugin available.");if(this._physicsPlugin=n,r.pluginData!==void 0&&r.pluginData!==null)this._pluginData=r.pluginData,this._type=this._physicsPlugin.getShapeType(this);else if(r.type!==void 0&&r.type!==null){var a;this._type=r.type;var o=(a=r.parameters)!==null&&a!==void 0?a:{};this._physicsPlugin.initShape(this,r.type,o)}}}return rt(m,[{key:"getClassName",value:function(){return"PhysicsShape"}},{key:"type",get:function(){return this._type}},{key:"filterMembershipMask",get:function(){return this._physicsPlugin.getShapeFilterMembershipMask(this)},set:function(t){this._physicsPlugin.setShapeFilterMembershipMask(this,t)}},{key:"filterCollideMask",get:function(){return this._physicsPlugin.getShapeFilterCollideMask(this)},set:function(t){this._physicsPlugin.setShapeFilterCollideMask(this,t)}},{key:"material",get:function(){return this._material||(this._material=this._physicsPlugin.getMaterial(this)),this._material},set:function(t){this._physicsPlugin.setMaterial(this,t),this._material=t}},{key:"density",get:function(){return this._physicsPlugin.getDensity(this)},set:function(t){this._physicsPlugin.setDensity(this,t)}},{key:"addChildFromParent",value:function(t,e,n){var a=n.computeWorldMatrix(!0),o=t.computeWorldMatrix(!0),_=M.Matrix[0];a.multiplyToRef(vt.Invert(o),_);var u=M.Vector3[0],y=M.Quaternion[0],v=M.Vector3[1];_.decompose(v,y,u),this._physicsPlugin.addChild(this,e,u,y,v)}},{key:"addChild",value:function(t,e,n,a){this._physicsPlugin.addChild(this,t,e,n,a)}},{key:"removeChild",value:function(t){this._physicsPlugin.removeChild(this,t)}},{key:"getNumChildren",value:function(){return this._physicsPlugin.getNumChildren(this)}},{key:"getBoundingBox",value:function(){return this._physicsPlugin.getBoundingBox(this)}},{key:"isTrigger",get:function(){return this._isTrigger},set:function(t){this._isTrigger!==t&&(this._isTrigger=t,this._physicsPlugin.setTrigger(this,t))}},{key:"dispose",value:function(){this._isDisposed||(this._physicsPlugin.disposeShape(this),this._isDisposed=!0)}}])}(),ni=function(){function m(r,t){var e,n=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{mass:0},o=arguments.length>3?arguments[3]:void 0;if(it(this,m),this.transformNode=r,this.type=t,this._options=a,this._scene=o,this._disposeShapeWhenDisposed=!0,!this.transformNode){J.Error("No object was provided. A physics object is obligatory");return}var _=r;if(this.transformNode.parent&&this._options.mass!==0&&_.hasThinInstances&&J.Warn("A physics body has been created for an object which has a parent and thin instances. Babylon physics currently works in local space so unexpected issues may occur."),!this._scene&&r.getScene&&(this._scene=r.getScene()),!!this._scene){this._options.mass=a.mass===void 0?0:a.mass,this._options.friction=a.friction===void 0?.2:a.friction,this._options.restitution=a.restitution===void 0?.2:a.restitution;var u=this._options.mass===0?0:2,y=(e=this._options.startAsleep)!==null&&e!==void 0?e:!1;this.body=new qn(r,u,y,this._scene),this._addSizeOptions(),t.getClassName&&t.getClassName()==="PhysicsShape"?(this.shape=t,this._disposeShapeWhenDisposed=!1):this.shape=new be({type:t,parameters:this._options},this._scene),this._options.isTriggerShape&&(this.shape.isTrigger=!0),this.material={friction:this._options.friction,restitution:this._options.restitution},this.body.shape=this.shape,this.shape.material=this.material,this.body.setMassProperties({mass:this._options.mass}),this._nodeDisposeObserver=this.transformNode.onDisposeObservable.add(function(){n.dispose()})}}return rt(m,[{key:"_getObjectBoundingBox",value:function(){return this.transformNode.getRawBoundingInfo?this.transformNode.getRawBoundingInfo().boundingBox:new Gt(new B(-.5,-.5,-.5),new B(.5,.5,.5))}},{key:"_hasVertices",value:function(t){return(t==null?void 0:t.getTotalVertices())>0}},{key:"_addSizeOptions",value:function(){var t,e;this.transformNode.computeWorldMatrix(!0);var n=this._getObjectBoundingBox(),a=M.Vector3[0];a.copyFrom(n.extendSize),a.scaleInPlace(2),a.multiplyInPlace(this.transformNode.absoluteScaling),a.x=Math.abs(a.x),a.y=Math.abs(a.y),a.z=Math.abs(a.z);var o=M.Vector3[1];if(o.copyFrom(n.minimum),o.multiplyInPlace(this.transformNode.absoluteScaling),!this._options.center){var _=new B;_.copyFrom(n.center),_.multiplyInPlace(this.transformNode.absoluteScaling),this._options.center=_}switch(this.type){case 0:!this._options.radius&&me.WithinEpsilon(a.x,a.y,1e-4)&&me.WithinEpsilon(a.x,a.z,1e-4)?this._options.radius=a.x/2:this._options.radius||(J.Warn("Non uniform scaling is unsupported for sphere shapes. Setting the radius to the biggest bounding box extent."),this._options.radius=Math.max(a.x,a.y,a.z)/2);break;case 1:{var u,y,v,H=a.x/2;this._options.radius=(u=this._options.radius)!==null&&u!==void 0?u:H,this._options.pointA=(y=this._options.pointA)!==null&&y!==void 0?y:new B(0,o.y+H,0),this._options.pointB=(v=this._options.pointB)!==null&&v!==void 0?v:new B(0,o.y+a.y-H,0)}break;case 2:{var P,b,S,I=a.x/2;this._options.radius=(P=this._options.radius)!==null&&P!==void 0?P:I,this._options.pointA=(b=this._options.pointA)!==null&&b!==void 0?b:new B(0,o.y,0),this._options.pointB=(S=this._options.pointB)!==null&&S!==void 0?S:new B(0,o.y+a.y,0)}break;case 6:case 4:case 7:if(!this._options.mesh&&this._hasVertices(this.transformNode))this._options.mesh=this.transformNode;else if(!this._options.mesh||!this._hasVertices(this._options.mesh))throw new Error("No valid mesh was provided for mesh or convex hull shape parameter. Please provide a mesh with valid geometry (number of vertices greater than 0).");break;case 3:this._options.extents=(t=this._options.extents)!==null&&t!==void 0?t:new B(a.x,a.y,a.z),this._options.rotation=(e=this._options.rotation)!==null&&e!==void 0?e:gt.Identity();break}}},{key:"dispose",value:function(){this._nodeDisposeObserver&&(this.body.transformNode.onDisposeObservable.remove(this._nodeDisposeObserver),this._nodeDisposeObserver=null),this.body.dispose(),this._disposeShapeWhenDisposed&&this.shape.dispose()}}])}(),Jn=function(){function m(r,t,e){it(this,m),this._vertices=[],this._indices=[],this._isRightHanded=e.useRightHandedSystem,this._collectIndices=t}return rt(m,[{key:"addNodeMeshes",value:function(t,e){var n=this;t.computeWorldMatrix(!0);var a=M.Matrix[0];if(vt.ScalingToRef(t.absoluteScaling.x,t.absoluteScaling.y,t.absoluteScaling.z,a),t instanceof Lt?this._addMesh(t,a):t instanceof Pe&&this._addMesh(t.sourceMesh,a),e){var o=M.Matrix[1];t.computeWorldMatrix().invertToRef(o);var _=M.Matrix[2];o.multiplyToRef(a,_);var u=t.getChildMeshes(!1);u.filter(function(y){return!y.physicsBody}).forEach(function(y){var v=y.computeWorldMatrix(),H=M.Matrix[3];v.multiplyToRef(_,H),y instanceof Lt?n._addMesh(y,H):y instanceof Pe&&n._addMesh(y.sourceMesh,H)})}}},{key:"_addMesh",value:function(t,e){for(var n=t.getVerticesData(Te.PositionKind)||[],a=n.length/3,o=this._vertices.length,_=0;_<a;_++){var u=new B(n[_*3+0],n[_*3+1],n[_*3+2]);this._vertices.push(B.TransformCoordinates(u,e))}if(this._collectIndices){var y=t.getIndices();if(y)for(var v=0;v<y.length;v+=3)this._isRightHanded?(this._indices.push(y[v+0]+o),this._indices.push(y[v+1]+o),this._indices.push(y[v+2]+o)):(this._indices.push(y[v+2]+o),this._indices.push(y[v+1]+o),this._indices.push(y[v+0]+o))}}},{key:"getVertices",value:function(t){for(var e=this._vertices.length*3,n=4,a=e*n,o=t._malloc(a),_=new Float32Array(t.HEAPU8.buffer,o,e),u=0;u<this._vertices.length;u++)_[u*3+0]=this._vertices[u].x,_[u*3+1]=this._vertices[u].y,_[u*3+2]=this._vertices[u].z;return{offset:o,numObjects:e}}},{key:"freeBuffer",value:function(t,e){t._free(e.offset)}},{key:"getTriangles",value:function(t){for(var e=4,n=this._indices.length*e,a=t._malloc(n),o=new Int32Array(t.HEAPU8.buffer,a,this._indices.length),_=0;_<this._indices.length;_++)o[_]=this._indices[_];return{offset:a,numObjects:this._indices.length}}}])}(),Ce=rt(function m(r){it(this,m),this.hpBodyId=r,this.userMassProps={centerOfMass:void 0,mass:void 0,inertia:void 0,inertiaOrientation:void 0}}),He=rt(function m(){it(this,m),this.bodyId=BigInt(0),this.position=new B,this.normal=new B}),Se=function(){function m(){it(this,m),this.contactOnA=new He,this.contactOnB=new He,this.impulseApplied=0,this.type=0}return rt(m,null,[{key:"readToRef",value:function(t,e,n){var a=new Int32Array(t,e),o=new Float32Array(t,e),_=2;n.contactOnA.bodyId=BigInt(a[_]),n.contactOnA.position.set(o[_+8],o[_+9],o[_+10]),n.contactOnA.normal.set(o[_+11],o[_+12],o[_+13]);var u=18;n.contactOnB.bodyId=BigInt(a[u]),n.contactOnB.position.set(o[u+8],o[u+9],o[u+10]),n.contactOnB.normal.set(o[u+11],o[u+12],o[u+13]),n.impulseApplied=o[u+13+3],n.type=a[0]}}])}(),Ae=function(){function m(){it(this,m),this.bodyIdA=BigInt(0),this.bodyIdB=BigInt(0),this.type=0}return rt(m,null,[{key:"readToRef",value:function(t,e,n){var a=new Int32Array(t,e);n.type=a[0],n.bodyIdA=BigInt(a[2]),n.bodyIdB=BigInt(a[6])}}])}(),ii=function(){function m(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:HK;if(it(this,m),this._useDeltaForWorldStep=r,this._hknp={},this.name="HavokPlugin",this._fixedTimeStep=1/60,this._tmpVec3=Yn(3,B.Zero),this._bodies=new Map,this._shapes=new Map,this._bodyCollisionObservable=new Map,this._constraintToBodyIdPair=new Map,this._bodyCollisionEndedObservable=new Map,this.onCollisionObservable=new yt,this.onCollisionEndedObservable=new yt,this.onTriggerCollisionObservable=new yt,typeof t=="function"){J.Error("Havok is not ready. Please make sure you await HK() before using the plugin.");return}else this._hknp=t;if(!this.isSupported()){J.Error("Havok is not available. Please make sure you included the js file.");return}this.world=this._hknp.HP_World_Create()[1],this._queryCollector=this._hknp.HP_QueryCollector_Create(1)[1]}return rt(m,[{key:"isSupported",value:function(){return this._hknp!==void 0}},{key:"setGravity",value:function(t){this._hknp.HP_World_SetGravity(this.world,this._bVecToV3(t))}},{key:"setTimeStep",value:function(t){this._fixedTimeStep=t}},{key:"getTimeStep",value:function(){return this._fixedTimeStep}},{key:"executeStep",value:function(t,e){var n=N(e),a;try{for(n.s();!(a=n.n()).done;){var o=a.value;o.disablePreStep||this.setPhysicsBodyTransformation(o,o.transformNode)}}catch(H){n.e(H)}finally{n.f()}var _=this._useDeltaForWorldStep?t:this._fixedTimeStep;this._hknp.HP_World_SetIdealStepTime(this.world,_),this._hknp.HP_World_Step(this.world,_),this._bodyBuffer=this._hknp.HP_World_GetBodyBuffer(this.world)[1];var u=N(e),y;try{for(u.s();!(y=u.n()).done;){var v=y.value;v.disableSync||this.sync(v)}}catch(H){u.e(H)}finally{u.f()}this._notifyCollisions(),this._notifyTriggers()}},{key:"getPluginVersion",value:function(){return 2}},{key:"setVelocityLimits",value:function(t,e){this._hknp.HP_World_SetSpeedLimit(this.world,t,e)}},{key:"getMaxLinearVelocity",value:function(){var t=this._hknp.HP_World_GetSpeedLimit(this.world);return t[1]}},{key:"getMaxAngularVelocity",value:function(){var t=this._hknp.HP_World_GetSpeedLimit(this.world);return t[2]}},{key:"initBody",value:function(t,e,n,a){t._pluginData=new Ce(this._hknp.HP_Body_Create()[1]),this._internalSetMotionType(t._pluginData,e);var o=[this._bVecToV3(n),this._bQuatToV4(a)];this._hknp.HP_Body_SetQTransform(t._pluginData.hpBodyId,o),this._hknp.HP_World_AddBody(this.world,t._pluginData.hpBodyId,t.startAsleep),this._bodies.set(t._pluginData.hpBodyId[0],{body:t,index:0})}},{key:"removeBody",value:function(t){if(t._pluginDataInstances&&t._pluginDataInstances.length>0){var e=N(t._pluginDataInstances),n;try{for(e.s();!(n=e.n()).done;){var a=n.value;this._bodyCollisionObservable.delete(a.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,a.hpBodyId),this._bodies.delete(a.hpBodyId[0])}}catch(o){e.e(o)}finally{e.f()}}t._pluginData&&(this._bodyCollisionObservable.delete(t._pluginData.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,t._pluginData.hpBodyId),this._bodies.delete(t._pluginData.hpBodyId[0]))}},{key:"initBodyInstances",value:function(t,e,n){var a,o,_=this,u=(a=(o=n._thinInstanceDataStorage)===null||o===void 0?void 0:o.instancesCount)!==null&&a!==void 0?a:0,y=n._thinInstanceDataStorage.matrixData;y&&(this._createOrUpdateBodyInstances(t,e,y,0,u,!1),t._pluginDataInstances.forEach(function(v,H){_._bodies.set(v.hpBodyId[0],{body:t,index:H})}))}},{key:"_createOrUpdateBodyInstances",value:function(t,e,n,a,o,_){for(var u=M.Quaternion[0],y=vt.Identity(),v=a;v<o;v++){var H=[n[v*16+12],n[v*16+13],n[v*16+14]],P=void 0;_?P=t._pluginDataInstances[v].hpBodyId:P=this._hknp.HP_Body_Create()[1],y.setRowFromFloats(0,n[v*16+0],n[v*16+1],n[v*16+2],0),y.setRowFromFloats(1,n[v*16+4],n[v*16+5],n[v*16+6],0),y.setRowFromFloats(2,n[v*16+8],n[v*16+9],n[v*16+10],0),gt.FromRotationMatrixToRef(y,u);var b=[H,[u.x,u.y,u.z,u.w]];if(this._hknp.HP_Body_SetQTransform(P,b),!_){var S=new Ce(P);t._pluginDataInstances.length&&(S.userMassProps=t._pluginDataInstances[0].userMassProps),this._internalSetMotionType(S,e),this._internalUpdateMassProperties(S),t._pluginDataInstances.push(S),this._hknp.HP_World_AddBody(this.world,P,t.startAsleep),S.worldTransformOffset=this._hknp.HP_Body_GetWorldTransformOffset(P)[1]}}}},{key:"updateBodyInstances",value:function(t,e){var n,a,o=(n=(a=e._thinInstanceDataStorage)===null||a===void 0?void 0:a.instancesCount)!==null&&n!==void 0?n:0,_=e._thinInstanceDataStorage.matrixData;if(_){var u=t._pluginDataInstances.length,y=this.getMotionType(t);if(o>u){this._createOrUpdateBodyInstances(t,y,_,u,o,!1);var v=this._hknp.HP_Body_GetShape(t._pluginDataInstances[0].hpBodyId)[1];if(!v[0]){var H;v[0]=(H=t.shape)===null||H===void 0?void 0:H._pluginData[0]}for(var P=u;P<o;P++)this._hknp.HP_Body_SetShape(t._pluginDataInstances[P].hpBodyId,v),this._internalUpdateMassProperties(t._pluginDataInstances[P]),this._bodies.set(t._pluginDataInstances[P].hpBodyId[0],{body:t,index:P})}else if(o<u){for(var b=u-o,S=0;S<b;S++){var I=t._pluginDataInstances.pop();this._bodies.delete(I.hpBodyId[0]),this._hknp.HP_World_RemoveBody(this.world,I.hpBodyId),this._hknp.HP_Body_Release(I.hpBodyId)}this._createOrUpdateBodyInstances(t,y,_,0,o,!0)}}}},{key:"sync",value:function(t){this.syncTransform(t,t.transformNode)}},{key:"syncTransform",value:function(t,e){if(t._pluginDataInstances.length){var n=e,a=n._thinInstanceDataStorage.matrixData;if(!a)return;for(var o=t._pluginDataInstances.length,_=0;_<o;_++){for(var u=t._pluginDataInstances[_].worldTransformOffset,y=new Float32Array(this._hknp.HEAPU8.buffer,this._bodyBuffer+u,16),v=_*16,H=0;H<15;H++)(H&3)!=3&&(a[v+H]=y[H]);a[v+15]=1}n.thinInstanceBufferUpdated("matrix")}else try{var P=this._hknp.HP_Body_GetQTransform(t._pluginData.hpBodyId)[1],b=P[0],S=P[1],I=M.Quaternion[0];I.set(S[0],S[1],S[2],S[3]);var x=e.parent;if(x&&!x.getWorldMatrix().isIdentity()){var E;x.computeWorldMatrix(!0),M.Vector3[1].copyFrom(e.scaling),I.normalize();var W=M.Matrix[0],F=M.Vector3[0];F.copyFromFloats(b[0],b[1],b[2]),vt.ComposeToRef(e.absoluteScaling,I,F,W);var O=M.Matrix[1];x.getWorldMatrix().invertToRef(O);var Y=M.Matrix[2];W.multiplyToRef(O,Y),Y.decomposeToTransformNode(e),(E=e.rotationQuaternion)===null||E===void 0||E.normalize(),e.scaling.copyFrom(M.Vector3[1])}else e.position.set(b[0],b[1],b[2]),e.rotationQuaternion?e.rotationQuaternion.copyFrom(I):I.toEulerAnglesToRef(e.rotation)}catch(Z){J.Error("Syncing transform failed for node ".concat(e.name,": ").concat(Z.message,"..."))}}},{key:"setShape",value:function(t,e){var n,a,o,_=e&&e._pluginData?e._pluginData:BigInt(0);if(!(t.transformNode instanceof Lt)||!((n=t.transformNode._thinInstanceDataStorage)!==null&&n!==void 0&&n.matrixData)){this._hknp.HP_Body_SetShape(t._pluginData.hpBodyId,_),this._internalUpdateMassProperties(t._pluginData);return}for(var u=t.transformNode,y=(a=(o=u._thinInstanceDataStorage)===null||o===void 0?void 0:o.instancesCount)!==null&&a!==void 0?a:0,v=0;v<y;v++)this._hknp.HP_Body_SetShape(t._pluginDataInstances[v].hpBodyId,_),this._internalUpdateMassProperties(t._pluginDataInstances[v])}},{key:"_getPluginReference",value:function(t,e){var n;return(n=t._pluginDataInstances)!==null&&n!==void 0&&n.length?t._pluginDataInstances[e??0]:t._pluginData}},{key:"getShape",value:function(t){var e=this._getPluginReference(t),n=this._hknp.HP_Body_GetShape(e.hpBodyId)[1];if(n!=0){var a=t.transformNode.getScene();return new be({pluginData:n},a)}return null}},{key:"getShapeType",value:function(t){return t.type?t.type:this._hknp.HP_Shape_GetType(t._pluginData)}},{key:"setEventMask",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){a._hknp.HP_Body_SetEventMask(o.hpBodyId,e)},n)}},{key:"getEventMask",value:function(t,e){var n=this._getPluginReference(t,e);return this._hknp.HP_Body_GetEventMask(n.hpBodyId)[1]}},{key:"_fromMassPropertiesTuple",value:function(t){return{centerOfMass:B.FromArray(t[0]),mass:t[1],inertia:B.FromArray(t[2]),inertiaOrientation:gt.FromArray(t[3])}}},{key:"_internalUpdateMassProperties",value:function(t){var e=this._internalComputeMassProperties(t),n=t.userMassProps;n.centerOfMass&&(e[0]=n.centerOfMass.asArray()),n.mass!=null&&(e[1]=n.mass),n.inertia&&(e[2]=n.inertia.asArray()),n.inertiaOrientation&&(e[3]=n.inertiaOrientation.asArray()),this._hknp.HP_Body_SetMassProperties(t.hpBodyId,e)}},{key:"_internalSetMotionType",value:function(t,e){switch(e){case 0:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.STATIC);break;case 1:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.KINEMATIC);break;case 2:this._hknp.HP_Body_SetMotionType(t.hpBodyId,this._hknp.MotionType.DYNAMIC);break}}},{key:"setMotionType",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){a._internalSetMotionType(o,e)},n)}},{key:"getMotionType",value:function(t,e){var n=this._getPluginReference(t,e),a=this._hknp.HP_Body_GetMotionType(n.hpBodyId)[1];switch(a){case this._hknp.MotionType.STATIC:return 0;case this._hknp.MotionType.KINEMATIC:return 1;case this._hknp.MotionType.DYNAMIC:return 2}throw new Error("Unknown motion type: "+a)}},{key:"setActivationControl",value:function(t,e){switch(e){case 1:this._hknp.HP_Body_SetActivationControl(t._pluginData.hpBodyId,this._hknp.ActivationControl.ALWAYS_ACTIVE);break;case 2:this._hknp.HP_Body_SetActivationControl(t._pluginData.hpBodyId,this._hknp.ActivationControl.ALWAYS_INACTIVE);break;case 0:this._hknp.HP_Body_SetActivationControl(t._pluginData.hpBodyId,this._hknp.ActivationControl.SIMULATION_CONTROLLED);break}}},{key:"_internalComputeMassProperties",value:function(t){var e=this._hknp.HP_Body_GetShape(t.hpBodyId);if(e[0]==this._hknp.Result.RESULT_OK){var n=this._hknp.HP_Shape_BuildMassProperties(e[1]);if(n[0]==this._hknp.Result.RESULT_OK)return n[1]}return[[0,0,0],1,[1,1,1],[0,0,0,1]]}},{key:"computeMassProperties",value:function(t,e){var n=this._getPluginReference(t,e),a=this._internalComputeMassProperties(n);return this._fromMassPropertiesTuple(a)}},{key:"setMassProperties",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){o.userMassProps=e,a._internalUpdateMassProperties(o)},n)}},{key:"getMassProperties",value:function(t,e){var n=this._getPluginReference(t,e),a=this._hknp.HP_Body_GetMassProperties(n.hpBodyId)[1];return this._fromMassPropertiesTuple(a)}},{key:"setLinearDamping",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){a._hknp.HP_Body_SetLinearDamping(o.hpBodyId,e)},n)}},{key:"getLinearDamping",value:function(t,e){var n=this._getPluginReference(t,e);return this._hknp.HP_Body_GetLinearDamping(n.hpBodyId)[1]}},{key:"setAngularDamping",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){a._hknp.HP_Body_SetAngularDamping(o.hpBodyId,e)},n)}},{key:"getAngularDamping",value:function(t,e){var n=this._getPluginReference(t,e);return this._hknp.HP_Body_GetAngularDamping(n.hpBodyId)[1]}},{key:"setLinearVelocity",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){a._hknp.HP_Body_SetLinearVelocity(o.hpBodyId,a._bVecToV3(e))},n)}},{key:"getLinearVelocityToRef",value:function(t,e,n){var a=this._getPluginReference(t,n),o=this._hknp.HP_Body_GetLinearVelocity(a.hpBodyId)[1];this._v3ToBvecRef(o,e)}},{key:"_applyToBodyOrInstances",value:function(t,e,n){var a;if(((a=t._pluginDataInstances)===null||a===void 0?void 0:a.length)>0&&n===void 0)for(var o=0;o<t._pluginDataInstances.length;o++)e(t._pluginDataInstances[o]);else e(this._getPluginReference(t,n))}},{key:"applyImpulse",value:function(t,e,n,a){var o=this;this._applyToBodyOrInstances(t,function(_){o._hknp.HP_Body_ApplyImpulse(_.hpBodyId,o._bVecToV3(n),o._bVecToV3(e))},a)}},{key:"applyAngularImpulse",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){a._hknp.HP_Body_ApplyAngularImpulse(o.hpBodyId,a._bVecToV3(e))},n)}},{key:"applyForce",value:function(t,e,n,a){e.scaleToRef(this.getTimeStep(),this._tmpVec3[0]),this.applyImpulse(t,this._tmpVec3[0],n,a)}},{key:"setAngularVelocity",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){a._hknp.HP_Body_SetAngularVelocity(o.hpBodyId,a._bVecToV3(e))},n)}},{key:"getAngularVelocityToRef",value:function(t,e,n){var a=this._getPluginReference(t,n),o=this._hknp.HP_Body_GetAngularVelocity(a.hpBodyId)[1];this._v3ToBvecRef(o,e)}},{key:"setPhysicsBodyTransformation",value:function(t,e){if(t.getPrestepType()==_t.TELEPORT){var n=t.transformNode;if(t.numInstances>0){var a=n,o=a._thinInstanceDataStorage.matrixData;if(!o)return;var _=t.numInstances;this._createOrUpdateBodyInstances(t,t.getMotionType(),o,0,_,!0)}else this._hknp.HP_Body_SetQTransform(t._pluginData.hpBodyId,this._getTransformInfos(e))}else t.getPrestepType()==_t.ACTION?this.setTargetTransform(t,e.absolutePosition,e.absoluteRotationQuaternion):t.getPrestepType()==_t.DISABLED?J.Warn("Prestep type is set to DISABLED. Unable to set physics body transformation."):J.Warn("Invalid prestep type set to physics body.")}},{key:"setTargetTransform",value:function(t,e,n,a){var o=this;this._applyToBodyOrInstances(t,function(_){o._hknp.HP_Body_SetTargetQTransform(_.hpBodyId,[o._bVecToV3(e),o._bQuatToV4(n)])},a)}},{key:"setGravityFactor",value:function(t,e,n){var a=this;this._applyToBodyOrInstances(t,function(o){a._hknp.HP_Body_SetGravityFactor(o.hpBodyId,e)},n)}},{key:"getGravityFactor",value:function(t,e){var n=this._getPluginReference(t,e);return this._hknp.HP_Body_GetGravityFactor(n.hpBodyId)[1]}},{key:"disposeBody",value:function(t){if(t._pluginDataInstances&&t._pluginDataInstances.length>0){var e=N(t._pluginDataInstances),n;try{for(e.s();!(n=e.n()).done;){var a=n.value;this._hknp.HP_Body_Release(a.hpBodyId),a.hpBodyId=void 0}}catch(o){e.e(o)}finally{e.f()}}t._pluginData&&(this._hknp.HP_Body_Release(t._pluginData.hpBodyId),t._pluginData.hpBodyId=void 0)}},{key:"_createOptionsFromGroundMesh",value:function(t){var e=t.groundMesh;if(e){var n=e.getVerticesData(Te.PositionKind),a=e.computeWorldMatrix(!0),o=[],_;for(_=0;_<n.length;_+=3)B.FromArrayToRef(n,_,M.Vector3[0]),B.TransformCoordinatesToRef(M.Vector3[0],a,M.Vector3[1]),M.Vector3[1].toArray(o,_);n=o;for(var u=~~(Math.sqrt(n.length/3)-1),y=e.getBoundingInfo(),v=Math.min(y.boundingBox.extendSizeWorld.x,y.boundingBox.extendSizeWorld.z),H=y.boundingBox.minimumWorld.x,P=y.boundingBox.minimumWorld.y,b=y.boundingBox.minimumWorld.z,S=new Float32Array((u+1)*(u+1)),I=v*2/u,x=0;x<S.length;x++)S[x]=P;for(var E=0;E<n.length;E=E+3){var W=Math.round((n[E+0]-H)/I),F=u-Math.round((n[E+2]-b)/I),O=n[E+1]-P;S[F*(u+1)+W]=O}t.numHeightFieldSamplesX=u+1,t.numHeightFieldSamplesZ=u+1,t.heightFieldSizeX=y.boundingBox.extendSizeWorld.x*2,t.heightFieldSizeZ=y.boundingBox.extendSizeWorld.z*2,t.heightFieldData=S}}},{key:"initShape",value:function(t,e,n){switch(e){case 0:{var a=n.radius||1,o=n.center?this._bVecToV3(n.center):[0,0,0];t._pluginData=this._hknp.HP_Shape_CreateSphere(o,a)[1]}break;case 3:{var _=n.rotation?this._bQuatToV4(n.rotation):[0,0,0,1],u=n.extents?this._bVecToV3(n.extents):[1,1,1],y=n.center?this._bVecToV3(n.center):[0,0,0];t._pluginData=this._hknp.HP_Shape_CreateBox(y,_,u)[1]}break;case 1:{var v=n.pointA?this._bVecToV3(n.pointA):[0,0,0],H=n.pointB?this._bVecToV3(n.pointB):[0,1,0],P=n.radius||0;t._pluginData=this._hknp.HP_Shape_CreateCapsule(v,H,P)[1]}break;case 5:t._pluginData=this._hknp.HP_Shape_CreateContainer()[1];break;case 2:{var b=n.pointA?this._bVecToV3(n.pointA):[0,0,0],S=n.pointB?this._bVecToV3(n.pointB):[0,1,0],I=n.radius||0;t._pluginData=this._hknp.HP_Shape_CreateCylinder(b,S,I)[1]}break;case 4:case 6:{var x=n.mesh;if(x){var E=!!n.includeChildMeshes,W=e!=4,F=new Jn(x,W,x==null?void 0:x.getScene());F.addNodeMeshes(x,E);var O=F.getVertices(this._hknp),Y=O.numObjects/3;if(e==4)t._pluginData=this._hknp.HP_Shape_CreateConvexHull(O.offset,Y)[1];else{var Z=F.getTriangles(this._hknp),ht=Z.numObjects/3;t._pluginData=this._hknp.HP_Shape_CreateMesh(O.offset,Y,Z.offset,ht)[1],F.freeBuffer(this._hknp,Z)}F.freeBuffer(this._hknp,O)}else throw new Error("No mesh provided to create physics shape.")}break;case 7:if(n.groundMesh&&this._createOptionsFromGroundMesh(n),n.numHeightFieldSamplesX&&n.numHeightFieldSamplesZ&&n.heightFieldSizeX&&n.heightFieldSizeZ&&n.heightFieldData){for(var $=n.numHeightFieldSamplesX*n.numHeightFieldSamplesZ,at=$*4,j=this._hknp._malloc(at),w=new Float32Array(this._hknp.HEAPU8.buffer,j,$),D=0;D<n.numHeightFieldSamplesX;D++)for(var G=0;G<n.numHeightFieldSamplesZ;G++){var z=G*n.numHeightFieldSamplesX+D,L=(n.numHeightFieldSamplesX-1-D)*n.numHeightFieldSamplesZ+G;w[z]=n.heightFieldData[L]}var mt=n.heightFieldSizeX/(n.numHeightFieldSamplesX-1),Pt=n.heightFieldSizeZ/(n.numHeightFieldSamplesZ-1);t._pluginData=this._hknp.HP_Shape_CreateHeightField(n.numHeightFieldSamplesX,n.numHeightFieldSamplesZ,[mt,1,Pt],j)[1],this._hknp._free(j)}else throw new Error("Missing required heightfield parameters");break;default:throw new Error("Unsupported Shape Type.")}this._shapes.set(t._pluginData[0],t)}},{key:"setShapeFilterMembershipMask",value:function(t,e){var n=this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][1];this._hknp.HP_Shape_SetFilterInfo(t._pluginData,[e,n])}},{key:"getShapeFilterMembershipMask",value:function(t){return this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][0]}},{key:"setShapeFilterCollideMask",value:function(t,e){var n=this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][0];this._hknp.HP_Shape_SetFilterInfo(t._pluginData,[n,e])}},{key:"getShapeFilterCollideMask",value:function(t){return this._hknp.HP_Shape_GetFilterInfo(t._pluginData)[1][1]}},{key:"setMaterial",value:function(t,e){var n,a,o,_,u,y=(n=e.friction)!==null&&n!==void 0?n:.5,v=(a=e.staticFriction)!==null&&a!==void 0?a:y,H=(o=e.restitution)!==null&&o!==void 0?o:0,P=(_=e.frictionCombine)!==null&&_!==void 0?_:1,b=(u=e.restitutionCombine)!==null&&u!==void 0?u:2,S=[v,y,H,this._materialCombineToNative(P),this._materialCombineToNative(b)];this._hknp.HP_Shape_SetMaterial(t._pluginData,S)}},{key:"getMaterial",value:function(t){var e=this._hknp.HP_Shape_GetMaterial(t._pluginData)[1];return{staticFriction:e[0],friction:e[1],restitution:e[2],frictionCombine:this._nativeToMaterialCombine(e[3]),restitutionCombine:this._nativeToMaterialCombine(e[4])}}},{key:"setDensity",value:function(t,e){this._hknp.HP_Shape_SetDensity(t._pluginData,e)}},{key:"getDensity",value:function(t){return this._hknp.HP_Shape_GetDensity(t._pluginData)[1]}},{key:"_getTransformInfos",value:function(t){if(t.parent)return t.computeWorldMatrix(!0),[this._bVecToV3(t.absolutePosition),this._bQuatToV4(t.absoluteRotationQuaternion)];var e=M.Quaternion[0];if(t.rotationQuaternion)e=t.rotationQuaternion;else{var n=t.rotation;gt.FromEulerAnglesToRef(n.x,n.y,n.z,e)}var a=[this._bVecToV3(t.position),this._bQuatToV4(e)];return a}},{key:"addChild",value:function(t,e,n,a,o){var _=[n?this._bVecToV3(n):[0,0,0],a?this._bQuatToV4(a):[0,0,0,1],o?this._bVecToV3(o):[1,1,1]];this._hknp.HP_Shape_AddChild(t._pluginData,e._pluginData,_)}},{key:"removeChild",value:function(t,e){this._hknp.HP_Shape_RemoveChild(t._pluginData,e)}},{key:"getNumChildren",value:function(t){return this._hknp.HP_Shape_GetNumChildren(t._pluginData)[1]}},{key:"setTrigger",value:function(t,e){this._hknp.HP_Shape_SetTrigger(t._pluginData,e)}},{key:"getBoundingBox",value:function(t){var e=this._hknp.HP_Shape_GetBoundingBox(t._pluginData,[[0,0,0],[0,0,0,1]])[1];M.Vector3[0].set(e[0][0],e[0][1],e[0][2]),M.Vector3[1].set(e[1][0],e[1][1],e[1][2]);var n=new Gt(M.Vector3[0],M.Vector3[1],vt.IdentityReadOnly);return n}},{key:"getBodyBoundingBox",value:function(t){var e=this.getBoundingBox(t.shape),n=new Gt(e.minimum,e.maximum,t.transformNode.getWorldMatrix());return n}},{key:"getBodyGeometry",value:function(t){var e,n=((e=t._pluginDataInstances)===null||e===void 0?void 0:e.length)>0?t._pluginDataInstances[0]:t._pluginData,a=this._hknp.HP_Body_GetShape(n.hpBodyId)[1],o=this._hknp.HP_Shape_CreateDebugDisplayGeometry(a);if(o[0]!=this._hknp.Result.RESULT_OK)return{positions:[],indices:[]};var _=this._hknp.HP_DebugGeometry_GetInfo(o[1])[1],u=new Float32Array(this._hknp.HEAPU8.buffer,_[0],_[1]*3),y=new Uint32Array(this._hknp.HEAPU8.buffer,_[2],_[3]*3),v=u.slice(0),H=y.slice(0);return this._hknp.HP_DebugGeometry_Release(o[1]),{positions:v,indices:H}}},{key:"disposeShape",value:function(t){this._hknp.HP_Shape_Release(t._pluginData),t._pluginData=void 0}},{key:"initConstraint",value:function(t,e,n,a,o){var _,u,y,v=t.type,H=t.options;if(!v||!H){J.Warn("No constraint type or options. Constraint is invalid.");return}if(e._pluginDataInstances.length>0&&a===void 0||n._pluginDataInstances.length>0&&o===void 0){J.Warn("Body is instanced but no instance index was specified. Constraint will not be applied.");return}t._pluginData=(_=t._pluginData)!==null&&_!==void 0?_:[];var P=this._hknp.HP_Constraint_Create()[1];t._pluginData.push(P);var b=this._getPluginReference(e,a).hpBodyId,S=this._getPluginReference(n,o).hpBodyId;this._hknp.HP_Constraint_SetParentBody(P,b),this._hknp.HP_Constraint_SetChildBody(P,S),this._constraintToBodyIdPair.set(P[0],[b[0],S[0]]);var I=H.pivotA?this._bVecToV3(H.pivotA):this._bVecToV3(B.Zero()),x=(u=H.axisA)!==null&&u!==void 0?u:new B(1,0,0),E=this._tmpVec3[0];H.perpAxisA?E.copyFrom(H.perpAxisA):x.getNormalToRef(E),this._hknp.HP_Constraint_SetAnchorInParent(P,I,this._bVecToV3(x),this._bVecToV3(E));var W=H.pivotB?this._bVecToV3(H.pivotB):this._bVecToV3(B.Zero()),F=(y=H.axisB)!==null&&y!==void 0?y:new B(1,0,0),O=this._tmpVec3[0];if(H.perpAxisB?O.copyFrom(H.perpAxisB):F.getNormalToRef(O),this._hknp.HP_Constraint_SetAnchorInChild(P,W,this._bVecToV3(F),this._bVecToV3(O)),t._initOptions||(t._initOptions={axisA:x.clone(),axisB:F.clone(),perpAxisA:E.clone(),perpAxisB:O.clone(),pivotA:new B(I[0],I[1],I[2]),pivotB:new B(W[0],W[1],W[2])}),v==5)this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(v==2){var Y=H.maxDistance||0,Z=this._hknp.ConstraintAxis.LINEAR_DISTANCE;this._hknp.HP_Constraint_SetAxisMode(P,Z,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMinLimit(P,Z,Y),this._hknp.HP_Constraint_SetAxisMaxLimit(P,Z,Y)}else if(v==3)this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(v==6)this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(v==4)this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.ANGULAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(v==1)this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_X,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Y,this._hknp.ConstraintAxisLimitMode.LOCKED),this._hknp.HP_Constraint_SetAxisMode(P,this._hknp.ConstraintAxis.LINEAR_Z,this._hknp.ConstraintAxisLimitMode.LOCKED);else if(v==7){var ht=t,$=N(ht.limits),at;try{for($.s();!(at=$.n()).done;){var j,w,D=at.value,G=this._constraintAxisToNative(D.axis);((j=D.minLimit)!==null&&j!==void 0?j:-1)==0&&((w=D.maxLimit)!==null&&w!==void 0?w:-1)==0?this._hknp.HP_Constraint_SetAxisMode(P,G,this._hknp.ConstraintAxisLimitMode.LOCKED):(D.minLimit!=null&&(this._hknp.HP_Constraint_SetAxisMode(P,G,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMinLimit(P,G,D.minLimit)),D.maxLimit!=null&&(this._hknp.HP_Constraint_SetAxisMode(P,G,this._hknp.ConstraintAxisLimitMode.LIMITED),this._hknp.HP_Constraint_SetAxisMaxLimit(P,G,D.maxLimit))),D.stiffness&&this._hknp.HP_Constraint_SetAxisStiffness(P,G,D.stiffness),D.damping&&this._hknp.HP_Constraint_SetAxisDamping(P,G,D.damping)}}catch(L){$.e(L)}finally{$.f()}}else throw new Error("Unsupported Constraint Type.");var z=!!H.collision;this._hknp.HP_Constraint_SetCollisionsEnabled(P,z),this._hknp.HP_Constraint_SetEnabled(P,!0)}},{key:"getBodiesUsingConstraint",value:function(t){var e=[],n=N(t._pluginData),a;try{for(n.s();!(a=n.n()).done;){var o=a.value,_=this._constraintToBodyIdPair.get(o[0]);if(_){var u=this._bodies.get(_[0]),y=this._bodies.get(_[1]);u&&y&&e.push({parentBody:u.body,parentBodyIndex:u.index,childBody:y.body,childBodyIndex:y.index})}}}catch(v){n.e(v)}finally{n.f()}return e}},{key:"addConstraint",value:function(t,e,n,a,o){this.initConstraint(n,t,e,a,o)}},{key:"setEnabled",value:function(t,e){var n=N(t._pluginData),a;try{for(n.s();!(a=n.n()).done;){var o=a.value;this._hknp.HP_Constraint_SetEnabled(o,e)}}catch(_){n.e(_)}finally{n.f()}}},{key:"getEnabled",value:function(t){var e=t._pluginData&&t._pluginData[0];return e?this._hknp.HP_Constraint_GetEnabled(e)[1]:!1}},{key:"setCollisionsEnabled",value:function(t,e){var n=N(t._pluginData),a;try{for(n.s();!(a=n.n()).done;){var o=a.value;this._hknp.HP_Constraint_SetCollisionsEnabled(o,e)}}catch(_){n.e(_)}finally{n.f()}}},{key:"getCollisionsEnabled",value:function(t){var e=t._pluginData&&t._pluginData[0];return e?this._hknp.HP_Constraint_GetCollisionsEnabled(e)[1]:!1}},{key:"setAxisFriction",value:function(t,e,n){var a=N(t._pluginData),o;try{for(a.s();!(o=a.n()).done;){var _=o.value;this._hknp.HP_Constraint_SetAxisFriction(_,this._constraintAxisToNative(e),n)}}catch(u){a.e(u)}finally{a.f()}}},{key:"getAxisFriction",value:function(t,e){var n=t._pluginData&&t._pluginData[0];return n?this._hknp.HP_Constraint_GetAxisFriction(n,this._constraintAxisToNative(e))[1]:null}},{key:"setAxisMode",value:function(t,e,n){var a=N(t._pluginData),o;try{for(a.s();!(o=a.n()).done;){var _=o.value;this._hknp.HP_Constraint_SetAxisMode(_,this._constraintAxisToNative(e),this._limitModeToNative(n))}}catch(u){a.e(u)}finally{a.f()}}},{key:"getAxisMode",value:function(t,e){var n=t._pluginData&&t._pluginData[0];if(n){var a=this._hknp.HP_Constraint_GetAxisMode(n,this._constraintAxisToNative(e))[1];return this._nativeToLimitMode(a)}return null}},{key:"setAxisMinLimit",value:function(t,e,n){var a=N(t._pluginData),o;try{for(a.s();!(o=a.n()).done;){var _=o.value;this._hknp.HP_Constraint_SetAxisMinLimit(_,this._constraintAxisToNative(e),n)}}catch(u){a.e(u)}finally{a.f()}}},{key:"getAxisMinLimit",value:function(t,e){var n=t._pluginData&&t._pluginData[0];return n?this._hknp.HP_Constraint_GetAxisMinLimit(n,this._constraintAxisToNative(e))[1]:null}},{key:"setAxisMaxLimit",value:function(t,e,n){var a=N(t._pluginData),o;try{for(a.s();!(o=a.n()).done;){var _=o.value;this._hknp.HP_Constraint_SetAxisMaxLimit(_,this._constraintAxisToNative(e),n)}}catch(u){a.e(u)}finally{a.f()}}},{key:"getAxisMaxLimit",value:function(t,e){var n=t._pluginData&&t._pluginData[0];return n?this._hknp.HP_Constraint_GetAxisMaxLimit(n,this._constraintAxisToNative(e))[1]:null}},{key:"setAxisMotorType",value:function(t,e,n){var a=N(t._pluginData),o;try{for(a.s();!(o=a.n()).done;){var _=o.value;this._hknp.HP_Constraint_SetAxisMotorType(_,this._constraintAxisToNative(e),this._constraintMotorTypeToNative(n))}}catch(u){a.e(u)}finally{a.f()}}},{key:"getAxisMotorType",value:function(t,e){var n=t._pluginData&&t._pluginData[0];return n?this._nativeToMotorType(this._hknp.HP_Constraint_GetAxisMotorType(n,this._constraintAxisToNative(e))[1]):null}},{key:"setAxisMotorTarget",value:function(t,e,n){var a=N(t._pluginData),o;try{for(a.s();!(o=a.n()).done;){var _=o.value;this._hknp.HP_Constraint_SetAxisMotorTarget(_,this._constraintAxisToNative(e),n)}}catch(u){a.e(u)}finally{a.f()}}},{key:"getAxisMotorTarget",value:function(t,e){var n=t._pluginData&&t._pluginData[0];return n?this._hknp.HP_Constraint_GetAxisMotorTarget(t._pluginData,this._constraintAxisToNative(e))[1]:null}},{key:"setAxisMotorMaxForce",value:function(t,e,n){var a=N(t._pluginData),o;try{for(a.s();!(o=a.n()).done;){var _=o.value;this._hknp.HP_Constraint_SetAxisMotorMaxForce(_,this._constraintAxisToNative(e),n)}}catch(u){a.e(u)}finally{a.f()}}},{key:"getAxisMotorMaxForce",value:function(t,e){var n=t._pluginData&&t._pluginData[0];return n?this._hknp.HP_Constraint_GetAxisMotorMaxForce(n,this._constraintAxisToNative(e))[1]:null}},{key:"disposeConstraint",value:function(t){var e=N(t._pluginData),n;try{for(e.s();!(n=e.n()).done;){var a=n.value;this._hknp.HP_Constraint_SetEnabled(a,!1),this._hknp.HP_Constraint_Release(a)}}catch(o){e.e(o)}finally{e.f()}t._pluginData.length=0}},{key:"_populateHitData",value:function(t,e){var n=this._bodies.get(t[0][0]);e.body=n==null?void 0:n.body,e.bodyIndex=n==null?void 0:n.index;var a=this._shapes.get(t[1][0]);e.shape=a;var o=t[3],_=t[4],u=t[5];e.setHitData({x:_[0],y:_[1],z:_[2]},{x:o[0],y:o[1],z:o[2]},u)}},{key:"raycast",value:function(t,e,n,a){var o,_,u=(o=a==null?void 0:a.membership)!==null&&o!==void 0?o:-1,y=(_=a==null?void 0:a.collideWith)!==null&&_!==void 0?_:-1;n.reset(t,e);var v=!1,H=[BigInt(0)],P=[this._bVecToV3(t),this._bVecToV3(e),[u,y],v,H];if(this._hknp.HP_World_CastRayWithCollector(this.world,this._queryCollector,P),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){var b=Mt(this._hknp.HP_QueryCollector_GetCastRayResult(this._queryCollector,0)[1],2),S=b[1];this._populateHitData(S,n),n.calculateHitDistance()}}},{key:"pointProximity",value:function(t,e){var n,a,o,_,u=(n=t==null||(a=t.collisionFilter)===null||a===void 0?void 0:a.membership)!==null&&n!==void 0?n:-1,y=(o=t==null||(_=t.collisionFilter)===null||_===void 0?void 0:_.collideWith)!==null&&o!==void 0?o:-1;e.reset();var v=t.ignoreBody?[BigInt(t.ignoreBody._pluginData.hpBodyId[0])]:[BigInt(0)],H=[this._bVecToV3(t.position),t.maxDistance,[u,y],t.shouldHitTriggers,v];if(this._hknp.HP_World_PointProximityWithCollector(this.world,this._queryCollector,H),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){var P=Mt(this._hknp.HP_QueryCollector_GetPointProximityResult(this._queryCollector,0)[1],2),b=P[0],S=P[1];this._populateHitData(S,e),e.setHitDistance(b)}}},{key:"shapeProximity",value:function(t,e,n){e.reset(),n.reset();var a=t.shape._pluginData,o=t.ignoreBody?[BigInt(t.ignoreBody._pluginData.hpBodyId[0])]:[BigInt(0)],_=[a,this._bVecToV3(t.position),this._bQuatToV4(t.rotation),t.maxDistance,t.shouldHitTriggers,o];if(this._hknp.HP_World_ShapeProximityWithCollector(this.world,this._queryCollector,_),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){var u=Mt(this._hknp.HP_QueryCollector_GetShapeProximityResult(this._queryCollector,0)[1],3),y=u[0],v=u[1],H=u[2];this._populateHitData(v,e),this._populateHitData(H,n),e.setHitDistance(y),n.setHitDistance(y)}}},{key:"shapeCast",value:function(t,e,n){e.reset(),n.reset();var a=t.shape._pluginData,o=t.ignoreBody?[BigInt(t.ignoreBody._pluginData.hpBodyId[0])]:[BigInt(0)],_=[a,this._bQuatToV4(t.rotation),this._bVecToV3(t.startPosition),this._bVecToV3(t.endPosition),t.shouldHitTriggers,o];if(this._hknp.HP_World_ShapeCastWithCollector(this.world,this._queryCollector,_),this._hknp.HP_QueryCollector_GetNumHits(this._queryCollector)[1]>0){var u=Mt(this._hknp.HP_QueryCollector_GetShapeCastResult(this._queryCollector,0)[1],3),y=u[0],v=u[1],H=u[2];this._populateHitData(v,e),this._populateHitData(H,n),e.setHitFraction(y),n.setHitFraction(y)}}},{key:"getCollisionObservable",value:function(t){var e=t._pluginData.hpBodyId[0],n=this._bodyCollisionObservable.get(e);return n||(n=new yt,this._bodyCollisionObservable.set(e,n)),n}},{key:"getCollisionEndedObservable",value:function(t){var e=t._pluginData.hpBodyId[0],n=this._bodyCollisionEndedObservable.get(e);return n||(n=new yt,this._bodyCollisionEndedObservable.set(e,n)),n}},{key:"setCollisionCallbackEnabled",value:function(t,e){var n=this,a=this._hknp.EventType.COLLISION_STARTED.value|this._hknp.EventType.COLLISION_CONTINUED.value|this._hknp.EventType.COLLISION_FINISHED.value;t._pluginDataInstances&&t._pluginDataInstances.length?t._pluginDataInstances.forEach(function(o){n._hknp.HP_Body_SetEventMask(o.hpBodyId,e?a:0)}):t._pluginData&&this._hknp.HP_Body_SetEventMask(t._pluginData.hpBodyId,e?a:0)}},{key:"setCollisionEndedCallbackEnabled",value:function(t,e){var n=this,a=this._getPluginReference(t),o=this._hknp.HP_Body_GetEventMask(a.hpBodyId)[1];o=e?o|this._hknp.EventType.COLLISION_FINISHED.value:o&~this._hknp.EventType.COLLISION_FINISHED.value,t._pluginDataInstances&&t._pluginDataInstances.length?t._pluginDataInstances.forEach(function(_){n._hknp.HP_Body_SetEventMask(_.hpBodyId,o)}):t._pluginData&&this._hknp.HP_Body_SetEventMask(t._pluginData.hpBodyId,o)}},{key:"_notifyTriggers",value:function(){for(var t=this._hknp.HP_World_GetTriggerEvents(this.world)[1],e=new Ae;t;){Ae.readToRef(this._hknp.HEAPU8.buffer,t,e);var n=this._bodies.get(e.bodyIdA),a=this._bodies.get(e.bodyIdB);if(n&&a){var o={collider:n.body,colliderIndex:n.index,collidedAgainst:a.body,collidedAgainstIndex:a.index,type:this._nativeTriggerCollisionValueToCollisionType(e.type)};this.onTriggerCollisionObservable.notifyObservers(o)}t=this._hknp.HP_World_GetNextTriggerEvent(this.world,t)}}},{key:"_notifyCollisions",value:function(){for(var t=this._hknp.HP_World_GetCollisionEvents(this.world)[1],e=new Se,n=Number(this.world);t;){Se.readToRef(this._hknp.HEAPU8.buffer,t,e);var a=this._bodies.get(e.contactOnA.bodyId),o=this._bodies.get(e.contactOnB.bodyId);if(a&&o){var _={collider:a.body,colliderIndex:a.index,collidedAgainst:o.body,collidedAgainstIndex:o.index,type:this._nativeCollisionValueToCollisionType(e.type)};if(_.type==="COLLISION_FINISHED")this.onCollisionEndedObservable.notifyObservers(_);else{e.contactOnB.position.subtractToRef(e.contactOnA.position,this._tmpVec3[0]);var u=B.Dot(this._tmpVec3[0],e.contactOnA.normal);_.point=e.contactOnA.position,_.distance=u,_.impulse=e.impulseApplied,_.normal=e.contactOnA.normal,this.onCollisionObservable.notifyObservers(_)}if(this._bodyCollisionObservable.size&&_.type!=="COLLISION_FINISHED"){var y=this._bodyCollisionObservable.get(e.contactOnA.bodyId),v=this._bodyCollisionObservable.get(e.contactOnB.bodyId);e.contactOnA.position.subtractToRef(e.contactOnB.position,this._tmpVec3[0]);var H=B.Dot(this._tmpVec3[0],e.contactOnB.normal);if(y&&y.notifyObservers(_),v){var P={collider:o.body,colliderIndex:o.index,collidedAgainst:a.body,collidedAgainstIndex:a.index,point:e.contactOnB.position,distance:H,impulse:e.impulseApplied,normal:e.contactOnB.normal,type:this._nativeCollisionValueToCollisionType(e.type)};v.notifyObservers(P)}}else if(this._bodyCollisionEndedObservable.size){var b=this._bodyCollisionEndedObservable.get(e.contactOnA.bodyId),S=this._bodyCollisionEndedObservable.get(e.contactOnB.bodyId);e.contactOnA.position.subtractToRef(e.contactOnB.position,this._tmpVec3[0]);var I=B.Dot(this._tmpVec3[0],e.contactOnB.normal);if(b&&b.notifyObservers(_),S){var x={collider:o.body,colliderIndex:o.index,collidedAgainst:a.body,collidedAgainstIndex:a.index,point:e.contactOnB.position,distance:I,impulse:e.impulseApplied,normal:e.contactOnB.normal,type:this._nativeCollisionValueToCollisionType(e.type)};S.notifyObservers(x)}}}t=this._hknp.HP_World_GetNextCollisionEvent(n,t)}}},{key:"numBodies",get:function(){return this._hknp.HP_World_GetNumBodies(this.world)[1]}},{key:"dispose",value:function(){this._queryCollector&&(this._hknp.HP_QueryCollector_Release(this._queryCollector),this._queryCollector=void 0),this.world&&(this._hknp.HP_World_Release(this.world),this.world=void 0)}},{key:"_v3ToBvecRef",value:function(t,e){e.set(t[0],t[1],t[2])}},{key:"_bVecToV3",value:function(t){return[t._x,t._y,t._z]}},{key:"_bQuatToV4",value:function(t){return[t._x,t._y,t._z,t._w]}},{key:"_constraintMotorTypeToNative",value:function(t){switch(t){case 2:return this._hknp.ConstraintMotorType.POSITION;case 1:return this._hknp.ConstraintMotorType.VELOCITY}return this._hknp.ConstraintMotorType.NONE}},{key:"_nativeToMotorType",value:function(t){switch(t){case this._hknp.ConstraintMotorType.POSITION:return 2;case this._hknp.ConstraintMotorType.VELOCITY:return 1}return 0}},{key:"_materialCombineToNative",value:function(t){switch(t){case 0:return this._hknp.MaterialCombine.GEOMETRIC_MEAN;case 1:return this._hknp.MaterialCombine.MINIMUM;case 2:return this._hknp.MaterialCombine.MAXIMUM;case 3:return this._hknp.MaterialCombine.ARITHMETIC_MEAN;case 4:return this._hknp.MaterialCombine.MULTIPLY}}},{key:"_nativeToMaterialCombine",value:function(t){switch(t){case this._hknp.MaterialCombine.GEOMETRIC_MEAN:return 0;case this._hknp.MaterialCombine.MINIMUM:return 1;case this._hknp.MaterialCombine.MAXIMUM:return 2;case this._hknp.MaterialCombine.ARITHMETIC_MEAN:return 3;case this._hknp.MaterialCombine.MULTIPLY:return 4;default:return}}},{key:"_constraintAxisToNative",value:function(t){switch(t){case 0:return this._hknp.ConstraintAxis.LINEAR_X;case 1:return this._hknp.ConstraintAxis.LINEAR_Y;case 2:return this._hknp.ConstraintAxis.LINEAR_Z;case 3:return this._hknp.ConstraintAxis.ANGULAR_X;case 4:return this._hknp.ConstraintAxis.ANGULAR_Y;case 5:return this._hknp.ConstraintAxis.ANGULAR_Z;case 6:return this._hknp.ConstraintAxis.LINEAR_DISTANCE}}},{key:"_nativeToLimitMode",value:function(t){switch(t){case this._hknp.ConstraintAxisLimitMode.FREE:return 0;case this._hknp.ConstraintAxisLimitMode.LIMITED:return 1;case this._hknp.ConstraintAxisLimitMode.LOCKED:return 2}return 0}},{key:"_limitModeToNative",value:function(t){switch(t){case 0:return this._hknp.ConstraintAxisLimitMode.FREE;case 1:return this._hknp.ConstraintAxisLimitMode.LIMITED;case 2:return this._hknp.ConstraintAxisLimitMode.LOCKED}}},{key:"_nativeCollisionValueToCollisionType",value:function(t){switch(t){case this._hknp.EventType.COLLISION_STARTED.value:return"COLLISION_STARTED";case this._hknp.EventType.COLLISION_FINISHED.value:return"COLLISION_FINISHED";case this._hknp.EventType.COLLISION_CONTINUED.value:return"COLLISION_CONTINUED"}return"COLLISION_STARTED"}},{key:"_nativeTriggerCollisionValueToCollisionType",value:function(t){switch(t){case 8:return"TRIGGER_ENTERED";case 16:return"TRIGGER_EXITED"}return"TRIGGER_ENTERED"}}])}(),$n=function(){var m=import.meta.url;return function(r){r=r||{};var t=typeof r<"u"?r:{},e,n;t.ready=new Promise(function(i,s){e=i,n=s});var a=Object.assign({},t),o=function(s,l){throw l},_=!0,u="";function y(i){return t.locateFile?t.locateFile(i,u):u+i}var v;typeof document<"u"&&document.currentScript&&(u=document.currentScript.src),m&&(u=m),u.indexOf("blob:")!==0?u=u.substr(0,u.replace(/[?#].*/,"").lastIndexOf("/")+1):u="";var H=t.print||console.log.bind(console),P=t.printErr||console.warn.bind(console);Object.assign(t,a),a=null,t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.quit&&(o=t.quit);var b=4,S;t.wasmBinary&&(S=t.wasmBinary);var I=t.noExitRuntime||!0;(typeof WebAssembly>"u"?"undefined":st(WebAssembly))!="object"&&Ct("no native wasm support detected");var x,E=!1,W,F=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function O(i,s,l){for(var p=s+l,h=s;i[h]&&!(h>=p);)++h;if(h-s>16&&i.buffer&&F)return F.decode(i.subarray(s,h));for(var c="";s<h;){var f=i[s++];if(!(f&128)){c+=String.fromCharCode(f);continue}var d=i[s++]&63;if((f&224)==192){c+=String.fromCharCode((f&31)<<6|d);continue}var g=i[s++]&63;if((f&240)==224?f=(f&15)<<12|d<<6|g:f=(f&7)<<18|d<<12|g<<6|i[s++]&63,f<65536)c+=String.fromCharCode(f);else{var C=f-65536;c+=String.fromCharCode(55296|C>>10,56320|C&1023)}}return c}function Y(i,s){return i?O(w,i,s):""}function Z(i,s,l,p){if(!(p>0))return 0;for(var h=l,c=l+p-1,f=0;f<i.length;++f){var d=i.charCodeAt(f);if(d>=55296&&d<=57343){var g=i.charCodeAt(++f);d=65536+((d&1023)<<10)|g&1023}if(d<=127){if(l>=c)break;s[l++]=d}else if(d<=2047){if(l+1>=c)break;s[l++]=192|d>>6,s[l++]=128|d&63}else if(d<=65535){if(l+2>=c)break;s[l++]=224|d>>12,s[l++]=128|d>>6&63,s[l++]=128|d&63}else{if(l+3>=c)break;s[l++]=240|d>>18,s[l++]=128|d>>12&63,s[l++]=128|d>>6&63,s[l++]=128|d&63}}return s[l]=0,l-h}function ht(i,s,l){return Z(i,w,s,l)}function $(i){for(var s=0,l=0;l<i.length;++l){var p=i.charCodeAt(l);p<=127?s++:p<=2047?s+=2:p>=55296&&p<=57343?(s+=4,++l):s+=3}return s}var at,j,w,D,G,z,L,mt,Pt,Ft,Ot;function Wt(i){at=i,t.HEAP8=j=new Int8Array(i),t.HEAP16=D=new Int16Array(i),t.HEAP32=z=new Int32Array(i),t.HEAPU8=w=new Uint8Array(i),t.HEAPU16=G=new Uint16Array(i),t.HEAPU32=L=new Uint32Array(i),t.HEAPF32=mt=new Float32Array(i),t.HEAPF64=Ot=new Float64Array(i),t.HEAP64=Pt=new BigInt64Array(i),t.HEAPU64=Ft=new BigUint64Array(i)}t.INITIAL_MEMORY;var Vt,Nt=[],Ut=[],Me=[],Qt=[];function Be(){return I}function xe(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)we(t.preRun.shift());Ht(Nt)}function Ie(){Ht(Ut)}function De(){Ht(Me)}function Ee(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Ge(t.postRun.shift());Ht(Qt)}function we(i){Nt.unshift(i)}function Re(i){Ut.unshift(i)}function Ge(i){Qt.unshift(i)}var ot=0,ct=null;function Le(i){ot++,t.monitorRunDependencies&&t.monitorRunDependencies(ot)}function Fe(i){if(ot--,t.monitorRunDependencies&&t.monitorRunDependencies(ot),ot==0&&ct){var s=ct;ct=null,s()}}function Ct(i){t.onAbort&&t.onAbort(i),i="Aborted("+i+")",P(i),E=!0,W=1,i+=". Build with -sASSERTIONS for more info.";var s=new WebAssembly.RuntimeError(i);throw n(s),s}var Oe="data:application/octet-stream;base64,";function jt(i){return i.startsWith(Oe)}var K;t.locateFile?(K="HavokPhysics.wasm",jt(K)||(K=y(K))):K=new URL(""+new URL("HavokPhysics.HiRi8YME.wasm",import.meta.url).href,import.meta.url).toString();function zt(i){try{if(i==K&&S)return new Uint8Array(S);throw"both async and sync fetching of the wasm failed"}catch(s){Ct(s)}}function We(){return!S&&_&&typeof fetch=="function"?fetch(K,{credentials:"same-origin"}).then(function(i){if(!i.ok)throw"failed to load wasm binary file at '"+K+"'";return i.arrayBuffer()}).catch(function(){return zt(K)}):Promise.resolve().then(function(){return zt(K)})}function Ve(){var i={env:he,wasi_snapshot_preview1:he};function s(f,d){var g=f.exports;t.asm=g,x=t.asm.memory,Wt(x.buffer),Vt=t.asm.__indirect_function_table,Re(t.asm.__wasm_call_ctors),Fe()}Le();function l(f){s(f.instance)}function p(f){return We().then(function(d){return WebAssembly.instantiate(d,i)}).then(function(d){return d}).then(f,function(d){P("failed to asynchronously prepare wasm: "+d),Ct(d)})}function h(){return!S&&typeof WebAssembly.instantiateStreaming=="function"&&!jt(K)&&typeof fetch=="function"?fetch(K,{credentials:"same-origin"}).then(function(f){var d=WebAssembly.instantiateStreaming(f,i);return d.then(l,function(g){return P("wasm streaming compile failed: "+g),P("falling back to ArrayBuffer instantiation"),p(l)})}):p(l)}if(t.instantiateWasm)try{var c=t.instantiateWasm(i,s);return c}catch(f){P("Module.instantiateWasm callback failed with error: "+f),n(f)}return h().catch(n),{}}function Kt(i){this.name="ExitStatus",this.message="Program terminated with exit("+i+")",this.status=i}function Ht(i){for(;i.length>0;)i.shift()(t)}function Ne(i){if(i instanceof Kt||i=="unwind")return W;o(1,i)}var St={};function Zt(i){for(;i.length;){var s=i.pop(),l=i.pop();l(s)}}function At(i){return this.fromWireType(z[i>>2])}var ut={},lt={},kt={},Ue=48,Qe=57;function Bt(i){if(i===void 0)return"_unknown";i=i.replace(/[^a-zA-Z0-9_]/g,"$");var s=i.charCodeAt(0);return s>=Ue&&s<=Qe?"_"+i:i}function xt(i,s){return i=Bt(i),new Function("body","return function "+i+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(s)}function It(i,s){var l=xt(s,function(p){this.name=s,this.message=p;var h=new Error(p).stack;h!==void 0&&(this.stack=this.toString()+`
`+h.replace(/^Error(:[^\n]*)?\n/,""))});return l.prototype=Object.create(i.prototype),l.prototype.constructor=l,l.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},l}var Xt=void 0;function Yt(i){throw new Xt(i)}function qt(i,s,l){i.forEach(function(d){kt[d]=s});function p(d){var g=l(d);g.length!==i.length&&Yt("Mismatched type converter count");for(var C=0;C<i.length;++C)X(i[C],g[C])}var h=new Array(s.length),c=[],f=0;s.forEach(function(d,g){lt.hasOwnProperty(d)?h[g]=lt[d]:(c.push(d),ut.hasOwnProperty(d)||(ut[d]=[]),ut[d].push(function(){h[g]=lt[d],++f,f===c.length&&p(h)}))}),c.length===0&&p(h)}function je(i){var s=St[i];delete St[i];var l=s.elements,p=l.length,h=l.map(function(d){return d.getterReturnType}).concat(l.map(function(d){return d.setterArgumentType})),c=s.rawConstructor,f=s.rawDestructor;qt([i],h,function(d){return l.forEach(function(g,C){var A=d[C],T=g.getter,k=g.getterContext,R=d[C+p],Q=g.setter,et=g.setterContext;g.read=function(nt){return A.fromWireType(T(k,nt))},g.write=function(nt,pt){var ye=[];Q(et,nt,R.toWireType(ye,pt)),Zt(ye)}}),[{name:s.name,fromWireType:function(C){for(var A=new Array(p),T=0;T<p;++T)A[T]=l[T].read(C);return f(C),A},toWireType:function(C,A){if(p!==A.length)throw new TypeError("Incorrect number of tuple elements for "+s.name+": expected="+p+", actual="+A.length);for(var T=c(),k=0;k<p;++k)l[k].write(T,A[k]);return C!==null&&C.push(f,T),T},argPackAdvance:8,readValueFromPointer:At,destructorFunction:f}]})}function Jt(i){if(i===null)return"null";var s=st(i);return s==="object"||s==="array"||s==="function"?i.toString():""+i}function ze(){for(var i=new Array(256),s=0;s<256;++s)i[s]=String.fromCharCode(s);$t=i}var $t=void 0;function V(i){for(var s="",l=i;w[l];)s+=$t[w[l++]];return s}var te=void 0;function U(i){throw new te(i)}function X(i,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in s))throw new TypeError("registerType registeredInstance requires argPackAdvance");var p=s.name;if(i||U('type "'+p+'" must have a positive integer typeid pointer'),lt.hasOwnProperty(i)){if(l.ignoreDuplicateRegistrations)return;U("Cannot register type '"+p+"' twice")}if(lt[i]=s,delete kt[i],ut.hasOwnProperty(i)){var h=ut[i];delete ut[i],h.forEach(function(c){return c()})}}function ee(i,s,l){switch(s){case 0:return l?function(h){return j[h]}:function(h){return w[h]};case 1:return l?function(h){return D[h>>1]}:function(h){return G[h>>1]};case 2:return l?function(h){return z[h>>2]}:function(h){return L[h>>2]};case 3:return l?function(h){return Pt[h>>3]}:function(h){return Ft[h>>3]};default:throw new TypeError("Unknown integer type: "+i)}}function Ke(i,s,l,p,h){s=V(s);var c=dt(l),f=s.indexOf("u")!=-1;f&&(h=(1n<<64n)-1n),X(i,{name:s,fromWireType:function(g){return g},toWireType:function(g,C){if(typeof C!="bigint"&&typeof C!="number")throw new TypeError('Cannot convert "'+Jt(C)+'" to '+this.name);if(C<p||C>h)throw new TypeError('Passing a number "'+Jt(C)+'" from JS side to C/C++ side to an argument of type "'+s+'", which is outside the valid range ['+p+", "+h+"]!");return C},argPackAdvance:8,readValueFromPointer:ee(s,c,!f),destructorFunction:null})}function dt(i){switch(i){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+i)}}function Ze(i,s,l,p,h){var c=dt(l);s=V(s),X(i,{name:s,fromWireType:function(d){return!!d},toWireType:function(d,g){return g?p:h},argPackAdvance:8,readValueFromPointer:function(d){var g;if(l===1)g=j;else if(l===2)g=D;else if(l===4)g=z;else throw new TypeError("Unknown boolean type size: "+s);return this.fromWireType(g[d>>c])},destructorFunction:null})}var Dt=[],q=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ne(i){i>4&&--q[i].refcount===0&&(q[i]=void 0,Dt.push(i))}function Xe(){for(var i=0,s=5;s<q.length;++s)q[s]!==void 0&&++i;return i}function Ye(){for(var i=5;i<q.length;++i)if(q[i]!==void 0)return q[i];return null}function qe(){t.count_emval_handles=Xe,t.get_first_emval=Ye}var Et={toValue:function(s){return s||U("Cannot use deleted val. handle = "+s),q[s].value},toHandle:function(s){switch(s){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var l=Dt.length?Dt.pop():q.length;return q[l]={refcount:1,value:s},l}}}};function Je(i,s){s=V(s),X(i,{name:s,fromWireType:function(p){var h=Et.toValue(p);return ne(p),h},toWireType:function(p,h){return Et.toHandle(h)},argPackAdvance:8,readValueFromPointer:At,destructorFunction:null})}function $e(i,s,l){if(i[s].overloadTable===void 0){var p=i[s];i[s]=function(){return i[s].overloadTable.hasOwnProperty(arguments.length)||U("Function '"+l+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+i[s].overloadTable+")!"),i[s].overloadTable[arguments.length].apply(this,arguments)},i[s].overloadTable=[],i[s].overloadTable[p.argCount]=p}}function ie(i,s,l){t.hasOwnProperty(i)?((l===void 0||t[i].overloadTable!==void 0&&t[i].overloadTable[l]!==void 0)&&U("Cannot register public name '"+i+"' twice"),$e(t,i,i),t.hasOwnProperty(l)&&U("Cannot register multiple overloads of a function with the same number of arguments ("+l+")!"),t[i].overloadTable[l]=s):(t[i]=s,l!==void 0&&(t[i].numArguments=l))}function tn(i,s,l){switch(s){case 0:return function(p){var h=l?j:w;return this.fromWireType(h[p])};case 1:return function(p){var h=l?D:G;return this.fromWireType(h[p>>1])};case 2:return function(p){var h=l?z:L;return this.fromWireType(h[p>>2])};default:throw new TypeError("Unknown integer type: "+i)}}function en(i,s,l,p){var h=dt(l);s=V(s);function c(){}c.values={},X(i,{name:s,constructor:c,fromWireType:function(d){return this.constructor.values[d]},toWireType:function(d,g){return g.value},argPackAdvance:8,readValueFromPointer:tn(s,h,p),destructorFunction:null}),ie(s,c)}function re(i){var s=ce(i),l=V(s);return tt(s),l}function ae(i,s){var l=lt[i];return l===void 0&&U(s+" has unknown type "+re(i)),l}function nn(i,s,l){var p=ae(i,"enum");s=V(s);var h=p.constructor,c=Object.create(p.constructor.prototype,{value:{value:l},constructor:{value:xt(p.name+"_"+s,function(){})}});h.values[l]=c,h[s]=c}function rn(i,s){switch(s){case 2:return function(l){return this.fromWireType(mt[l>>2])};case 3:return function(l){return this.fromWireType(Ot[l>>3])};default:throw new TypeError("Unknown float type: "+i)}}function an(i,s,l){var p=dt(l);s=V(s),X(i,{name:s,fromWireType:function(c){return c},toWireType:function(c,f){return f},argPackAdvance:8,readValueFromPointer:rn(s,p),destructorFunction:null})}function se(i,s){if(!(i instanceof Function))throw new TypeError("new_ called with constructor type "+st(i)+" which is not a function");var l=xt(i.name||"unknownFunctionName",function(){});l.prototype=i.prototype;var p=new l,h=i.apply(p,s);return h instanceof Object?h:p}function sn(i,s,l,p,h){var c=s.length;c<2&&U("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var f=s[1]!==null&&l!==null,d=!1,g=1;g<s.length;++g)if(s[g]!==null&&s[g].destructorFunction===void 0){d=!0;break}for(var C=s[0].name!=="void",A="",T="",g=0;g<c-2;++g)A+=(g!==0?", ":"")+"arg"+g,T+=(g!==0?", ":"")+"arg"+g+"Wired";var k="return function "+Bt(i)+"("+A+`) {
if (arguments.length !== `+(c-2)+`) {
throwBindingError('function `+i+" called with ' + arguments.length + ' arguments, expected "+(c-2)+` args!');
}
`;d&&(k+=`var destructors = [];
`);var R=d?"destructors":"null",Q=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],et=[U,p,h,Zt,s[0],s[1]];f&&(k+="var thisWired = classParam.toWireType("+R+`, this);
`);for(var g=0;g<c-2;++g)k+="var arg"+g+"Wired = argType"+g+".toWireType("+R+", arg"+g+"); // "+s[g+2].name+`
`,Q.push("argType"+g),et.push(s[g+2]);if(f&&(T="thisWired"+(T.length>0?", ":"")+T),k+=(C?"var rv = ":"")+"invoker(fn"+(T.length>0?", ":"")+T+`);
`,d)k+=`runDestructors(destructors);
`;else for(var g=f?1:2;g<s.length;++g){var nt=g===1?"thisWired":"arg"+(g-2)+"Wired";s[g].destructorFunction!==null&&(k+=nt+"_dtor("+nt+"); // "+s[g].name+`
`,Q.push(nt+"_dtor"),et.push(s[g].destructorFunction))}C&&(k+=`var ret = retType.fromWireType(rv);
return ret;
`),k+=`}
`,Q.push(k);var pt=se(Function,Q).apply(null,et);return pt}function on(i,s){for(var l=[],p=0;p<i;p++)l.push(L[s+p*4>>2]);return l}function ln(i,s,l){t.hasOwnProperty(i)||Yt("Replacing nonexistant public symbol"),t[i].overloadTable!==void 0&&l!==void 0?t[i].overloadTable[l]=s:(t[i]=s,t[i].argCount=l)}var Tt=[];function _n(i){var s=Tt[i];return s||(i>=Tt.length&&(Tt.length=i+1),Tt[i]=s=Vt.get(i)),s}function ft(i,s){i=V(i);function l(){return _n(s)}var p=l();return typeof p!="function"&&U("unknown function pointer with signature "+i+": "+s),p}var oe=void 0;function un(i,s){var l=[],p={};function h(c){if(!p[c]&&!lt[c]){if(kt[c]){kt[c].forEach(h);return}l.push(c),p[c]=!0}}throw s.forEach(h),new oe(i+": "+l.map(re).join([", "]))}function pn(i,s,l,p,h,c){var f=on(s,l);i=V(i),h=ft(p,h),ie(i,function(){un("Cannot call "+i+" due to unbound types",f)},s-1),qt([],f,function(d){var g=[d[0],null].concat(d.slice(1));return ln(i,sn(i,g,null,h,c),s-1),[]})}function hn(i,s,l,p,h){s=V(s);var c=dt(l),f=function(k){return k};if(p===0){var d=32-8*l;f=function(k){return k<<d>>>d}}var g=s.includes("unsigned"),C=function(k,R){},A;g?A=function(k,R){return C(R,this.name),R>>>0}:A=function(k,R){return C(R,this.name),R},X(i,{name:s,fromWireType:f,toWireType:A,argPackAdvance:8,readValueFromPointer:ee(s,c,p!==0),destructorFunction:null})}function cn(i,s,l){var p=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array],h=p[s];function c(f){f=f>>2;var d=L,g=d[f],C=d[f+1];return new h(at,C,g)}l=V(l),X(i,{name:l,fromWireType:c,argPackAdvance:8,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})}function dn(i,s){s=V(s);var l=s==="std::string";X(i,{name:s,fromWireType:function(h){var c=L[h>>2],f=h+4,d;if(l)for(var g=f,C=0;C<=c;++C){var A=f+C;if(C==c||w[A]==0){var T=A-g,k=Y(g,T);d===void 0?d=k:(d+="\0",d+=k),g=A+1}}else{for(var R=new Array(c),C=0;C<c;++C)R[C]=String.fromCharCode(w[f+C]);d=R.join("")}return tt(h),d},toWireType:function(h,c){c instanceof ArrayBuffer&&(c=new Uint8Array(c));var f,d=typeof c=="string";d||c instanceof Uint8Array||c instanceof Uint8ClampedArray||c instanceof Int8Array||U("Cannot pass non-string to std::string"),l&&d?f=$(c):f=c.length;var g=Rt(4+f+1),C=g+4;if(L[g>>2]=f,l&&d)ht(c,C,f+1);else if(d)for(var A=0;A<f;++A){var T=c.charCodeAt(A);T>255&&(tt(C),U("String has UTF-16 code units that do not fit in 8 bits")),w[C+A]=T}else for(var A=0;A<f;++A)w[C+A]=c[A];return h!==null&&h.push(tt,g),g},argPackAdvance:8,readValueFromPointer:At,destructorFunction:function(h){tt(h)}})}var le=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function fn(i,s){for(var l=i,p=l>>1,h=p+s/2;!(p>=h)&&G[p];)++p;if(l=p<<1,l-i>32&&le)return le.decode(w.subarray(i,l));for(var c="",f=0;!(f>=s/2);++f){var d=D[i+f*2>>1];if(d==0)break;c+=String.fromCharCode(d)}return c}function yn(i,s,l){if(l===void 0&&(l=2147483647),l<2)return 0;l-=2;for(var p=s,h=l<i.length*2?l/2:i.length,c=0;c<h;++c){var f=i.charCodeAt(c);D[s>>1]=f,s+=2}return D[s>>1]=0,s-p}function gn(i){return i.length*2}function vn(i,s){for(var l=0,p="";!(l>=s/4);){var h=z[i+l*4>>2];if(h==0)break;if(++l,h>=65536){var c=h-65536;p+=String.fromCharCode(55296|c>>10,56320|c&1023)}else p+=String.fromCharCode(h)}return p}function mn(i,s,l){if(l===void 0&&(l=2147483647),l<4)return 0;for(var p=s,h=p+l-4,c=0;c<i.length;++c){var f=i.charCodeAt(c);if(f>=55296&&f<=57343){var d=i.charCodeAt(++c);f=65536+((f&1023)<<10)|d&1023}if(z[s>>2]=f,s+=4,s+4>h)break}return z[s>>2]=0,s-p}function Pn(i){for(var s=0,l=0;l<i.length;++l){var p=i.charCodeAt(l);p>=55296&&p<=57343&&++l,s+=4}return s}function Cn(i,s,l){l=V(l);var p,h,c,f,d;s===2?(p=fn,h=yn,f=gn,c=function(){return G},d=1):s===4&&(p=vn,h=mn,f=Pn,c=function(){return L},d=2),X(i,{name:l,fromWireType:function(C){for(var A=L[C>>2],T=c(),k,R=C+4,Q=0;Q<=A;++Q){var et=C+4+Q*s;if(Q==A||T[et>>d]==0){var nt=et-R,pt=p(R,nt);k===void 0?k=pt:(k+="\0",k+=pt),R=et+s}}return tt(C),k},toWireType:function(C,A){typeof A!="string"&&U("Cannot pass non-string to C++ string type "+l);var T=f(A),k=Rt(4+T+s);return L[k>>2]=T>>d,h(A,k+4,T+s),C!==null&&C.push(tt,k),k},argPackAdvance:8,readValueFromPointer:At,destructorFunction:function(C){tt(C)}})}function Hn(i,s,l,p,h,c){St[i]={name:V(s),rawConstructor:ft(l,p),rawDestructor:ft(h,c),elements:[]}}function Sn(i,s,l,p,h,c,f,d,g){St[i].elements.push({getterReturnType:s,getter:ft(l,p),getterContext:h,setterArgumentType:c,setter:ft(f,d),setterContext:g})}function An(i,s){s=V(s),X(i,{isVoid:!0,name:s,argPackAdvance:0,fromWireType:function(){},toWireType:function(p,h){}})}var kn=!0;function Tn(){return kn}var bn={};function Mn(i){var s=bn[i];return s===void 0?V(i):s}var wt=[];function Bn(i,s,l,p){i=wt[i],s=Et.toValue(s),l=Mn(l),i(s,l,null,p)}function xn(i){var s=wt.length;return wt.push(i),s}function In(i,s){for(var l=new Array(i),p=0;p<i;++p)l[p]=ae(L[s+p*b>>2],"parameter "+p);return l}var _e=[];function Dn(i,s){var l=In(i,s),p=l[0],h=p.name+"_$"+l.slice(1).map(function(Q){return Q.name}).join("_")+"$",c=_e[h];if(c!==void 0)return c;for(var f=["retType"],d=[p],g="",C=0;C<i-1;++C)g+=(C!==0?", ":"")+"arg"+C,f.push("argType"+C),d.push(l[1+C]);for(var A=Bt("methodCaller_"+h),T="return function "+A+`(handle, name, destructors, args) {
`,k=0,C=0;C<i-1;++C)T+="    var arg"+C+" = argType"+C+".readValueFromPointer(args"+(k?"+"+k:"")+`);
`,k+=l[C+1].argPackAdvance;T+="    var rv = handle[name]("+g+`);
`;for(var C=0;C<i-1;++C)l[C+1].deleteObject&&(T+="    argType"+C+".deleteObject(arg"+C+`);
`);p.isVoid||(T+=`    return retType.toWireType(destructors, rv);
`),T+=`};
`,f.push(T);var R=se(Function,f).apply(null,d);return c=xn(R),_e[h]=c,c}function En(){Ct("")}function wn(){return Date.now()}function ue(){return 2147483648}function Rn(){return ue()}var pe;pe=function(){return performance.now()};function Gn(i,s,l){w.copyWithin(i,s,s+l)}function Ln(i){try{return x.grow(i-at.byteLength+65535>>>16),Wt(x.buffer),1}catch{}}function Fn(i){var s=w.length;i=i>>>0;var l=ue();if(i>l)return!1;for(var p=function(C,A){return C+(A-C%A)%A},h=1;h<=4;h*=2){var c=s*(1+.2/h);c=Math.min(c,i+100663296);var f=Math.min(l,p(Math.max(i,c),65536)),d=Ln(f);if(d)return!0}return!1}var On=[null,[],[]];function Wn(i,s){var l=On[i];s===0||s===10?((i===1?H:P)(O(l,0)),l.length=0):l.push(s)}function Vn(i,s,l,p){for(var h=0,c=0;c<l;c++){var f=L[s>>2],d=L[s+4>>2];s+=8;for(var g=0;g<d;g++)Wn(i,w[f+g]);h+=d}return L[p>>2]=h,0}function Nn(i){W=i,Be()||(t.onExit&&t.onExit(i),E=!0),o(i,new Kt(i))}function Un(i,s){W=i,Nn(i)}Xt=t.InternalError=It(Error,"InternalError"),ze(),te=t.BindingError=It(Error,"BindingError"),qe(),oe=t.UnboundTypeError=It(Error,"UnboundTypeError");var he={_embind_finalize_value_array:je,_embind_register_bigint:Ke,_embind_register_bool:Ze,_embind_register_emval:Je,_embind_register_enum:en,_embind_register_enum_value:nn,_embind_register_float:an,_embind_register_function:pn,_embind_register_integer:hn,_embind_register_memory_view:cn,_embind_register_std_string:dn,_embind_register_std_wstring:Cn,_embind_register_value_array:Hn,_embind_register_value_array_element:Sn,_embind_register_void:An,_emscripten_get_now_is_monotonic:Tn,_emval_call_void_method:Bn,_emval_decref:ne,_emval_get_method_caller:Dn,abort:En,emscripten_date_now:wn,emscripten_get_heap_max:Rn,emscripten_get_now:pe,emscripten_memcpy_big:Gn,emscripten_resize_heap:Fn,fd_write:Vn};Ve(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},t._HP_GetStatistics=function(){return(t._HP_GetStatistics=t.asm.HP_GetStatistics).apply(null,arguments)},t._HP_Shape_CreateSphere=function(){return(t._HP_Shape_CreateSphere=t.asm.HP_Shape_CreateSphere).apply(null,arguments)},t._HP_Shape_CreateCapsule=function(){return(t._HP_Shape_CreateCapsule=t.asm.HP_Shape_CreateCapsule).apply(null,arguments)},t._HP_Shape_CreateCylinder=function(){return(t._HP_Shape_CreateCylinder=t.asm.HP_Shape_CreateCylinder).apply(null,arguments)},t._HP_Shape_CreateBox=function(){return(t._HP_Shape_CreateBox=t.asm.HP_Shape_CreateBox).apply(null,arguments)},t._HP_Shape_CreateConvexHull=function(){return(t._HP_Shape_CreateConvexHull=t.asm.HP_Shape_CreateConvexHull).apply(null,arguments)},t._HP_Shape_CreateMesh=function(){return(t._HP_Shape_CreateMesh=t.asm.HP_Shape_CreateMesh).apply(null,arguments)},t._HP_Shape_CreateHeightField=function(){return(t._HP_Shape_CreateHeightField=t.asm.HP_Shape_CreateHeightField).apply(null,arguments)},t._HP_Shape_CreateContainer=function(){return(t._HP_Shape_CreateContainer=t.asm.HP_Shape_CreateContainer).apply(null,arguments)},t._HP_Shape_Release=function(){return(t._HP_Shape_Release=t.asm.HP_Shape_Release).apply(null,arguments)},t._HP_Shape_GetType=function(){return(t._HP_Shape_GetType=t.asm.HP_Shape_GetType).apply(null,arguments)},t._HP_Shape_AddChild=function(){return(t._HP_Shape_AddChild=t.asm.HP_Shape_AddChild).apply(null,arguments)},t._HP_Shape_RemoveChild=function(){return(t._HP_Shape_RemoveChild=t.asm.HP_Shape_RemoveChild).apply(null,arguments)},t._HP_Shape_GetNumChildren=function(){return(t._HP_Shape_GetNumChildren=t.asm.HP_Shape_GetNumChildren).apply(null,arguments)},t._HP_Shape_GetChildShape=function(){return(t._HP_Shape_GetChildShape=t.asm.HP_Shape_GetChildShape).apply(null,arguments)},t._HP_Shape_SetChildQSTransform=function(){return(t._HP_Shape_SetChildQSTransform=t.asm.HP_Shape_SetChildQSTransform).apply(null,arguments)},t._HP_Shape_GetChildQSTransform=function(){return(t._HP_Shape_GetChildQSTransform=t.asm.HP_Shape_GetChildQSTransform).apply(null,arguments)},t._HP_Shape_SetFilterInfo=function(){return(t._HP_Shape_SetFilterInfo=t.asm.HP_Shape_SetFilterInfo).apply(null,arguments)},t._HP_Shape_GetFilterInfo=function(){return(t._HP_Shape_GetFilterInfo=t.asm.HP_Shape_GetFilterInfo).apply(null,arguments)},t._HP_Shape_SetMaterial=function(){return(t._HP_Shape_SetMaterial=t.asm.HP_Shape_SetMaterial).apply(null,arguments)},t._HP_Shape_GetMaterial=function(){return(t._HP_Shape_GetMaterial=t.asm.HP_Shape_GetMaterial).apply(null,arguments)},t._HP_Shape_SetDensity=function(){return(t._HP_Shape_SetDensity=t.asm.HP_Shape_SetDensity).apply(null,arguments)},t._HP_Shape_GetDensity=function(){return(t._HP_Shape_GetDensity=t.asm.HP_Shape_GetDensity).apply(null,arguments)},t._HP_Shape_GetBoundingBox=function(){return(t._HP_Shape_GetBoundingBox=t.asm.HP_Shape_GetBoundingBox).apply(null,arguments)},t._HP_Shape_CastRay=function(){return(t._HP_Shape_CastRay=t.asm.HP_Shape_CastRay).apply(null,arguments)},t._HP_Shape_BuildMassProperties=function(){return(t._HP_Shape_BuildMassProperties=t.asm.HP_Shape_BuildMassProperties).apply(null,arguments)},t._HP_ShapePathIterator_GetNext=function(){return(t._HP_ShapePathIterator_GetNext=t.asm.HP_ShapePathIterator_GetNext).apply(null,arguments)},t._HP_Shape_SetTrigger=function(){return(t._HP_Shape_SetTrigger=t.asm.HP_Shape_SetTrigger).apply(null,arguments)},t._HP_Shape_CreateDebugDisplayGeometry=function(){return(t._HP_Shape_CreateDebugDisplayGeometry=t.asm.HP_Shape_CreateDebugDisplayGeometry).apply(null,arguments)},t._HP_DebugGeometry_GetInfo=function(){return(t._HP_DebugGeometry_GetInfo=t.asm.HP_DebugGeometry_GetInfo).apply(null,arguments)},t._HP_DebugGeometry_Release=function(){return(t._HP_DebugGeometry_Release=t.asm.HP_DebugGeometry_Release).apply(null,arguments)},t._HP_Body_Create=function(){return(t._HP_Body_Create=t.asm.HP_Body_Create).apply(null,arguments)},t._HP_Body_Release=function(){return(t._HP_Body_Release=t.asm.HP_Body_Release).apply(null,arguments)},t._HP_Body_SetShape=function(){return(t._HP_Body_SetShape=t.asm.HP_Body_SetShape).apply(null,arguments)},t._HP_Body_GetShape=function(){return(t._HP_Body_GetShape=t.asm.HP_Body_GetShape).apply(null,arguments)},t._HP_Body_SetMotionType=function(){return(t._HP_Body_SetMotionType=t.asm.HP_Body_SetMotionType).apply(null,arguments)},t._HP_Body_GetMotionType=function(){return(t._HP_Body_GetMotionType=t.asm.HP_Body_GetMotionType).apply(null,arguments)},t._HP_Body_SetEventMask=function(){return(t._HP_Body_SetEventMask=t.asm.HP_Body_SetEventMask).apply(null,arguments)},t._HP_Body_GetEventMask=function(){return(t._HP_Body_GetEventMask=t.asm.HP_Body_GetEventMask).apply(null,arguments)},t._HP_Body_SetMassProperties=function(){return(t._HP_Body_SetMassProperties=t.asm.HP_Body_SetMassProperties).apply(null,arguments)},t._HP_Body_GetMassProperties=function(){return(t._HP_Body_GetMassProperties=t.asm.HP_Body_GetMassProperties).apply(null,arguments)},t._HP_Body_SetLinearDamping=function(){return(t._HP_Body_SetLinearDamping=t.asm.HP_Body_SetLinearDamping).apply(null,arguments)},t._HP_Body_GetLinearDamping=function(){return(t._HP_Body_GetLinearDamping=t.asm.HP_Body_GetLinearDamping).apply(null,arguments)},t._HP_Body_SetAngularDamping=function(){return(t._HP_Body_SetAngularDamping=t.asm.HP_Body_SetAngularDamping).apply(null,arguments)},t._HP_Body_GetAngularDamping=function(){return(t._HP_Body_GetAngularDamping=t.asm.HP_Body_GetAngularDamping).apply(null,arguments)},t._HP_Body_SetGravityFactor=function(){return(t._HP_Body_SetGravityFactor=t.asm.HP_Body_SetGravityFactor).apply(null,arguments)},t._HP_Body_GetGravityFactor=function(){return(t._HP_Body_GetGravityFactor=t.asm.HP_Body_GetGravityFactor).apply(null,arguments)},t._HP_Body_GetWorld=function(){return(t._HP_Body_GetWorld=t.asm.HP_Body_GetWorld).apply(null,arguments)},t._HP_Body_SetPosition=function(){return(t._HP_Body_SetPosition=t.asm.HP_Body_SetPosition).apply(null,arguments)},t._HP_Body_GetPosition=function(){return(t._HP_Body_GetPosition=t.asm.HP_Body_GetPosition).apply(null,arguments)},t._HP_Body_SetOrientation=function(){return(t._HP_Body_SetOrientation=t.asm.HP_Body_SetOrientation).apply(null,arguments)},t._HP_Body_GetOrientation=function(){return(t._HP_Body_GetOrientation=t.asm.HP_Body_GetOrientation).apply(null,arguments)},t._HP_Body_SetQTransform=function(){return(t._HP_Body_SetQTransform=t.asm.HP_Body_SetQTransform).apply(null,arguments)},t._HP_Body_GetWorldTransformOffset=function(){return(t._HP_Body_GetWorldTransformOffset=t.asm.HP_Body_GetWorldTransformOffset).apply(null,arguments)},t._HP_Body_GetQTransform=function(){return(t._HP_Body_GetQTransform=t.asm.HP_Body_GetQTransform).apply(null,arguments)},t._HP_Body_SetLinearVelocity=function(){return(t._HP_Body_SetLinearVelocity=t.asm.HP_Body_SetLinearVelocity).apply(null,arguments)},t._HP_Body_GetLinearVelocity=function(){return(t._HP_Body_GetLinearVelocity=t.asm.HP_Body_GetLinearVelocity).apply(null,arguments)},t._HP_Body_SetAngularVelocity=function(){return(t._HP_Body_SetAngularVelocity=t.asm.HP_Body_SetAngularVelocity).apply(null,arguments)},t._HP_Body_GetAngularVelocity=function(){return(t._HP_Body_GetAngularVelocity=t.asm.HP_Body_GetAngularVelocity).apply(null,arguments)},t._HP_Body_ApplyImpulse=function(){return(t._HP_Body_ApplyImpulse=t.asm.HP_Body_ApplyImpulse).apply(null,arguments)},t._HP_Body_ApplyAngularImpulse=function(){return(t._HP_Body_ApplyAngularImpulse=t.asm.HP_Body_ApplyAngularImpulse).apply(null,arguments)},t._HP_Body_SetTargetQTransform=function(){return(t._HP_Body_SetTargetQTransform=t.asm.HP_Body_SetTargetQTransform).apply(null,arguments)},t._HP_Body_SetActivationState=function(){return(t._HP_Body_SetActivationState=t.asm.HP_Body_SetActivationState).apply(null,arguments)},t._HP_Body_GetActivationState=function(){return(t._HP_Body_GetActivationState=t.asm.HP_Body_GetActivationState).apply(null,arguments)},t._HP_Body_SetActivationControl=function(){return(t._HP_Body_SetActivationControl=t.asm.HP_Body_SetActivationControl).apply(null,arguments)},t._HP_Body_SetActivationPriority=function(){return(t._HP_Body_SetActivationPriority=t.asm.HP_Body_SetActivationPriority).apply(null,arguments)},t._HP_Constraint_Create=function(){return(t._HP_Constraint_Create=t.asm.HP_Constraint_Create).apply(null,arguments)},t._HP_Constraint_Release=function(){return(t._HP_Constraint_Release=t.asm.HP_Constraint_Release).apply(null,arguments)},t._HP_Constraint_SetParentBody=function(){return(t._HP_Constraint_SetParentBody=t.asm.HP_Constraint_SetParentBody).apply(null,arguments)},t._HP_Constraint_GetParentBody=function(){return(t._HP_Constraint_GetParentBody=t.asm.HP_Constraint_GetParentBody).apply(null,arguments)},t._HP_Constraint_SetChildBody=function(){return(t._HP_Constraint_SetChildBody=t.asm.HP_Constraint_SetChildBody).apply(null,arguments)},t._HP_Constraint_GetChildBody=function(){return(t._HP_Constraint_GetChildBody=t.asm.HP_Constraint_GetChildBody).apply(null,arguments)},t._HP_Constraint_SetAnchorInParent=function(){return(t._HP_Constraint_SetAnchorInParent=t.asm.HP_Constraint_SetAnchorInParent).apply(null,arguments)},t._HP_Constraint_SetAnchorInChild=function(){return(t._HP_Constraint_SetAnchorInChild=t.asm.HP_Constraint_SetAnchorInChild).apply(null,arguments)},t._HP_Constraint_SetCollisionsEnabled=function(){return(t._HP_Constraint_SetCollisionsEnabled=t.asm.HP_Constraint_SetCollisionsEnabled).apply(null,arguments)},t._HP_Constraint_GetCollisionsEnabled=function(){return(t._HP_Constraint_GetCollisionsEnabled=t.asm.HP_Constraint_GetCollisionsEnabled).apply(null,arguments)},t._HP_Constraint_SetEnabled=function(){return(t._HP_Constraint_SetEnabled=t.asm.HP_Constraint_SetEnabled).apply(null,arguments)},t._HP_Constraint_GetEnabled=function(){return(t._HP_Constraint_GetEnabled=t.asm.HP_Constraint_GetEnabled).apply(null,arguments)},t._HP_Constraint_SetAxisMinLimit=function(){return(t._HP_Constraint_SetAxisMinLimit=t.asm.HP_Constraint_SetAxisMinLimit).apply(null,arguments)},t._HP_Constraint_GetAxisMinLimit=function(){return(t._HP_Constraint_GetAxisMinLimit=t.asm.HP_Constraint_GetAxisMinLimit).apply(null,arguments)},t._HP_Constraint_SetAxisMaxLimit=function(){return(t._HP_Constraint_SetAxisMaxLimit=t.asm.HP_Constraint_SetAxisMaxLimit).apply(null,arguments)},t._HP_Constraint_GetAxisMaxLimit=function(){return(t._HP_Constraint_GetAxisMaxLimit=t.asm.HP_Constraint_GetAxisMaxLimit).apply(null,arguments)},t._HP_Constraint_GetAxisMode=function(){return(t._HP_Constraint_GetAxisMode=t.asm.HP_Constraint_GetAxisMode).apply(null,arguments)},t._HP_Constraint_SetAxisMode=function(){return(t._HP_Constraint_SetAxisMode=t.asm.HP_Constraint_SetAxisMode).apply(null,arguments)},t._HP_Constraint_SetAxisFriction=function(){return(t._HP_Constraint_SetAxisFriction=t.asm.HP_Constraint_SetAxisFriction).apply(null,arguments)},t._HP_Constraint_GetAxisFriction=function(){return(t._HP_Constraint_GetAxisFriction=t.asm.HP_Constraint_GetAxisFriction).apply(null,arguments)},t._HP_Constraint_SetAxisMotorType=function(){return(t._HP_Constraint_SetAxisMotorType=t.asm.HP_Constraint_SetAxisMotorType).apply(null,arguments)},t._HP_Constraint_GetAxisMotorType=function(){return(t._HP_Constraint_GetAxisMotorType=t.asm.HP_Constraint_GetAxisMotorType).apply(null,arguments)},t._HP_Constraint_SetAxisMotorPositionTarget=function(){return(t._HP_Constraint_SetAxisMotorPositionTarget=t.asm.HP_Constraint_SetAxisMotorPositionTarget).apply(null,arguments)},t._HP_Constraint_GetAxisMotorPositionTarget=function(){return(t._HP_Constraint_GetAxisMotorPositionTarget=t.asm.HP_Constraint_GetAxisMotorPositionTarget).apply(null,arguments)},t._HP_Constraint_SetAxisMotorVelocityTarget=function(){return(t._HP_Constraint_SetAxisMotorVelocityTarget=t.asm.HP_Constraint_SetAxisMotorVelocityTarget).apply(null,arguments)},t._HP_Constraint_GetAxisMotorVelocityTarget=function(){return(t._HP_Constraint_GetAxisMotorVelocityTarget=t.asm.HP_Constraint_GetAxisMotorVelocityTarget).apply(null,arguments)},t._HP_Constraint_SetAxisMotorMaxForce=function(){return(t._HP_Constraint_SetAxisMotorMaxForce=t.asm.HP_Constraint_SetAxisMotorMaxForce).apply(null,arguments)},t._HP_Constraint_GetAxisMotorMaxForce=function(){return(t._HP_Constraint_GetAxisMotorMaxForce=t.asm.HP_Constraint_GetAxisMotorMaxForce).apply(null,arguments)},t._HP_Constraint_SetAxisMotorStiffness=function(){return(t._HP_Constraint_SetAxisMotorStiffness=t.asm.HP_Constraint_SetAxisMotorStiffness).apply(null,arguments)},t._HP_Constraint_GetAxisMotorStiffness=function(){return(t._HP_Constraint_GetAxisMotorStiffness=t.asm.HP_Constraint_GetAxisMotorStiffness).apply(null,arguments)},t._HP_Constraint_SetAxisMotorDamping=function(){return(t._HP_Constraint_SetAxisMotorDamping=t.asm.HP_Constraint_SetAxisMotorDamping).apply(null,arguments)},t._HP_Constraint_GetAxisMotorDamping=function(){return(t._HP_Constraint_GetAxisMotorDamping=t.asm.HP_Constraint_GetAxisMotorDamping).apply(null,arguments)},t._HP_Constraint_SetAxisStiffness=function(){return(t._HP_Constraint_SetAxisStiffness=t.asm.HP_Constraint_SetAxisStiffness).apply(null,arguments)},t._HP_Constraint_SetAxisDamping=function(){return(t._HP_Constraint_SetAxisDamping=t.asm.HP_Constraint_SetAxisDamping).apply(null,arguments)},t._HP_Constraint_SetAxisMotorTarget=function(){return(t._HP_Constraint_SetAxisMotorTarget=t.asm.HP_Constraint_SetAxisMotorTarget).apply(null,arguments)},t._HP_Constraint_GetAxisMotorTarget=function(){return(t._HP_Constraint_GetAxisMotorTarget=t.asm.HP_Constraint_GetAxisMotorTarget).apply(null,arguments)},t._HP_World_Create=function(){return(t._HP_World_Create=t.asm.HP_World_Create).apply(null,arguments)},t._HP_World_Release=function(){return(t._HP_World_Release=t.asm.HP_World_Release).apply(null,arguments)},t._HP_World_GetBodyBuffer=function(){return(t._HP_World_GetBodyBuffer=t.asm.HP_World_GetBodyBuffer).apply(null,arguments)},t._HP_World_SetGravity=function(){return(t._HP_World_SetGravity=t.asm.HP_World_SetGravity).apply(null,arguments)},t._HP_World_GetGravity=function(){return(t._HP_World_GetGravity=t.asm.HP_World_GetGravity).apply(null,arguments)},t._HP_World_AddBody=function(){return(t._HP_World_AddBody=t.asm.HP_World_AddBody).apply(null,arguments)},t._HP_World_RemoveBody=function(){return(t._HP_World_RemoveBody=t.asm.HP_World_RemoveBody).apply(null,arguments)},t._HP_World_GetNumBodies=function(){return(t._HP_World_GetNumBodies=t.asm.HP_World_GetNumBodies).apply(null,arguments)},t._HP_World_CastRayWithCollector=function(){return(t._HP_World_CastRayWithCollector=t.asm.HP_World_CastRayWithCollector).apply(null,arguments)},t._HP_World_PointProximityWithCollector=function(){return(t._HP_World_PointProximityWithCollector=t.asm.HP_World_PointProximityWithCollector).apply(null,arguments)},t._HP_World_ShapeProximityWithCollector=function(){return(t._HP_World_ShapeProximityWithCollector=t.asm.HP_World_ShapeProximityWithCollector).apply(null,arguments)},t._HP_World_ShapeCastWithCollector=function(){return(t._HP_World_ShapeCastWithCollector=t.asm.HP_World_ShapeCastWithCollector).apply(null,arguments)},t._HP_World_Step=function(){return(t._HP_World_Step=t.asm.HP_World_Step).apply(null,arguments)},t._HP_World_SetIdealStepTime=function(){return(t._HP_World_SetIdealStepTime=t.asm.HP_World_SetIdealStepTime).apply(null,arguments)},t._HP_World_SetSpeedLimit=function(){return(t._HP_World_SetSpeedLimit=t.asm.HP_World_SetSpeedLimit).apply(null,arguments)},t._HP_World_GetSpeedLimit=function(){return(t._HP_World_GetSpeedLimit=t.asm.HP_World_GetSpeedLimit).apply(null,arguments)},t._HP_World_GetNextCollisionEvent=function(){return(t._HP_World_GetNextCollisionEvent=t.asm.HP_World_GetNextCollisionEvent).apply(null,arguments)},t._HP_World_GetNextTriggerEvent=function(){return(t._HP_World_GetNextTriggerEvent=t.asm.HP_World_GetNextTriggerEvent).apply(null,arguments)},t._HP_QueryCollector_Create=function(){return(t._HP_QueryCollector_Create=t.asm.HP_QueryCollector_Create).apply(null,arguments)},t._HP_QueryCollector_Release=function(){return(t._HP_QueryCollector_Release=t.asm.HP_QueryCollector_Release).apply(null,arguments)},t._HP_QueryCollector_GetNumHits=function(){return(t._HP_QueryCollector_GetNumHits=t.asm.HP_QueryCollector_GetNumHits).apply(null,arguments)},t._HP_QueryCollector_GetCastRayResult=function(){return(t._HP_QueryCollector_GetCastRayResult=t.asm.HP_QueryCollector_GetCastRayResult).apply(null,arguments)},t._HP_QueryCollector_GetPointProximityResult=function(){return(t._HP_QueryCollector_GetPointProximityResult=t.asm.HP_QueryCollector_GetPointProximityResult).apply(null,arguments)},t._HP_QueryCollector_GetShapeProximityResult=function(){return(t._HP_QueryCollector_GetShapeProximityResult=t.asm.HP_QueryCollector_GetShapeProximityResult).apply(null,arguments)},t._HP_QueryCollector_GetShapeCastResult=function(){return(t._HP_QueryCollector_GetShapeCastResult=t.asm.HP_QueryCollector_GetShapeCastResult).apply(null,arguments)},t._main=function(){return(t._main=t.asm.main).apply(null,arguments)};var Rt=t._malloc=function(){return(Rt=t._malloc=t.asm.malloc).apply(null,arguments)},tt=t._free=function(){return(tt=t._free=t.asm.free).apply(null,arguments)};t._HP_Debug_StartRecordingStats=function(){return(t._HP_Debug_StartRecordingStats=t.asm.HP_Debug_StartRecordingStats).apply(null,arguments)},t._HP_Debug_StopRecordingStats=function(){return(t._HP_Debug_StopRecordingStats=t.asm.HP_Debug_StopRecordingStats).apply(null,arguments)},t.___errno_location=function(){return(t.___errno_location=t.asm.__errno_location).apply(null,arguments)},t._htons=function(){return(t._htons=t.asm.htons).apply(null,arguments)},t._ntohs=function(){return(t._ntohs=t.asm.ntohs).apply(null,arguments)};var ce=t.___getTypeName=function(){return(ce=t.___getTypeName=t.asm.__getTypeName).apply(null,arguments)};t.__embind_initialize_bindings=function(){return(t.__embind_initialize_bindings=t.asm._embind_initialize_bindings).apply(null,arguments)},t._htonl=function(){return(t._htonl=t.asm.htonl).apply(null,arguments)},t._setThrew=function(){return(t._setThrew=t.asm.setThrew).apply(null,arguments)},t._saveSetjmp=function(){return(t._saveSetjmp=t.asm.saveSetjmp).apply(null,arguments)},t.stackSave=function(){return(t.stackSave=t.asm.stackSave).apply(null,arguments)},t.stackRestore=function(){return(t.stackRestore=t.asm.stackRestore).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)};var bt;ct=function i(){bt||de(),bt||(ct=i)};function Qn(i){var s=t._main,l=0,p=0;try{var h=s(l,p);return Un(h,!0),h}catch(c){return Ne(c)}}function de(i){if(ot>0||(xe(),ot>0))return;function s(){bt||(bt=!0,t.calledRun=!0,!E&&(Ie(),De(),e(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),fe&&Qn(),Ee()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),s()},1)):s()}if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();var fe=!0;return t.noInitialRun&&(fe=!1),de(),r.ready}}(),ri=$n,ai=""+new URL("HavokPhysics.BRRoEspC.wasm",import.meta.url).href;export{ii as H,ni as P,ai as _,ri as a};
