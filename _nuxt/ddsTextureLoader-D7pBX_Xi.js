import{q as p,s as D}from"./VGRWorker-Ds2QV2D2.js";function c(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function v(o,s){for(var i=0;i<s.length;i++){var a=s[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}function C(o,s,i){return v(o.prototype,s),o}var b=function(){function o(){c(this,o),this.supportCascades=!0}return C(o,[{key:"loadCubeData",value:function(i,a,t,n){var l=a.getEngine(),e,r=!1,m=1e3;if(Array.isArray(i))for(var f=0;f<i.length;f++){var h=i[f];e=p.GetDDSInfo(h),a.width=e.width,a.height=e.height,r=(e.isRGB||e.isLuminance||e.mipmapCount>1)&&a.generateMipMaps,l._unpackFlipY(e.isCompressed),p.UploadDDSLevels(l,a,h,e,r,6,-1,f),!e.isFourCC&&e.mipmapCount===1?l.generateMipMapsForCubemap(a):m=e.mipmapCount-1}else{var u=i;e=p.GetDDSInfo(u),a.width=e.width,a.height=e.height,t&&(e.sphericalPolynomial=new D),r=(e.isRGB||e.isLuminance||e.mipmapCount>1)&&a.generateMipMaps,l._unpackFlipY(e.isCompressed),p.UploadDDSLevels(l,a,u,e,r,6),!e.isFourCC&&e.mipmapCount===1?l.generateMipMapsForCubemap(a,!1):m=e.mipmapCount-1}l._setCubeMapTextureParams(a,r,m),a.isReady=!0,a.onLoadedObservable.notifyObservers(a),a.onLoadedObservable.clear(),n&&n({isDDS:!0,width:a.width,info:e,data:i,texture:a})}},{key:"loadData",value:function(i,a,t){var n=p.GetDDSInfo(i),l=(n.isRGB||n.isLuminance||n.mipmapCount>1)&&a.generateMipMaps&&Math.max(n.width,n.height)>>n.mipmapCount-1===1;t(n.width,n.height,l,n.isFourCC,function(){p.UploadDDSLevels(a.getEngine(),a,i,n,l,1)})}}]),o}();export{b as _DDSTextureLoader};
